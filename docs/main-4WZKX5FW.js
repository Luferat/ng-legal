var qP=Object.defineProperty,GP=Object.defineProperties;var WP=Object.getOwnPropertyDescriptors;var IT=Object.getOwnPropertySymbols,KP=Object.getPrototypeOf,QP=Object.prototype.hasOwnProperty,YP=Object.prototype.propertyIsEnumerable,ZP=Reflect.get;var wT=(n,e,t)=>e in n?qP(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,F=(n,e)=>{for(var t in e||={})QP.call(e,t)&&wT(n,t,e[t]);if(IT)for(var t of IT(e))YP.call(e,t)&&wT(n,t,e[t]);return n},me=(n,e)=>GP(n,WP(e));var jr=(n,e,t)=>ZP(KP(n),t,e);var _=(n,e,t)=>new Promise((r,i)=>{var o=u=>{try{a(t.next(u))}catch(l){i(l)}},s=u=>{try{a(t.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);a((t=t.apply(n,e)).next())});var Zp;function ll(){return Zp}function Rn(n){let e=Zp;return Zp=n,e}var TT=Symbol("NotFound");function Ko(n){return n===TT||n?.name==="\u0275NotFound"}function Jp(n,e){return Object.is(n,e)}var _t=null,dl=!1,Xp=1,JP=null,xt=Symbol("SIGNAL");function X(n){let e=_t;return _t=n,e}function fl(){return _t}var Ha={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function za(n){if(dl)throw new Error("");if(_t===null)return;_t.consumerOnSignalRead(n);let e=_t.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=_t.recomputing;if(r&&(t=e!==void 0?e.nextProducer:_t.producers,t!==void 0&&t.producer===n)){_t.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===_t&&(!r||ek(i,_t)))return;let o=Qo(_t),s={producer:n,consumer:_t,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};_t.producersTail=s,e!==void 0?e.nextProducer=s:_t.producers=s,o&&ST(n,s)}function DT(){Xp++}function eg(n){if(!(Qo(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Xp)){if(!n.producerMustRecompute(n)&&!Ga(n)){hl(n);return}n.producerRecomputeValue(n),hl(n)}}function tg(n){if(n.consumers===void 0)return;let e=dl;dl=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||XP(r)}}finally{dl=e}}function ng(){return _t?.consumerAllowSignalWrites!==!1}function XP(n){n.dirty=!0,tg(n),n.consumerMarkedDirty?.(n)}function hl(n){n.dirty=!1,n.lastCleanEpoch=Xp}function qa(n){return n&&bT(n),X(n)}function bT(n){n.producersTail=void 0,n.recomputing=!0}function pl(n,e){X(e),n&&CT(n)}function CT(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(Qo(n))do t=rg(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function Ga(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(eg(t),r!==t.version))return!0}return!1}function Wa(n){if(Qo(n)){let e=n.producers;for(;e!==void 0;)e=rg(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function ST(n,e){let t=n.consumersTail,r=Qo(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)ST(i.producer,i)}function rg(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!Qo(e)){let o=e.producers;for(;o!==void 0;)o=rg(o)}return t}function Qo(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function ig(n){JP?.(n)}function ek(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function tk(){throw new Error}var AT=tk;function RT(n){AT(n)}function og(n){AT=n}var nk=null;function sg(n,e){let t=Object.create(gl);t.value=n,e!==void 0&&(t.equal=e);let r=()=>NT(t);return r[xt]=t,ig(t),[r,s=>Yo(t,s),s=>ag(t,s)]}function NT(n){return za(n),n.value}function Yo(n,e){ng()||RT(n),n.equal(n.value,e)||(n.value=e,rk(n))}function ag(n,e){ng()||RT(n),Yo(n,e(n.value))}var gl=me(F({},Ha),{equal:Jp,value:void 0,kind:"signal"});function rk(n){n.version++,DT(),tg(n),nk?.(n)}function te(n){return typeof n=="function"}function Zo(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var ml=Zo(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Li(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Le=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(te(r))try{r()}catch(o){e=o instanceof ml?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{MT(o)}catch(s){e=e??[],s instanceof ml?e=[...e,...s.errors]:e.push(s)}}if(e)throw new ml(e)}}add(e){var t;if(e&&e!==this)if(this.closed)MT(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Li(t,e)}remove(e){let{_finalizers:t}=this;t&&Li(t,e),e instanceof n&&e._removeParent(this)}};Le.EMPTY=(()=>{let n=new Le;return n.closed=!0,n})();var cg=Le.EMPTY;function yl(n){return n instanceof Le||n&&"closed"in n&&te(n.remove)&&te(n.add)&&te(n.unsubscribe)}function MT(n){te(n)?n():n.unsubscribe()}var sn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Jo={setTimeout(n,e,...t){let{delegate:r}=Jo;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Jo;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function vl(n){Jo.setTimeout(()=>{let{onUnhandledError:e}=sn;if(e)e(n);else throw n})}function Fi(){}var PT=ug("C",void 0,void 0);function kT(n){return ug("E",void 0,n)}function xT(n){return ug("N",n,void 0)}function ug(n,e,t){return{kind:n,value:e,error:t}}var Vi=null;function Xo(n){if(sn.useDeprecatedSynchronousErrorHandling){let e=!Vi;if(e&&(Vi={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Vi;if(Vi=null,t)throw r}}else n()}function OT(n){sn.useDeprecatedSynchronousErrorHandling&&Vi&&(Vi.errorThrown=!0,Vi.error=n)}var ji=class extends Le{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,yl(e)&&e.add(this)):this.destination=sk}static create(e,t,r){return new es(e,t,r)}next(e){this.isStopped?dg(xT(e),this):this._next(e)}error(e){this.isStopped?dg(kT(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?dg(PT,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},ik=Function.prototype.bind;function lg(n,e){return ik.call(n,e)}var hg=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){_l(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){_l(r)}else _l(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){_l(t)}}},es=class extends ji{constructor(e,t,r){super();let i;if(te(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&sn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&lg(e.next,o),error:e.error&&lg(e.error,o),complete:e.complete&&lg(e.complete,o)}):i=e}this.destination=new hg(i)}};function _l(n){sn.useDeprecatedSynchronousErrorHandling?OT(n):vl(n)}function ok(n){throw n}function dg(n,e){let{onStoppedNotification:t}=sn;t&&Jo.setTimeout(()=>t(n,e))}var sk={closed:!0,next:Fi,error:ok,complete:Fi};var ts=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Ut(n){return n}function El(...n){return fg(n)}function fg(n){return n.length===0?Ut:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var G=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=ck(t)?t:new es(t,r,i);return Xo(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=LT(r),new r((i,o)=>{let s=new es({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[ts](){return this}pipe(...t){return fg(t)(this)}toPromise(t){return t=LT(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function LT(n){var e;return(e=n??sn.Promise)!==null&&e!==void 0?e:Promise}function ak(n){return n&&te(n.next)&&te(n.error)&&te(n.complete)}function ck(n){return n&&n instanceof ji||ak(n)&&yl(n)}function pg(n){return te(n?.lift)}function le(n){return e=>{if(pg(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function de(n,e,t,r,i){return new gg(n,e,t,r,i)}var gg=class extends ji{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function ns(){return le((n,e)=>{let t=null;n._refCount++;let r=de(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var rs=class extends G{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,pg(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Le;let t=this.getSubject();e.add(this.source.subscribe(de(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Le.EMPTY)}return e}refCount(){return ns()(this)}};var FT=Zo(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ke=(()=>{class n extends G{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Il(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new FT}next(t){Xo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Xo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Xo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?cg:(this.currentObservers=null,o.push(t),new Le(()=>{this.currentObservers=null,Li(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new G;return t.source=this,t}}return n.create=(e,t)=>new Il(e,t),n})(),Il=class extends ke{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:cg}};var ht=class extends ke{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var mg={now(){return(mg.delegate||Date).now()},delegate:void 0};var wl=class extends Le{constructor(e,t){super()}schedule(e,t=0){return this}};var Ka={setInterval(n,e,...t){let{delegate:r}=Ka;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Ka;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var is=class extends wl{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Ka.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Ka.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Li(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var os=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};os.now=mg.now;var ss=class extends os{constructor(e,t=os.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var yg=new ss(is);var Tl=class extends is{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Dl=class extends ss{};var vg=new Dl(Tl);var Ot=new G(n=>n.complete());function VT(n){return n&&te(n.schedule)}function jT(n){return n[n.length-1]}function UT(n){return te(jT(n))?n.pop():void 0}function Ur(n){return VT(jT(n))?n.pop():void 0}function bl(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function $T(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(n,e||[])).next())})}function BT(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ui(n){return this instanceof Ui?(this.v=n,this):new Ui(n)}function HT(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(S){return Promise.resolve(S).then(y,p)}}function a(y,S){r[y]&&(i[y]=function(P){return new Promise(function(M,L){o.push([y,P,M,L])>1||u(y,P)})},S&&(i[y]=S(i[y])))}function u(y,S){try{l(r[y](S))}catch(P){m(o[0][3],P)}}function l(y){y.value instanceof Ui?Promise.resolve(y.value.v).then(h,p):m(o[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function m(y,S){y(S),o.shift(),o.length&&u(o[0][0],o[0][1])}}function zT(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof BT=="function"?BT(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,u){s=n[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var Cl=n=>n&&typeof n.length=="number"&&typeof n!="function";function Sl(n){return te(n?.then)}function Al(n){return te(n[ts])}function Rl(n){return Symbol.asyncIterator&&te(n?.[Symbol.asyncIterator])}function Nl(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function uk(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ml=uk();function Pl(n){return te(n?.[Ml])}function kl(n){return HT(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Ui(t.read());if(i)return yield Ui(void 0);yield yield Ui(r)}}finally{t.releaseLock()}})}function xl(n){return te(n?.getReader)}function rt(n){if(n instanceof G)return n;if(n!=null){if(Al(n))return lk(n);if(Cl(n))return dk(n);if(Sl(n))return hk(n);if(Rl(n))return qT(n);if(Pl(n))return fk(n);if(xl(n))return pk(n)}throw Nl(n)}function lk(n){return new G(e=>{let t=n[ts]();if(te(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function dk(n){return new G(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function hk(n){return new G(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,vl)})}function fk(n){return new G(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function qT(n){return new G(e=>{gk(n,e).catch(t=>e.error(t))})}function pk(n){return qT(kl(n))}function gk(n,e){var t,r,i,o;return $T(this,void 0,void 0,function*(){try{for(t=zT(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Lt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Br(n,e=0){return le((t,r)=>{t.subscribe(de(r,i=>Lt(r,n,()=>r.next(i),e),()=>Lt(r,n,()=>r.complete(),e),i=>Lt(r,n,()=>r.error(i),e)))})}function $r(n,e=0){return le((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function GT(n,e){return rt(n).pipe($r(e),Br(e))}function WT(n,e){return rt(n).pipe($r(e),Br(e))}function KT(n,e){return new G(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function QT(n,e){return new G(t=>{let r;return Lt(t,e,()=>{r=n[Ml](),Lt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>te(r?.return)&&r.return()})}function Ol(n,e){if(!n)throw new Error("Iterable cannot be null");return new G(t=>{Lt(t,e,()=>{let r=n[Symbol.asyncIterator]();Lt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function YT(n,e){return Ol(kl(n),e)}function ZT(n,e){if(n!=null){if(Al(n))return GT(n,e);if(Cl(n))return KT(n,e);if(Sl(n))return WT(n,e);if(Rl(n))return Ol(n,e);if(Pl(n))return QT(n,e);if(xl(n))return YT(n,e)}throw Nl(n)}function we(n,e){return e?ZT(n,e):rt(n)}function q(...n){let e=Ur(n);return we(n,e)}function as(n,e){let t=te(n)?n:()=>n,r=i=>i.error(t());return new G(e?i=>e.schedule(r,0,i):r)}function _g(n){return!!n&&(n instanceof G||te(n.lift)&&te(n.subscribe))}var rr=Zo(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Q(n,e){return le((t,r)=>{let i=0;t.subscribe(de(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:mk}=Array;function yk(n,e){return mk(e)?n(...e):n(e)}function JT(n){return Q(e=>yk(n,e))}var{isArray:vk}=Array,{getPrototypeOf:_k,prototype:Ek,keys:Ik}=Object;function XT(n){if(n.length===1){let e=n[0];if(vk(e))return{args:e,keys:null};if(wk(e)){let t=Ik(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function wk(n){return n&&typeof n=="object"&&_k(n)===Ek}function eD(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Qa(...n){let e=Ur(n),t=UT(n),{args:r,keys:i}=XT(n);if(r.length===0)return we([],e);let o=new G(Tk(r,e,i?s=>eD(i,s):Ut));return t?o.pipe(JT(t)):o}function Tk(n,e,t=Ut){return r=>{tD(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)tD(e,()=>{let l=we(n[u],e),h=!1;l.subscribe(de(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function tD(n,e,t){n?Lt(t,n,e):e()}function nD(n,e,t,r,i,o,s,a){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},y=P=>l<r?S(P):u.push(P),S=P=>{o&&e.next(P),l++;let M=!1;rt(t(P,h++)).subscribe(de(e,L=>{i?.(L),o?y(L):e.next(L)},()=>{M=!0},void 0,()=>{if(M)try{for(l--;u.length&&l<r;){let L=u.shift();s?Lt(e,s,()=>S(L)):S(L)}m()}catch(L){e.error(L)}}))};return n.subscribe(de(e,y,()=>{p=!0,m()})),()=>{a?.()}}function Ue(n,e,t=1/0){return te(e)?Ue((r,i)=>Q((o,s)=>e(r,o,i,s))(rt(n(r,i))),t):(typeof e=="number"&&(t=e),le((r,i)=>nD(r,i,n,t)))}function Hr(n=1/0){return Ue(Ut,n)}function rD(){return Hr(1)}function cs(...n){return rD()(we(n,Ur(n)))}function Bi(n){return new G(e=>{rt(n()).subscribe(e)})}var ir=new G(Fi);function it(n,e){return le((t,r)=>{let i=0;t.subscribe(de(r,o=>n.call(e,o,i++)&&r.next(o)))})}function or(n){return le((e,t)=>{let r=null,i=!1,o;r=e.subscribe(de(t,void 0,void 0,s=>{o=rt(n(s,or(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function iD(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(de(s,h=>{let p=l++;u=a?n(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function zr(n,e){return te(e)?Ue(n,e,1):Ue(n,1)}function qr(n){return le((e,t)=>{let r=!1;e.subscribe(de(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Rt(n){return n<=0?()=>Ot:le((e,t)=>{let r=0;e.subscribe(de(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Ll(n=Dk){return le((e,t)=>{let r=!1;e.subscribe(de(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Dk(){return new rr}function Ya(n){return le((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function sr(n,e){let t=arguments.length>=2;return r=>r.pipe(n?it((i,o)=>n(i,o,r)):Ut,Rt(1),t?qr(e):Ll(()=>new rr))}function us(n){return n<=0?()=>Ot:le((e,t)=>{let r=[];e.subscribe(de(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Eg(n,e){let t=arguments.length>=2;return r=>r.pipe(n?it((i,o)=>n(i,o,r)):Ut,us(1),t?qr(e):Ll(()=>new rr))}function Fl(n,e){return le(iD(n,e,arguments.length>=2,!0))}function Vl(...n){let e=Ur(n);return le((t,r)=>{(e?cs(n,t,e):cs(n,t)).subscribe(r)})}function Ae(n,e){return le((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(de(r,u=>{i?.unsubscribe();let l=0,h=o++;rt(n(u,h)).subscribe(i=de(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function jl(n){return le((e,t)=>{rt(n).subscribe(de(t,()=>t.complete(),Fi)),!t.closed&&e.subscribe(t)})}function ot(n,e,t){let r=te(n)||e||t?{next:n,error:e,complete:t}:n;return r?le((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(de(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Ut}function oD(n){let e=X(null);try{return n()}finally{X(e)}}var Hi=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},kg=new Hi("20.3.2");var zl="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",U=class extends Error{code;constructor(e,t){super(Qr(e,t)),this.code=e}};function bk(n){return`NG0${Math.abs(n)}`}function Qr(n,e){return`${bk(n)}${e?": "+e:""}`}var ec=globalThis;function ye(n){for(let e in n)if(n[e]===ye)return e;throw Error("")}function Gr(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Gr).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function xg(n,e){return n?e?`${n} ${e}`:n:e||""}var Ck=ye({__forward_ref__:ye});function ql(n){return n.__forward_ref__=ql,n.toString=function(){return Gr(this())},n}function Ft(n){return Og(n)?n():n}function Og(n){return typeof n=="function"&&n.hasOwnProperty(Ck)&&n.__forward_ref__===ql}function j(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function ur(n){return{providers:n.providers||[],imports:n.imports||[]}}function tc(n){return Sk(n,Gl)}function Lg(n){return tc(n)!==null}function Sk(n,e){return n.hasOwnProperty(e)&&n[e]||null}function Ak(n){let e=n?.[Gl]??null;return e||null}function wg(n){return n&&n.hasOwnProperty(Bl)?n[Bl]:null}var Gl=ye({\u0275prov:ye}),Bl=ye({\u0275inj:ye}),B=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=j({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Fg(n){return n&&!!n.\u0275providers}var Vg=ye({\u0275cmp:ye}),jg=ye({\u0275dir:ye}),Ug=ye({\u0275pipe:ye}),Bg=ye({\u0275mod:ye}),Ja=ye({\u0275fac:ye}),Gi=ye({__NG_ELEMENT_ID__:ye}),aD=ye({__NG_ENV_ID__:ye});function nc(n){return typeof n=="string"?n:n==null?"":String(n)}function uD(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():nc(n)}var lD=ye({ngErrorCode:ye}),Rk=ye({ngErrorMessage:ye}),Nk=ye({ngTokenPath:ye});function $g(n,e){return dD("",-200,e)}function Wl(n,e){throw new U(-201,!1)}function dD(n,e,t){let r=new U(e,n);return r[lD]=e,r[Rk]=n,t&&(r[Nk]=t),r}function Mk(n){return n[lD]}var Tg;function hD(){return Tg}function Nt(n){let e=Tg;return Tg=n,e}function Hg(n,e,t){let r=tc(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;Wl(n,"Injector")}var Pk={},$i=Pk,Dg="__NG_DI_FLAG__",bg=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=zi(t)||0;try{return this.injector.get(e,r&8?null:$i,r)}catch(i){if(Ko(i))return i;throw i}}};function kk(n,e=0){let t=ll();if(t===void 0)throw new U(-203,!1);if(t===null)return Hg(n,void 0,e);{let r=xk(e),i=t.retrieve(n,r);if(Ko(i)){if(r.optional)return null;throw i}return i}}function $(n,e=0){return(hD()||kk)(Ft(n),e)}function R(n,e){return $(n,zi(e))}function zi(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function xk(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function Cg(n){let e=[];for(let t=0;t<n.length;t++){let r=Ft(n[t]);if(Array.isArray(r)){if(r.length===0)throw new U(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],u=Ok(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push($(i,o))}else e.push($(r))}return e}function fD(n,e){return n[Dg]=e,n.prototype[Dg]=e,n}function Ok(n){return n[Dg]}function Wr(n,e){let t=n.hasOwnProperty(Ja);return t?n[Ja]:null}function pD(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function gD(n){return n.flat(Number.POSITIVE_INFINITY)}function Kl(n,e){n.forEach(t=>Array.isArray(t)?Kl(t,e):e(t))}function zg(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function rc(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}var Wi={},an=[],lr=new B(""),qg=new B("",-1),Gg=new B(""),Xa=class{get(e,t=$i){if(t===$i){let i=dD("",-201);throw i.name="\u0275NotFound",i}return t}};function Wg(n){return n[Bg]||null}function dr(n){return n[Vg]||null}function Kg(n){return n[jg]||null}function mD(n){return n[Ug]||null}function Et(n){return{\u0275providers:n}}function yD(n){return Et([{provide:lr,multi:!0,useValue:n}])}function vD(...n){return{\u0275providers:Qg(!0,n),\u0275fromNgModule:!0}}function Qg(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Kl(e,s=>{let a=s;$l(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&_D(i,o),t}function _D(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Yg(i,o=>{e(o,r)})}}function $l(n,e,t,r){if(n=Ft(n),!n)return!1;let i=null,o=wg(n),s=!o&&dr(n);if(!o&&!s){let u=n.ngModule;if(o=wg(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)$l(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Kl(o.imports,h=>{$l(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&_D(l,e)}if(!a){let l=Wr(i)||(()=>new i);e({provide:i,useFactory:l,deps:an},i),e({provide:Gg,useValue:i,multi:!0},i),e({provide:lr,useValue:()=>$(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;Yg(u,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function Yg(n,e){for(let t of n)Fg(t)&&(t=t.\u0275providers),Array.isArray(t)?Yg(t,e):e(t)}var Lk=ye({provide:String,useValue:ye});function ED(n){return n!==null&&typeof n=="object"&&Lk in n}function Fk(n){return!!(n&&n.useExisting)}function Vk(n){return!!(n&&n.useFactory)}function Hl(n){return typeof n=="function"}var ic=new B(""),Ul={},cD={},Ig;function oc(){return Ig===void 0&&(Ig=new Xa),Ig}var Be=class{},qi=class extends Be{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,Ag(e,s=>this.processProvider(s)),this.records.set(qg,ls(void 0,this)),i.has("environment")&&this.records.set(Be,ls(void 0,this));let o=this.records.get(ic);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Gg,an,{self:!0}))}retrieve(e,t){let r=zi(t)||0;try{return this.get(e,$i,r)}catch(i){if(Ko(i))return i;throw i}}destroy(){Za(this),this._destroyed=!0;let e=X(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),X(e)}}onDestroy(e){return Za(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Za(this);let t=Rn(this),r=Nt(void 0),i;try{return e()}finally{Rn(t),Nt(r)}}get(e,t=$i,r){if(Za(this),e.hasOwnProperty(aD))return e[aD](this);let i=zi(r),o,s=Rn(this),a=Nt(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let h=Hk(e)&&tc(e);h&&this.injectableDefInScope(h)?l=ls(Sg(e),Ul):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?oc():this.parent;return t=i&8&&t===$i?null:t,u.get(e,t)}catch(u){let l=Mk(u);throw l===-200||l===-201?new U(l,null):u}finally{Nt(a),Rn(s)}}resolveInjectorInitializers(){let e=X(null),t=Rn(this),r=Nt(void 0),i;try{let o=this.get(lr,an,{self:!0});for(let s of o)s()}finally{Rn(t),Nt(r),X(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Gr(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Ft(e);let t=Hl(e)?e:Ft(e&&e.provide),r=Uk(e);if(!Hl(e)&&e.multi===!0){let i=this.records.get(t);i||(i=ls(void 0,Ul,!0),i.factory=()=>Cg(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=X(null);try{if(t.value===cD)throw $g(Gr(e));return t.value===Ul&&(t.value=cD,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&$k(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{X(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Ft(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Sg(n){let e=tc(n),t=e!==null?e.factory:Wr(n);if(t!==null)return t;if(n instanceof B)throw new U(204,!1);if(n instanceof Function)return jk(n);throw new U(204,!1)}function jk(n){if(n.length>0)throw new U(204,!1);let t=Ak(n);return t!==null?()=>t.factory(n):()=>new n}function Uk(n){if(ED(n))return ls(void 0,n.useValue);{let e=ID(n);return ls(e,Ul)}}function ID(n,e,t){let r;if(Hl(n)){let i=Ft(n);return Wr(i)||Sg(i)}else if(ED(n))r=()=>Ft(n.useValue);else if(Vk(n))r=()=>n.useFactory(...Cg(n.deps||[]));else if(Fk(n))r=(i,o)=>$(Ft(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=Ft(n&&(n.useClass||n.provide));if(Bk(n))r=()=>new i(...Cg(n.deps));else return Wr(i)||Sg(i)}return r}function Za(n){if(n.destroyed)throw new U(205,!1)}function ls(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Bk(n){return!!n.deps}function $k(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function Hk(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function Ag(n,e){for(let t of n)Array.isArray(t)?Ag(t,e):t&&Fg(t)?Ag(t.\u0275providers,e):e(t)}function qe(n,e){let t;n instanceof qi?(Za(n),t=n):t=new bg(n);let r,i=Rn(t),o=Nt(void 0);try{return e()}finally{Rn(i),Nt(o)}}function wD(){return hD()!==void 0||ll()!=null}var un=0,W=1,J=2,Xe=3,Zt=4,Jt=5,ds=6,hs=7,$e=8,fs=9,Nn=10,He=11,ps=12,Zg=13,Ki=14,Bt=15,Yr=16,Qi=17,Mn=18,sc=19,Jg=20,ar=21,Ql=22,ac=23,$t=24,Yi=25,ft=26,et=27,TD=1,Xg=6,Zr=7,cc=8,Zi=9,Ge=10;function Pn(n){return Array.isArray(n)&&typeof n[TD]=="object"}function ln(n){return Array.isArray(n)&&n[TD]===!0}function em(n){return(n.flags&4)!==0}function Jr(n){return n.componentOffset>-1}function Yl(n){return(n.flags&1)===1}function Ji(n){return!!n.template}function gs(n){return(n[J]&512)!==0}function Xi(n){return(n[J]&256)===256}var DD="svg",bD="math";function Xt(n){for(;Array.isArray(n);)n=n[un];return n}function CD(n,e){return Xt(e[n])}function dn(n,e){return Xt(e[n.index])}function uc(n,e){return n.data[e]}function SD(n,e){return n[e]}function tm(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function en(n,e){let t=e[n];return Pn(t)?t:t[un]}function AD(n){return(n[J]&4)===4}function Zl(n){return(n[J]&128)===128}function RD(n){return ln(n[Xe])}function kn(n,e){return e==null?null:n[e]}function nm(n){n[Qi]=0}function rm(n){n[J]&1024||(n[J]|=1024,Zl(n)&&ms(n))}function ND(n,e){for(;n>0;)e=e[Ki],n--;return e}function lc(n){return!!(n[J]&9216||n[$t]?.dirty)}function Jl(n){n[Nn].changeDetectionScheduler?.notify(8),n[J]&64&&(n[J]|=1024),lc(n)&&ms(n)}function ms(n){n[Nn].changeDetectionScheduler?.notify(0);let e=Kr(n);for(;e!==null&&!(e[J]&8192||(e[J]|=8192,!Zl(e)));)e=Kr(e)}function im(n,e){if(Xi(n))throw new U(911,!1);n[ar]===null&&(n[ar]=[]),n[ar].push(e)}function MD(n,e){if(n[ar]===null)return;let t=n[ar].indexOf(e);t!==-1&&n[ar].splice(t,1)}function Kr(n){let e=n[Xe];return ln(e)?e[Xe]:e}function om(n){return n[hs]??=[]}function sm(n){return n.cleanup??=[]}function PD(n,e,t,r){let i=om(e);i.push(t),n.firstCreatePass&&sm(n).push(r,i.length-1)}var ae={lFrame:zD(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Rg=!1;function kD(){return ae.lFrame.elementDepthCount}function xD(){ae.lFrame.elementDepthCount++}function am(){ae.lFrame.elementDepthCount--}function OD(){return ae.bindingsEnabled}function LD(){return ae.skipHydrationRootTNode!==null}function cm(n){return ae.skipHydrationRootTNode===n}function um(){ae.skipHydrationRootTNode=null}function oe(){return ae.lFrame.lView}function Vt(){return ae.lFrame.tView}function eo(n){return ae.lFrame.contextLView=n,n[$e]}function to(n){return ae.lFrame.contextLView=null,n}function It(){let n=lm();for(;n!==null&&n.type===64;)n=n.parent;return n}function lm(){return ae.lFrame.currentTNode}function FD(){let n=ae.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function ys(n,e){let t=ae.lFrame;t.currentTNode=n,t.isParent=e}function dm(){return ae.lFrame.isParent}function VD(){ae.lFrame.isParent=!1}function hm(){return Rg}function fm(n){let e=Rg;return Rg=n,e}function Xl(){let n=ae.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function jD(n){return ae.lFrame.bindingIndex=n}function no(){return ae.lFrame.bindingIndex++}function UD(){return ae.lFrame.inI18n}function BD(n,e){let t=ae.lFrame;t.bindingIndex=t.bindingRootIndex=n,ed(e)}function $D(){return ae.lFrame.currentDirectiveIndex}function ed(n){ae.lFrame.currentDirectiveIndex=n}function pm(){return ae.lFrame.currentQueryIndex}function td(n){ae.lFrame.currentQueryIndex=n}function zk(n){let e=n[W];return e.type===2?e.declTNode:e.type===1?n[Jt]:null}function gm(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=zk(o),i===null||(o=o[Ki],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=ae.lFrame=HD();return r.currentTNode=e,r.lView=n,!0}function nd(n){let e=HD(),t=n[W];ae.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function HD(){let n=ae.lFrame,e=n===null?null:n.child;return e===null?zD(n):e}function zD(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function qD(){let n=ae.lFrame;return ae.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var mm=qD;function rd(){let n=qD();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function GD(n){return(ae.lFrame.contextLView=ND(n,ae.lFrame.contextLView))[$e]}function dc(){return ae.lFrame.selectedIndex}function Xr(n){ae.lFrame.selectedIndex=n}function id(){let n=ae.lFrame;return uc(n.tView,n.selectedIndex)}function WD(){return ae.lFrame.currentNamespace}var KD=!0;function od(){return KD}function sd(n){KD=n}function Ng(n,e=null,t=null,r){let i=ym(n,e,t,r);return i.resolveInjectorInitializers(),i}function ym(n,e=null,t=null,r,i=new Set){let o=[t||an,vD(n)];return r=r||(typeof n=="object"?void 0:Gr(n)),new qi(o,e||oc(),r||null,i)}var xe=class n{static THROW_IF_NOT_FOUND=$i;static NULL=new Xa;static create(e,t){if(Array.isArray(e))return Ng({name:""},t,e,"");{let r=e.name??"";return Ng({name:r},e.parent,e.providers,r)}}static \u0275prov=j({token:n,providedIn:"any",factory:()=>$(qg)});static __NG_ELEMENT_ID__=-1},ze=new B(""),hr=(()=>{class n{static __NG_ELEMENT_ID__=qk;static __NG_ENV_ID__=t=>t}return n})(),Mg=class extends hr{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Xi(this._lView)}onDestroy(e){let t=this._lView;return im(t,e),()=>MD(t,e)}};function qk(){return new Mg(oe())}var cn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},wt=new B("",{providedIn:"root",factory:()=>{let n=R(Be),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(cn),e.handleError(t))}}}),QD={provide:lr,useValue:()=>void R(cn),multi:!0},Gk=new B("",{providedIn:"root",factory:()=>{let n=R(ze).defaultView;if(!n)return;let e=R(wt),t=o=>{e(o.reason),o.preventDefault()},r=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{n.addEventListener("unhandledrejection",t),n.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),R(hr).onDestroy(()=>{n.removeEventListener("error",r),n.removeEventListener("unhandledrejection",t)})}});function vm(){return Et([yD(()=>void R(Gk))])}function fr(n,e){let[t,r,i]=sg(n,e?.equal),o=t,s=o[xt];return o.set=r,o.update=i,o.asReadonly=YD.bind(o),o}function YD(){let n=this[xt];if(n.readonlyFn===void 0){let e=()=>this();e[xt]=n,n.readonlyFn=e}return n.readonlyFn}var cr=class{},hc=new B("",{providedIn:"root",factory:()=>!1});var _m=new B(""),Em=new B("");var ad=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=Wk}return n})();function Wk(){return new ad(oe(),It())}var xn=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new ht(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new G(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=j({token:n,providedIn:"root",factory:()=>new n})}return n})(),vs=(()=>{class n{internalPendingTasks=R(xn);scheduler=R(cr);errorHandler=R(wt);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=j({token:n,providedIn:"root",factory:()=>new n})}return n})();function fc(...n){}var Im=(()=>{class n{static \u0275prov=j({token:n,providedIn:"root",factory:()=>new Pg})}return n})(),Pg=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}};function Ts(n){return{toString:n}.toString()}var cd="__parameters__";function nx(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function rx(n,e,t){return Ts(()=>{let r=nx(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(cd)?u[cd]:Object.defineProperty(u,cd,{value:[]})[cd];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Ht=fD(rx("Optional"),8);function ix(n){return typeof n=="function"}var pd=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function Db(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var ao=(()=>{let n=()=>bb;return n.ngInherit=!0,n})();function bb(n){return n.type.prototype.ngOnChanges&&(n.setInput=sx),ox}function ox(){let n=Sb(this),e=n?.current;if(e){let t=n.previous;if(t===Wi)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function sx(n,e,t,r,i){let o=this.declaredInputs[r],s=Sb(n)||ax(n,{previous:Wi,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new pd(l&&l.currentValue,t,u===Wi),Db(n,e,i,t)}var Cb="__ngSimpleChanges__";function Sb(n){return n[Cb]||null}function ax(n,e){return n[Cb]=e}var ZD=[];var Te=function(n,e=null,t){for(let r=0;r<ZD.length;r++){let i=ZD[r];i(n,e,t)}};function cx(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=bb(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function ux(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function ld(n,e,t){Ab(n,e,3,t)}function dd(n,e,t,r){(n[J]&3)===t&&Ab(n,e,t,r)}function wm(n,e){let t=n[J];(t&3)===e&&(t&=16383,t+=1,n[J]=t)}function Ab(n,e,t,r){let i=r!==void 0?n[Qi]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[Qi]+=65536),(a<o||o==-1)&&(lx(n,t,e,u),n[Qi]=(n[Qi]&4294901760)+u+2),u++}function JD(n,e){Te(4,n,e);let t=X(null);try{e.call(n)}finally{X(t),Te(5,n,e)}}function lx(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[J]>>14<n[Qi]>>16&&(n[J]&3)===e&&(n[J]+=16384,JD(a,o)):JD(a,o)}var Es=-1,mc=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function dx(n){return(n.flags&8)!==0}function hx(n){return(n.flags&16)!==0}function fx(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];px(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function Rb(n){return n===3||n===4||n===6}function px(n){return n.charCodeAt(0)===64}function xd(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?XD(n,t,i,null,e[++r]):XD(n,t,i,null,null))}}return n}function XD(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function Nb(n){return n!==Es}function gd(n){return n&32767}function gx(n){return n>>16}function md(n,e){let t=gx(n),r=e;for(;t>0;)r=r[Ki],t--;return r}var Am=!0;function yd(n){let e=Am;return Am=n,e}var mx=256,Mb=mx-1,Pb=5,yx=0,On={};function vx(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Gi)&&(r=t[Gi]),r==null&&(r=t[Gi]=yx++);let i=r&Mb,o=1<<i;e.data[n+(i>>Pb)]|=o}function kb(n,e){let t=xb(n,e);if(t!==-1)return t;let r=e[W];r.firstCreatePass&&(n.injectorIndex=e.length,Tm(r.data,n),Tm(e,null),Tm(r.blueprint,null));let i=ey(n,e),o=n.injectorIndex;if(Nb(i)){let s=gd(i),a=md(i,e),u=a[W].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function Tm(n,e){n.push(0,0,0,0,0,0,0,0,e)}function xb(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function ey(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=jb(i),r===null)return Es;if(t++,i=i[Ki],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Es}function _x(n,e,t){vx(n,e,t)}function Ex(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(Rb(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function Ob(n,e,t){if(t&8||n!==void 0)return n;Wl(e,"NodeInjector")}function Lb(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[fs],o=Nt(void 0);try{return i?i.get(e,r,t&8):Hg(e,r,t&8)}finally{Nt(o)}}return Ob(r,e,t)}function Fb(n,e,t,r=0,i){if(n!==null){if(e[J]&2048&&!(r&2)){let s=Dx(n,e,t,r,On);if(s!==On)return s}let o=Vb(n,e,t,r,On);if(o!==On)return o}return Lb(e,t,r,i)}function Vb(n,e,t,r,i){let o=wx(t);if(typeof o=="function"){if(!gm(e,n,r))return r&1?Ob(i,t,r):Lb(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))Wl(t);else return s}finally{mm()}}else if(typeof o=="number"){let s=null,a=xb(n,e),u=Es,l=r&1?e[Bt][Jt]:null;for((a===-1||r&4)&&(u=a===-1?ey(n,e):e[a+8],u===Es||!tb(r,!1)?a=-1:(s=e[W],a=gd(u),e=md(u,e)));a!==-1;){let h=e[W];if(eb(o,a,h.data)){let p=Ix(a,e,t,s,r,l);if(p!==On)return p}u=e[a+8],u!==Es&&tb(r,e[W].data[a+8]===l)&&eb(o,a,e)?(s=h,a=gd(u),e=md(u,e)):a=-1}}return i}function Ix(n,e,t,r,i,o){let s=e[W],a=s.data[n+8],u=r==null?Jr(a)&&Am:r!=s&&(a.type&3)!==0,l=i&1&&o===a,h=hd(a,s,t,u,l);return h!==null?vd(e,s,h,a,i):On}function hd(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,m=i?a+h:l;for(let y=p;y<m;y++){let S=s[y];if(y<u&&t===S||y>=u&&S.type===t)return y}if(i){let y=s[u];if(y&&Ji(y)&&y.type===t)return u}return null}function vd(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof mc){let a=o;if(a.resolving){let y=uD(s[t]);throw $g(y)}let u=yd(a.canSeeViewProviders);a.resolving=!0;let l=s[t].type||s[t],h,p=a.injectImpl?Nt(a.injectImpl):null,m=gm(n,r,0);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&cx(t,s[t],e)}finally{p!==null&&Nt(p),yd(u),a.resolving=!1,mm()}}return o}function wx(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Gi)?n[Gi]:void 0;return typeof e=="number"?e>=0?e&Mb:Tx:e}function eb(n,e,t){let r=1<<n;return!!(t[e+(n>>Pb)]&r)}function tb(n,e){return!(n&2)&&!(n&1&&e)}var ro=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Fb(this._tNode,this._lView,e,zi(r),t)}};function Tx(){return new ro(It(),oe())}function Od(n){return Ts(()=>{let e=n.prototype.constructor,t=e[Ja]||Rm(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Ja]||Rm(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Rm(n){return Og(n)?()=>{let e=Rm(Ft(n));return e&&e()}:Wr(n)}function Dx(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[J]&2048&&!gs(s);){let a=Vb(o,s,t,r|2,On);if(a!==On)return a;let u=o.parent;if(!u){let l=s[Jg];if(l){let h=l.get(t,On,r);if(h!==On)return h}u=jb(s),s=s[Ki]}o=u}return i}function jb(n){let e=n[W],t=e.type;return t===2?e.declTNode:t===1?n[Jt]:null}function Ic(n){return Ex(It(),n)}function bx(){return Ds(It(),oe())}function Ds(n,e){return new fn(dn(n,e))}var fn=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=bx}return n})();function Cx(n){return n instanceof fn?n.nativeElement:n}function Sx(){return this._results[Symbol.iterator]()}var _d=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new ke}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=gD(e);(this._changesDetected=!pD(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=Sx};function Ub(n){return(n.flags&128)===128}var ty=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(ty||{}),Bb=new Map,Ax=0;function Rx(){return Ax++}function Nx(n){Bb.set(n[sc],n)}function Nm(n){Bb.delete(n[sc])}var nb="__ngContext__";function Is(n,e){Pn(e)?(n[nb]=e[sc],Nx(e)):n[nb]=e}function $b(n){return zb(n[ps])}function Hb(n){return zb(n[Zt])}function zb(n){for(;n!==null&&!ln(n);)n=n[Zt];return n}var Mm;function ny(n){Mm=n}function qb(){if(Mm!==void 0)return Mm;if(typeof document<"u")return document;throw new U(210,!1)}var Ld=new B("",{providedIn:"root",factory:()=>Mx}),Mx="ng",Fd=new B(""),ti=new B("",{providedIn:"platform",factory:()=>"unknown"});var Vd=new B("",{providedIn:"root",factory:()=>qb().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Px="h",kx="b";var Gb="r";var Wb="di";var Kb=!1,Qb=new B("",{providedIn:"root",factory:()=>Kb});var ry=new B("");var xx=(n,e,t,r)=>{};function Ox(n,e,t,r){xx(n,e,t,r)}function iy(n){return(n.flags&32)===32}var Lx=()=>null;function Yb(n,e,t=!1){return Lx(n,e,t)}function Zb(n,e){let t=n.contentQueries;if(t!==null){let r=X(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];td(o),a.contentQueries(2,e[s],s)}}}finally{X(r)}}}function Pm(n,e,t){td(0);let r=X(null);try{e(n,t)}finally{X(r)}}function Jb(n,e,t){if(em(e)){let r=X(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{X(r)}}}var pr=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n})(pr||{});var ud;function Fx(){if(ud===void 0&&(ud=null,ec.trustedTypes))try{ud=ec.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return ud}function rb(n){return Fx()?.createScriptURL(n)||n}var Ed=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${zl})`}};function jd(n){return n instanceof Ed?n.changingThisBreaksApplicationSecurity:n}function oy(n,e){let t=Xb(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${zl})`)}return t===e}function Xb(n){return n instanceof Ed&&n.getTypeName()||null}var Vx=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function eC(n){return n=String(n),n.match(Vx)?n:"unsafe:"+n}var Ud=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(Ud||{});function co(n){let e=nC();return e?e.sanitize(Ud.URL,n)||"":oy(n,"URL")?jd(n):eC(nc(n))}function tC(n){let e=nC();if(e)return rb(e.sanitize(Ud.RESOURCE_URL,n)||"");if(oy(n,"ResourceURL"))return rb(jd(n));throw new U(904,!1)}function jx(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?tC:co}function sy(n,e,t){return jx(e,t)(n)}function nC(){let n=oe();return n&&n[Nn].sanitizer}function rC(n){return n instanceof Function?n():n}function Ux(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var iC="ng-template";function Bx(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&Ux(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(ay(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function ay(n){return n.type===4&&n.value!==iC}function $x(n,e,t){let r=n.type===4&&!t?iC:n.value;return e===r}function Hx(n,e,t){let r=4,i=n.attrs,o=i!==null?Gx(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!hn(r)&&!hn(u))return!1;if(s&&hn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!$x(n,u,t)||u===""&&e.length===1){if(hn(r))return!1;s=!0}}else if(r&8){if(i===null||!Bx(n,i,u,t)){if(hn(r))return!1;s=!0}}else{let l=e[++a],h=zx(u,i,ay(n),t);if(h===-1){if(hn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(hn(r))return!1;s=!0}}}}return hn(r)||s}function hn(n){return(n&1)===0}function zx(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return Wx(e,n)}function qx(n,e,t=!1){for(let r=0;r<e.length;r++)if(Hx(n,e[r],t))return!0;return!1}function Gx(n){for(let e=0;e<n.length;e++){let t=n[e];if(Rb(t))return e}return n.length}function Wx(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function ib(n,e){return n?":not("+e.trim()+")":e}function Kx(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!hn(s)&&(e+=ib(o,i),i=""),r=s,o=o||!hn(r);t++}return i!==""&&(e+=ib(o,i)),e}function Qx(n){return n.map(Kx).join(",")}function Yx(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!hn(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var gr={};function Zx(n,e){return n.createText(e)}function Jx(n,e,t){n.setValue(e,t)}function oC(n,e,t){return n.createElement(e,t)}function Id(n,e,t,r,i){n.insertBefore(e,t,r,i)}function sC(n,e,t){n.appendChild(e,t)}function ob(n,e,t,r,i){r!==null?Id(n,e,t,r,i):sC(n,e,t)}function aC(n,e,t,r){n.removeChild(null,e,t,r)}function Xx(n,e,t){n.setAttribute(e,"style",t)}function eO(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function cC(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&fx(n,e,r),i!==null&&eO(n,e,i),o!==null&&Xx(n,e,o)}function cy(n,e,t,r,i,o,s,a,u,l,h){let p=et+r,m=p+i,y=tO(p,m),S=typeof l=="function"?l():l;return y[W]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:S,incompleteFirstPass:!1,ssrId:h}}function tO(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:gr);return t}function nO(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=cy(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function uy(n,e,t,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[un]=i,p[J]=r|4|128|8|64|1024,(l!==null||n&&n[J]&2048)&&(p[J]|=2048),nm(p),p[Xe]=p[Ki]=n,p[$e]=t,p[Nn]=s||n&&n[Nn],p[He]=a||n&&n[He],p[fs]=u||n&&n[fs]||null,p[Jt]=o,p[sc]=Rx(),p[ds]=h,p[Jg]=l,p[Bt]=e.type==2?n[Bt]:p,p}function rO(n,e,t){let r=dn(e,n),i=nO(t),o=n[Nn].rendererFactory,s=ly(n,uy(n,i,null,uC(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function uC(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function lC(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function ly(n,e){return n[ps]?n[Zg][Zt]=e:n[ps]=e,n[Zg]=e,e}function st(n=1){dC(Vt(),oe(),dc()+n,!1)}function dC(n,e,t,r){if(!r)if((e[J]&3)===3){let o=n.preOrderCheckHooks;o!==null&&ld(e,o,t)}else{let o=n.preOrderHooks;o!==null&&dd(e,o,0,t)}Xr(t)}var Bd=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(Bd||{});function km(n,e,t,r){let i=X(null);try{let[o,s,a]=n.inputs[t],u=null;(s&Bd.SignalBased)!==0&&(u=e[o][xt]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,u,r,t,o):Db(e,u,o,r)}finally{X(i)}}var ni=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(ni||{}),iO;function dy(n,e){return iO(n,e)}var $d=new Set;function _s(n,e,t,r,i,o){if(r!=null){let s,a=!1;ln(r)?s=r:Pn(r)&&(a=!0,r=r[un]);let u=Xt(r);n===0&&t!==null?i==null?sC(e,t,u):Id(e,t,u,i||null,!0):n===1&&t!==null?Id(e,t,u,i||null,!0):n===2?sb(o,l=>{aC(e,u,a,l)}):n===3&&sb(o,()=>{e.destroyNode(u)}),s!=null&&yO(e,n,s,t,i)}}function oO(n,e){hC(n,e),e[un]=null,e[Jt]=null}function sO(n,e,t,r,i,o){r[un]=i,r[Jt]=e,zd(n,r,t,1,i,o)}function hC(n,e){e[Nn].changeDetectionScheduler?.notify(9),zd(n,e,e[He],2,null,null)}function aO(n){let e=n[ps];if(!e)return Dm(n[W],n);for(;e;){let t=null;if(Pn(e))t=e[ps];else{let r=e[Ge];r&&(t=r)}if(!t){for(;e&&!e[Zt]&&e!==n;)Pn(e)&&Dm(e[W],e),e=e[Xe];e===null&&(e=n),Pn(e)&&Dm(e[W],e),t=e&&e[Zt]}e=t}}function hy(n,e){let t=n[Zi],r=t.indexOf(e);t.splice(r,1)}function Hd(n,e){if(Xi(e))return;let t=e[He];t.destroyNode&&zd(n,e,t,3,null,null),aO(e)}function Dm(n,e){if(Xi(e))return;let t=X(null);try{e[J]&=-129,e[J]|=256,e[$t]&&Wa(e[$t]),lO(n,e),uO(n,e),e[W].type===1&&e[He].destroy();let r=e[Yr];if(r!==null&&ln(e[Xe])){r!==e[Xe]&&hy(r,e);let i=e[Mn];i!==null&&i.detachView(n)}Nm(e)}finally{X(t)}}function sb(n,e){if(n&&n[ft]&&n[ft].leave)if(n[ft].skipLeaveAnimations)n[ft].skipLeaveAnimations=!1;else{let t=n[ft].leave,r=[];for(let i=0;i<t.length;i++){let o=t[i];r.push(o())}n[ft].running=Promise.allSettled(r),n[ft].leave=void 0}cO(n,e)}function cO(n,e){if(n&&n[ft]&&n[ft].running){n[ft].running.then(()=>{n[ft]&&n[ft].running&&(n[ft].running=void 0),$d.delete(n),e(!0)});return}e(!1)}function uO(n,e){let t=n.cleanup,r=e[hs];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[hs]=null);let i=e[ar];if(i!==null){e[ar]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[ac];if(o!==null){e[ac]=null;for(let s of o)s.destroy()}}function lO(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof mc)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Te(4,a,u);try{u.call(a)}finally{Te(5,a,u)}}else{Te(4,i,o);try{o.call(i)}finally{Te(5,i,o)}}}}}function dO(n,e,t){return hO(n,e.parent,t)}function hO(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[un];if(Jr(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===pr.None||i===pr.Emulated)return null}return dn(r,t)}function fO(n,e,t){return gO(n,e,t)}function pO(n,e,t){return n.type&40?dn(n,t):null}var gO=pO,ab;function fy(n,e,t,r){let i=dO(n,r,e),o=e[He],s=r.parent||e[Jt],a=fO(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)ob(o,i,t[u],a,!1);else ob(o,i,t,a,!1);ab!==void 0&&ab(o,r,e,t,i)}function pc(n,e){if(e!==null){let t=e.type;if(t&3)return dn(e,n);if(t&4)return xm(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return pc(n,r);{let i=n[e.index];return ln(i)?xm(-1,i):Xt(i)}}else{if(t&128)return pc(n,e.next);if(t&32)return dy(e,n)()||Xt(n[e.index]);{let r=fC(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Kr(n[Bt]);return pc(i,r)}else return pc(n,e.next)}}}return null}function fC(n,e){if(e!==null){let r=n[Bt][Jt],i=e.projection;return r.projection[i]}return null}function xm(n,e){let t=Ge+n+1;if(t<e.length){let r=e[t],i=r[W].firstChild;if(i!==null)return pc(r,i)}return e[Zr]}function py(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],u=t.type;if(s&&e===0&&(a&&Is(Xt(a),r),t.flags|=2),!iy(t))if(u&8)py(n,e,t.child,r,i,o,!1),_s(e,n,i,a,o,r);else if(u&32){let l=dy(t,r),h;for(;h=l();)_s(e,n,i,h,o,r);_s(e,n,i,a,o,r)}else u&16?mO(n,e,r,t,i,o):_s(e,n,i,a,o,r);t=s?t.projectionNext:t.next}}function zd(n,e,t,r,i,o){py(t,r,n.firstChild,e,i,o,!1)}function mO(n,e,t,r,i,o){let s=t[Bt],u=s[Jt].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];_s(e,n,i,h,o,t)}else{let l=u,h=s[Xe];Ub(r)&&(l.flags|=128),py(n,e,l,h,i,o,!0)}}function yO(n,e,t,r,i){let o=t[Zr],s=Xt(t);o!==s&&_s(e,n,r,o,i);for(let a=Ge;a<t.length;a++){let u=t[a];zd(u[W],u,n,e,r,o)}}function pC(n,e,t,r,i){let o=dc(),s=r&2;try{Xr(-1),s&&e.length>et&&dC(n,e,et,!1),Te(s?2:0,i,t),t(r,i)}finally{Xr(o),Te(s?3:1,i,t)}}function gC(n,e,t){DO(n,e,t),(t.flags&64)===64&&bO(n,e,t)}function gy(n,e,t=dn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function vO(n,e,t,r){let o=r.get(Qb,Kb)||t===pr.ShadowDom,s=n.selectRootElement(e,o);return _O(s),s}function _O(n){EO(n)}var EO=()=>null;function IO(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function wO(n,e,t,r,i,o){let s=e[W];if(my(n,s,e,t,r)){Jr(n)&&TO(e,n.index);return}n.type&3&&(t=IO(t)),mC(n,e,t,r,i,o)}function mC(n,e,t,r,i,o){if(n.type&3){let s=dn(n,e);r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function TO(n,e){let t=en(e,n);t[J]&16||(t[J]|=64)}function DO(n,e,t){let r=t.directiveStart,i=t.directiveEnd;Jr(t)&&rO(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||kb(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],u=vd(e,n,s,t);if(Is(u,e),o!==null&&NO(e,s-r,u,a,t,o),Ji(a)){let l=en(t.index,e);l[$e]=vd(e,n,s,t)}}}function bO(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=$D();try{Xr(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];ed(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&CO(u,l)}}finally{Xr(-1),ed(s)}}function CO(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function SO(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];qx(e,o.selectors,!1)&&(r??=[],Ji(o)?r.unshift(o):r.push(o))}return r}function AO(n,e,t,r,i,o){let s=dn(n,e);RO(e[He],s,o,n.value,t,r,i)}function RO(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?nc(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function NO(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];km(r,t,u,l)}}function yC(n,e,t,r,i){let o=et+t,s=e[W],a=i(s,e,n,r,t);e[o]=a,ys(n,!0);let u=n.type===2;return u?(cC(e[He],a,n),(kD()===0||Yl(n))&&Is(a,e),xD()):Is(a,e),od()&&(!u||!iy(n))&&fy(s,e,a,n),n}function vC(n){let e=n;return dm()?VD():(e=e.parent,ys(e,!1)),e}function MO(n,e){let t=n[fs];if(!t)return;let r;try{r=t.get(wt,null)}catch{r=null}r?.(e)}function my(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];km(p,t[l],h,i),a=!0}if(o)for(let u of o){let l=t[u],h=e.data[u];km(h,l,r,i),a=!0}return a}function PO(n,e){let t=en(e,n),r=t[W];kO(r,t);let i=t[un];i!==null&&t[ds]===null&&(t[ds]=Yb(i,t[fs])),Te(18),yy(r,t,t[$e]),Te(19,t[$e])}function kO(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function yy(n,e,t){nd(e);try{let r=n.viewQuery;r!==null&&Pm(1,r,t);let i=n.template;i!==null&&pC(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Mn]?.finishViewCreation(n),n.staticContentQueries&&Zb(n,e),n.staticViewQueries&&Pm(2,n.viewQuery,t);let o=n.components;o!==null&&xO(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[J]&=-5,rd()}}function xO(n,e){for(let t=0;t<e.length;t++)PO(n,e[t])}function qd(n,e,t,r){let i=X(null);try{let o=e.tView,a=n[J]&4096?4096:16,u=uy(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[Yr]=l;let h=n[Mn];return h!==null&&(u[Mn]=h.createEmbeddedView(o)),yy(o,u,t),u}finally{X(i)}}function yc(n,e){return!e||e.firstChild===null||Ub(n)}function vc(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Xt(o)),ln(o)&&_C(o,r);let s=t.type;if(s&8)vc(n,e,t.child,r);else if(s&32){let a=dy(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=fC(e,t);if(Array.isArray(a))r.push(...a);else{let u=Kr(e[Bt]);vc(u[W],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function _C(n,e){for(let t=Ge;t<n.length;t++){let r=n[t],i=r[W].firstChild;i!==null&&vc(r[W],r,i,e)}n[Zr]!==n[un]&&e.push(n[Zr])}function EC(n){if(n[Yi]!==null){for(let e of n[Yi])e.impl.addSequence(e);n[Yi].length=0}}var IC=[];function OO(n){return n[$t]??LO(n)}function LO(n){let e=IC.pop()??Object.create(VO);return e.lView=n,e}function FO(n){n.lView[$t]!==n&&(n.lView=null,IC.push(n))}var VO=me(F({},Ha),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{ms(n.lView)},consumerOnSignalRead(){this.lView[$t]=this}});function jO(n){let e=n[$t]??Object.create(UO);return e.lView=n,e}var UO=me(F({},Ha),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Kr(n.lView);for(;e&&!wC(e[W]);)e=Kr(e);e&&rm(e)},consumerOnSignalRead(){this.lView[$t]=this}});function wC(n){return n.type!==2}function TC(n){if(n[ac]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[ac])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[J]&8192)}}var BO=100;function DC(n,e=0){let r=n[Nn].rendererFactory,i=!1;i||r.begin?.();try{$O(n,e)}finally{i||r.end?.()}}function $O(n,e){let t=hm();try{fm(!0),Om(n,e);let r=0;for(;lc(n);){if(r===BO)throw new U(103,!1);r++,Om(n,1)}}finally{fm(t)}}function HO(n,e,t,r){if(Xi(e))return;let i=e[J],o=!1,s=!1;nd(e);let a=!0,u=null,l=null;o||(wC(n)?(l=OO(e),u=qa(l)):fl()===null?(a=!1,l=jO(e),u=qa(l)):e[$t]&&(Wa(e[$t]),e[$t]=null));try{nm(e),jD(n.bindingStartIndex),t!==null&&pC(n,e,t,2,r),zO(e);let h=(i&3)===3;if(!o)if(h){let y=n.preOrderCheckHooks;y!==null&&ld(e,y,null)}else{let y=n.preOrderHooks;y!==null&&dd(e,y,0,null),wm(e,0)}if(s||qO(e),TC(e),bC(e,0),n.contentQueries!==null&&Zb(n,e),!o)if(h){let y=n.contentCheckHooks;y!==null&&ld(e,y)}else{let y=n.contentHooks;y!==null&&dd(e,y,1),wm(e,1)}WO(n,e);let p=n.components;p!==null&&SC(e,p,0);let m=n.viewQuery;if(m!==null&&Pm(2,m,r),!o)if(h){let y=n.viewCheckHooks;y!==null&&ld(e,y)}else{let y=n.viewHooks;y!==null&&dd(e,y,2),wm(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Ql]){for(let y of e[Ql])y();e[Ql]=null}o||(EC(e),e[J]&=-73)}catch(h){throw o||ms(e),h}finally{l!==null&&(pl(l,u),a&&FO(l)),rd()}}function zO(n){let e=n[ft];if(e?.enter){for(let t of e.enter)t();e.enter=void 0}}function bC(n,e){for(let t=$b(n);t!==null;t=Hb(t))for(let r=Ge;r<t.length;r++){let i=t[r];CC(i,e)}}function qO(n){for(let e=$b(n);e!==null;e=Hb(e)){if(!(e[J]&2))continue;let t=e[Zi];for(let r=0;r<t.length;r++){let i=t[r];rm(i)}}}function GO(n,e,t){Te(18);let r=en(e,n);CC(r,t),Te(19,r[$e])}function CC(n,e){Zl(n)&&Om(n,e)}function Om(n,e){let r=n[W],i=n[J],o=n[$t],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Ga(o)),s||=!1,o&&(o.dirty=!1),n[J]&=-9217,s)HO(r,n,r.template,n[$e]);else if(i&8192){let a=X(null);try{TC(n),bC(n,1);let u=r.components;u!==null&&SC(n,u,1),EC(n)}finally{X(a)}}}function SC(n,e,t){for(let r=0;r<e.length;r++)GO(n,e[r],t)}function WO(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Xr(~i);else{let o=i,s=t[++r],a=t[++r];BD(s,o);let u=e[o];Te(24,u),a(2,u),Te(25,u)}}}finally{Xr(-1)}}function vy(n,e){let t=hm()?64:1088;for(n[Nn].changeDetectionScheduler?.notify(e);n;){n[J]|=t;let r=Kr(n);if(gs(n)&&!r)return n;n=r}return null}function AC(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function RC(n,e){let t=Ge+e;if(t<n.length)return n[t]}function Gd(n,e,t,r=!0){let i=e[W];if(KO(i,e,n,t),r){let s=xm(t,n),a=e[He],u=a.parentNode(n[Zr]);u!==null&&sO(i,n[Jt],a,e,u,s)}let o=e[ds];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function NC(n,e){let t=_c(n,e);return t!==void 0&&Hd(t[W],t),t}function _c(n,e){if(n.length<=Ge)return;let t=Ge+e,r=n[t];if(r){let i=r[Yr];i!==null&&i!==n&&hy(i,r),e>0&&(n[t-1][Zt]=r[Zt]);let o=rc(n,Ge+e);oO(r[W],r);let s=o[Mn];s!==null&&s.detachView(o[W]),r[Xe]=null,r[Zt]=null,r[J]&=-129}return r}function KO(n,e,t,r){let i=Ge+r,o=t.length;r>0&&(t[i-1][Zt]=e),r<o-Ge?(e[Zt]=t[i],zg(t,Ge+r,e)):(t.push(e),e[Zt]=null),e[Xe]=t;let s=e[Yr];s!==null&&t!==s&&MC(s,e);let a=e[Mn];a!==null&&a.insertView(n),Jl(e),e[J]|=128}function MC(n,e){let t=n[Zi],r=e[Xe];if(Pn(r))n[J]|=2;else{let i=r[Xe][Bt];e[Bt]!==i&&(n[J]|=2)}t===null?n[Zi]=[e]:t.push(e)}var ei=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[W];return vc(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[$e]}set context(e){this._lView[$e]=e}get destroyed(){return Xi(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Xe];if(ln(e)){let t=e[cc],r=t?t.indexOf(this):-1;r>-1&&(_c(e,r),rc(t,r))}this._attachedToViewContainer=!1}Hd(this._lView[W],this._lView)}onDestroy(e){im(this._lView,e)}markForCheck(){vy(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[J]&=-129}reattach(){Jl(this._lView),this._lView[J]|=128}detectChanges(){this._lView[J]|=1024,DC(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new U(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=gs(this._lView),t=this._lView[Yr];t!==null&&!e&&hy(t,this._lView),hC(this._lView[W],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new U(902,!1);this._appRef=e;let t=gs(this._lView),r=this._lView[Yr];r!==null&&!t&&MC(r,this._lView),Jl(this._lView)}};var ws=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=QO;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=qd(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new ei(o)}}return n})();function QO(){return _y(It(),oe())}function _y(n,e){return n.type&4?new ws(e,n,Ds(n,e)):null}function Wd(n,e,t,r,i){let o=n.data[e];if(o===null)o=YO(n,e,t,r,i),UD()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=FD();o.injectorIndex=s===null?-1:s.injectorIndex}return ys(o,!0),o}function YO(n,e,t,r,i){let o=lm(),s=dm(),a=s?o:o&&o.parent,u=n.data[e]=JO(n,a,t,e,r,i);return ZO(n,u,o,s),u}function ZO(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function JO(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return LD()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var t5=new RegExp(`^(\\d+)*(${kx}|${Px})*(.*)`);function XO(n){let e=n[Xg]??[],r=n[Xe][He],i=[];for(let o of e)o.data[Wb]!==void 0?i.push(o):e1(o,r);n[Xg]=i}function e1(n,e){let t=0,r=n.firstChild;if(r){let i=n.data[Gb];for(;t<i;){let o=r.nextSibling;aC(e,r,!1),r=o,t++}}}var t1=()=>null,n1=()=>null;function Lm(n,e){return t1(n,e)}function PC(n,e,t){return n1(n,e,t)}var kC=class{},Kd=class{},Fm=class{resolveComponentFactory(e){throw new U(917,!1)}},wc=class{static NULL=new Fm},io=class{},uo=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>r1()}return n})();function r1(){let n=oe(),e=It(),t=en(e.index,n);return(Pn(t)?t:n)[He]}var xC=(()=>{class n{static \u0275prov=j({token:n,providedIn:"root",factory:()=>null})}return n})();var fd={},Vm=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,fd,r);return i!==fd||t===fd?i:this.parentInjector.get(e,t,r)}};function wd(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=xg(i,a);else if(o==2){let u=a,l=e[++s];r=xg(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function Re(n,e=0){let t=oe();if(t===null)return $(n,e);let r=It();return Fb(r,t,Ft(n),e)}function Ey(){let n="invalid";throw new Error(n)}function i1(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a=s,u=null,l=null;for(let h of s)if(h.resolveHostDirectives!==null){[a,u,l]=h.resolveHostDirectives(s);break}a1(n,e,t,a,o,u,l)}o!==null&&r!==null&&o1(t,r,o)}function o1(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new U(-301,!1);r.push(e[i],o)}}function s1(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function a1(n,e,t,r,i,o,s){let a=r.length,u=!1;for(let m=0;m<a;m++){let y=r[m];!u&&Ji(y)&&(u=!0,s1(n,t,m)),_x(kb(t,e),n,y.type)}f1(t,n.data.length,a);for(let m=0;m<a;m++){let y=r[m];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=lC(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let m=0;m<a;m++){let y=r[m];if(t.mergedAttrs=xd(t.mergedAttrs,y.hostAttrs),u1(n,t,e,p,y),h1(p,y,i),s!==null&&s.has(y)){let[P,M]=s.get(y);t.directiveToIndex.set(y.type,[p,P+t.directiveStart,M+t.directiveStart])}else(o===null||!o.has(y))&&t.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(t.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(t.flags|=64);let S=y.type.prototype;!l&&(S.ngOnChanges||S.ngOnInit||S.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!h&&(S.ngOnChanges||S.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),p++}c1(n,t,o)}function c1(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))cb(0,e,i,r),cb(1,e,i,r),lb(e,r,!1);else{let o=t.get(i);ub(0,e,o,r),ub(1,e,o,r),lb(e,r,!0)}}}function cb(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),OC(e,o)}}function ub(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),OC(e,s)}}function OC(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function lb(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||ay(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!t&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[a+1]);break}}else if(t&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function u1(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Wr(i.type,!0)),s=new mc(o,Ji(i),Re,null);n.blueprint[r]=s,t[r]=s,l1(n,e,r,lC(n,t,i.hostVars,gr),i)}function l1(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;d1(s)!=a&&s.push(a),s.push(t,r,o)}}function d1(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function h1(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Ji(e)&&(t[""]=n)}}function f1(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function LC(n,e,t,r,i,o,s,a){let u=e[W],l=u.consts,h=kn(l,s),p=Wd(u,n,t,r,h);return o&&i1(u,e,p,kn(l,a),i),p.mergedAttrs=xd(p.mergedAttrs,p.attrs),p.attrs!==null&&wd(p,p.attrs,!1),p.mergedAttrs!==null&&wd(p,p.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,p),p}function FC(n,e){ux(n,e),em(e)&&n.queries.elementEnd(e)}function p1(n,e,t,r,i,o){let s=e.consts,a=kn(s,i),u=Wd(e,n,t,r,a);if(u.mergedAttrs=xd(u.mergedAttrs,u.attrs),o!=null){let l=kn(s,o);u.localNames=[];for(let h=0;h<l.length;h+=2)u.localNames.push(l[h],-1)}return u.attrs!==null&&wd(u,u.attrs,!1),u.mergedAttrs!==null&&wd(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function Iy(n,e,t){return n[e]=t}function g1(n,e){return n[e]}function Ln(n,e,t){if(t===gr)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function m1(n,e,t,r){let i=Ln(n,e,t);return Ln(n,e+1,r)||i}function y1(n,e,t,r,i){let o=m1(n,e,t,r);return Ln(n,e+2,i)||o}function bm(n,e,t){return function r(i){let o=Jr(n)?en(n.index,e):e;vy(o,5);let s=e[$e],a=db(e,s,t,i),u=r.__ngNextListenerFn__;for(;u;)a=db(e,s,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function db(n,e,t,r){let i=X(null);try{return Te(6,e,t),t(r)!==!1}catch(o){return MO(n,o),!1}finally{Te(7,e,t),X(i)}}function v1(n,e,t,r,i,o,s,a){let u=Yl(n),l=!1,h=null;if(!r&&u&&(h=E1(e,t,o,n.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,l=!0}else{let p=dn(n,t),m=r?r(p):p;Ox(t,m,o,a);let y=i.listen(m,o,a);if(!_1(o)){let S=r?P=>r(Xt(P[n.index])):n.index;VC(S,e,t,o,a,y,!1)}}return l}function _1(n){return n.startsWith("animation")||n.startsWith("transition")}function E1(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[hs],u=i[o+2];return a&&a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function VC(n,e,t,r,i,o,s){let a=e.firstCreatePass?sm(e):null,u=om(t),l=u.length;u.push(i,o),a&&a.push(r,n,l,(l+1)*(s?-1:1))}function hb(n,e,t,r,i,o){let s=e[t],a=e[W],l=a.data[t].outputs[r],p=s[l].subscribe(o);VC(n.index,a,e,i,o,p,!0)}var jm=Symbol("BINDING");var Td=class extends wc{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=dr(e);return new oo(t,this.ngModule)}};function I1(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&Bd.SignalBased)!==0};return i&&(o.transform=i),o})}function w1(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function T1(n,e,t){let r=e instanceof Be?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new Vm(t,r):t}function D1(n){let e=n.get(io,null);if(e===null)throw new U(407,!1);let t=n.get(xC,null),r=n.get(cr,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function b1(n,e){let t=jC(n);return oC(e,t,t==="svg"?DD:t==="math"?bD:null)}function jC(n){return(n.selectors[0][0]||"div").toLowerCase()}var oo=class extends Kd{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=I1(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=w1(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=Qx(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){Te(22);let a=X(null);try{let u=this.componentDef,l=C1(r,u,s,o),h=T1(u,i||this.ngModule,e),p=D1(h),m=p.rendererFactory.createRenderer(null,u),y=r?vO(m,r,u.encapsulation,h):b1(u,m),S=s?.some(fb)||o?.some(L=>typeof L!="function"&&L.bindings.some(fb)),P=uy(null,l,null,512|uC(u),null,null,p,m,h,null,Yb(y,h,!0));P[et]=y,nd(P);let M=null;try{let L=LC(et,P,2,"#host",()=>l.directiveRegistry,!0,0);cC(m,y,L),Is(y,P),gC(l,P,L),Jb(l,L,P),FC(l,L),t!==void 0&&A1(L,this.ngContentSelectors,t),M=en(L.index,P),P[$e]=M[$e],yy(l,P,null)}catch(L){throw M!==null&&Nm(M),Nm(P),L}finally{Te(23),rd()}return new Dd(this.componentType,P,!!S)}finally{X(a)}}};function C1(n,e,t,r){let i=n?["ng-version","20.3.2"]:Yx(e.selectors[0]),o=null,s=null,a=0;if(t)for(let h of t)a+=h[jm].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let m of p.bindings){a+=m[jm].requiredVars;let y=h+1;m.create&&(m.targetIdx=y,(o??=[]).push(m)),m.update&&(m.targetIdx=y,(s??=[]).push(m))}}let u=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,m=Kg(p);u.push(m)}return cy(0,null,S1(o,s),1,a,u,null,null,null,[i],null)}function S1(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function fb(n){let e=n[jm].kind;return e==="input"||e==="twoWay"}var Dd=class extends kC{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=uc(t[W],et),this.location=Ds(this._tNode,t),this.instance=en(this._tNode.index,t)[$e],this.hostView=this.changeDetectorRef=new ei(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=my(r,i[W],i,e,t);this.previousInputValues.set(e,t);let s=en(r.index,i);vy(s,1)}get injector(){return new ro(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function A1(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var lo=(()=>{class n{static __NG_ELEMENT_ID__=R1}return n})();function R1(){let n=It();return BC(n,oe())}var N1=lo,UC=class extends N1{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Ds(this._hostTNode,this._hostLView)}get injector(){return new ro(this._hostTNode,this._hostLView)}get parentInjector(){let e=ey(this._hostTNode,this._hostLView);if(Nb(e)){let t=md(e,this._hostLView),r=gd(e),i=t[W].data[r+8];return new ro(i,t)}else return new ro(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=pb(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Ge}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Lm(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,yc(this._hostTNode,s)),a}createComponent(e,t,r,i,o,s,a){let u=e&&!ix(e),l;if(u)l=t;else{let M=t||{};l=M.index,r=M.injector,i=M.projectableNodes,o=M.environmentInjector||M.ngModuleRef,s=M.directives,a=M.bindings}let h=u?e:new oo(dr(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let L=(u?p:this.parentInjector).get(Be,null);L&&(o=L)}let m=dr(h.componentType??{}),y=Lm(this._lContainer,m?.id??null),S=y?.firstChild??null,P=h.create(p,i,S,o,s,a);return this.insertImpl(P.hostView,l,yc(this._hostTNode,y)),P}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(RD(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[Xe],l=new UC(u,u[Jt],u[Xe]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return Gd(s,i,o,r),e.attachToViewContainerRef(),zg(Cm(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=pb(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=_c(this._lContainer,t);r&&(rc(Cm(this._lContainer),t),Hd(r[W],r))}detach(e){let t=this._adjustIndex(e,-1),r=_c(this._lContainer,t);return r&&rc(Cm(this._lContainer),t)!=null?new ei(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function pb(n){return n[cc]}function Cm(n){return n[cc]||(n[cc]=[])}function BC(n,e){let t,r=e[n.index];return ln(r)?t=r:(t=AC(r,e,null,n),e[n.index]=t,ly(e,t)),P1(t,e,n,r),new UC(t,n,e)}function M1(n,e){let t=n[He],r=t.createComment(""),i=dn(e,n),o=t.parentNode(i);return Id(t,o,r,t.nextSibling(i),!1),r}var P1=O1,k1=()=>!1;function x1(n,e,t){return k1(n,e,t)}function O1(n,e,t,r){if(n[Zr])return;let i;t.type&8?i=Xt(r):i=M1(e,t),n[Zr]=i}var Um=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},Bm=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)wy(e,t).matches!==null&&this.queries[t].setDirty()}},$m=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=H1(e):this.predicate=e}},Hm=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},zm=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,L1(t,o)),this.matchTNodeWithReadOption(e,t,hd(t,e,o,!1,!1))}else r===ws?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,hd(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===fn||i===lo||i===ws&&t.type&4)this.addMatch(t.index,-2);else{let o=hd(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function L1(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function F1(n,e){return n.type&11?Ds(n,e):n.type&4?_y(n,e):null}function V1(n,e,t,r){return t===-1?F1(e,n):t===-2?j1(n,e,r):vd(n,n[W],t,e)}function j1(n,e,t){if(t===fn)return Ds(e,n);if(t===ws)return _y(e,n);if(t===lo)return BC(e,n)}function $C(n,e,t,r){let i=e[Mn].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let u=0;s!==null&&u<s.length;u+=2){let l=s[u];if(l<0)a.push(null);else{let h=o[l];a.push(V1(e,h,s[u+1],t.metadata.read))}}i.matches=a}return i.matches}function qm(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=$C(n,e,i,t);for(let a=0;a<o.length;a+=2){let u=o[a];if(u>0)r.push(s[a/2]);else{let l=o[a+1],h=e[-u];for(let p=Ge;p<h.length;p++){let m=h[p];m[Yr]===m[Xe]&&qm(m[W],m,l,r)}if(h[Zi]!==null){let p=h[Zi];for(let m=0;m<p.length;m++){let y=p[m];qm(y[W],y,l,r)}}}}}return r}function U1(n,e){return n[Mn].queries[e].queryList}function B1(n,e,t){let r=new _d((t&4)===4);return PD(n,e,r,r.destroy),(e[Mn]??=new Bm).queries.push(new Um(r))-1}function $1(n,e,t,r){let i=Vt();if(i.firstCreatePass){let o=It();z1(i,new $m(e,t,r),o.index),q1(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return B1(i,oe(),t)}function H1(n){return n.split(",").map(e=>e.trim())}function z1(n,e,t){n.queries===null&&(n.queries=new Hm),n.queries.track(new zm(e,t))}function q1(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function wy(n,e){return n.queries.getByIndex(e)}function G1(n,e){let t=n[W],r=wy(t,e);return r.crossesNgTemplate?qm(t,n,e,[]):$C(t,n,r,e)}var gb=new Set;function pn(n){gb.has(n)||(gb.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var so=class{},Qd=class{};var bd=class extends so{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Td(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=Wg(e);this._bootstrapComponents=rC(o.bootstrap),this._r3Injector=ym(e,t,[{provide:so,useValue:this},{provide:wc,useValue:this.componentFactoryResolver},...r],Gr(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Cd=class extends Qd{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new bd(this.moduleType,e,[])}};var Ec=class extends so{injector;componentFactoryResolver=new Td(this);instance=null;constructor(e){super();let t=new qi([...e.providers,{provide:so,useValue:this},{provide:wc,useValue:this.componentFactoryResolver}],e.parent||oc(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function bs(n,e,t=null){return new Ec({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var W1=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=Qg(!1,t.type),i=r.length>0?bs([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=j({token:n,providedIn:"environment",factory:()=>new n($(Be))})}return n})();function Mt(n){return Ts(()=>{let e=HC(n),t=me(F({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===ty.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(W1).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||pr.Emulated,styles:n.styles||an,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&pn("NgStandalone"),zC(t);let r=n.dependencies;return t.directiveDefs=mb(r,K1),t.pipeDefs=mb(r,mD),t.id=Z1(t),t})}function K1(n){return dr(n)||Kg(n)}function ri(n){return Ts(()=>({type:n.type,bootstrap:n.bootstrap||an,declarations:n.declarations||an,imports:n.imports||an,exports:n.exports||an,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Q1(n,e){if(n==null)return Wi;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=Bd.None,u=null),t[o]=[r,a,u],e[o]=s}return t}function Y1(n){if(n==null)return Wi;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function ii(n){return Ts(()=>{let e=HC(n);return zC(e),e})}function Ty(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function HC(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Wi,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||an,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:Q1(n.inputs,e),outputs:Y1(n.outputs),debugInfo:null}}function zC(n){n.features?.forEach(e=>e(n))}function mb(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let o=e(i);o!==null&&r.push(o)}return r}:null}function Z1(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function J1(n,e,t,r,i,o,s,a){if(t.firstCreatePass){n.mergedAttrs=xd(n.mergedAttrs,n.attrs);let h=n.tView=cy(2,n,i,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),h.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),ys(n,!1);let u=X1(t,e,n,r);od()&&fy(t,e,u,n),Is(u,e);let l=AC(u,e,u,n);e[r+et]=l,ly(e,l),x1(l,n,e)}function Sd(n,e,t,r,i,o,s,a,u,l,h){let p=t+et,m;if(e.firstCreatePass){if(m=Wd(e,p,4,s||null,a||null),l!=null){let y=kn(e.consts,l);m.localNames=[];for(let S=0;S<y.length;S+=2)m.localNames.push(y[S],-1)}}else m=e.data[p];return J1(m,n,e,t,r,i,o,u),l!=null&&gy(n,m,h),m}var X1=eL;function eL(n,e,t,r){return sd(!0),e[He].createComment("")}var Yd=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(Yd||{}),ho=new B(""),qC=!1,Gm=class extends ke{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,wD()&&(this.destroyRef=R(hr,{optional:!0})??void 0,this.pendingTasks=R(xn,{optional:!0})??void 0)}emit(e){let t=X(null);try{super.next(e)}finally{X(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Le&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Tt=Gm;function GC(n){let e,t;function r(){n=fc;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function yb(n){return queueMicrotask(()=>n()),()=>{n=fc}}var Dy="isAngularZone",Ad=Dy+"_ID",tL=0,fe=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Tt(!1);onMicrotaskEmpty=new Tt(!1);onStable=new Tt(!1);onError=new Tt(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=qC}=e;if(typeof Zone>"u")throw new U(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,iL(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Dy)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new U(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new U(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,nL,fc,fc);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},nL={};function by(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function rL(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){GC(()=>{n.callbackScheduled=!1,Wm(n),n.isCheckStableRunning=!0,by(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Wm(n)}function iL(n){let e=()=>{rL(n)},t=tL++;n._inner=n._inner.fork({name:"angular",properties:{[Dy]:!0,[Ad]:t,[Ad+t]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(oL(u))return r.invokeTask(o,s,a,u);try{return vb(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),_b(n)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return vb(n),r.invoke(o,s,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!sL(u)&&e(),_b(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Wm(n),by(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Wm(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function vb(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function _b(n){n._nesting--,by(n)}var Rd=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Tt;onMicrotaskEmpty=new Tt;onStable=new Tt;onError=new Tt;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function oL(n){return WC(n,"__ignore_ng_zone__")}function sL(n){return WC(n,"__scheduler_tick__")}function WC(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Cy=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=j({token:n,providedIn:"root",factory:()=>new n})}return n})(),KC=[0,1,2,3],QC=(()=>{class n{ngZone=R(fe);scheduler=R(cr);errorHandler=R(cn,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){R(ho,{optional:!0})}execute(){let t=this.sequences.size>0;t&&Te(16),this.executing=!0;for(let r of KC)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&Te(17)}register(t){let{view:r}=t;r!==void 0?((r[Yi]??=[]).push(t),ms(r),r[J]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(Yd.AFTER_NEXT_RENDER,t):t()}static \u0275prov=j({token:n,providedIn:"root",factory:()=>new n})}return n})(),Nd=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Yi];e&&(this.view[Yi]=e.filter(t=>t!==this))}};function Sy(n,e){let t=e?.injector??R(xe);return pn("NgAfterNextRender"),cL(n,t,e,!0)}function aL(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function cL(n,e,t,r){let i=e.get(Cy);i.impl??=e.get(QC);let o=e.get(ho,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(hr):null,a=e.get(ad,null,{optional:!0}),u=new Nd(i.impl,aL(n),a?.view,r,s,o?.snapshot(null));return i.impl.register(u),u}var Ay=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var Ry=new B("");function fo(n){return!!n&&typeof n.then=="function"}function Zd(n){return!!n&&typeof n.subscribe=="function"}var Ny=new B("");function Cs(n){return Et([{provide:Ny,multi:!0,useValue:n}])}var My=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=R(Ny,{optional:!0})??[];injector=R(xe);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=qe(this.injector,i);if(fo(o))t.push(o);else if(Zd(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Tc=new B("");function YC(){og(()=>{let n="";throw new U(600,n)})}function ZC(n){return n.isBoundToModule}var uL=10;var Fn=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=R(wt);afterRenderManager=R(Cy);zonelessEnabled=R(hc);rootEffectScheduler=R(Im);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new ke;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=R(xn);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Q(t=>!t))}constructor(){R(ho,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=R(Be);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=xe.NULL){return this._injector.get(fe).run(()=>{Te(10);let s=t instanceof Kd;if(!this._injector.get(My).done){let S="";throw new U(405,S)}let u;s?u=t:u=this._injector.get(wc).resolveComponentFactory(t),this.componentTypes.push(u.componentType);let l=ZC(u)?void 0:this._injector.get(so),h=r||u.selector,p=u.create(i,[],h,l),m=p.location.nativeElement,y=p.injector.get(Ry,null);return y?.registerApplication(m),p.onDestroy(()=>{this.detachView(p.hostView),gc(this.components,p),y?.unregisterApplication(m)}),this._loadComponent(p),Te(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Te(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Yd.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new U(101,!1);let t=X(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,X(t),this.afterTick.next(),Te(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(io,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<uL;)Te(14),this.synchronizeOnce(),Te(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!lc(i))continue;let o=r&&!this.zonelessEnabled?0:1;DC(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>lc(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;gc(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(Tc,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>gc(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new U(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function gc(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Jd(n,e,t,r){let i=oe(),o=no();if(Ln(i,o,e)){let s=Vt(),a=id();AO(a,i,n,e,t,r)}return Jd}var c5=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var Km=class{destroy(e){}updateValue(e,t){}swap(e,t){let r=Math.min(e,t),i=Math.max(e,t),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,t){this.attach(t,this.detach(e,!0))}};function Sm(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function lL(n,e,t){let r,i,o=0,s=n.length-1,a=void 0;if(Array.isArray(e)){let u=e.length-1;for(;o<=s&&o<=u;){let l=n.at(o),h=e[o],p=Sm(o,l,o,h,t);if(p!==0){p<0&&n.updateValue(o,h),o++;continue}let m=n.at(s),y=e[u],S=Sm(s,m,u,y,t);if(S!==0){S<0&&n.updateValue(s,y),s--,u--;continue}let P=t(o,l),M=t(s,m),L=t(o,h);if(Object.is(L,M)){let z=t(u,y);Object.is(z,P)?(n.swap(o,s),n.updateValue(s,y),u--,s--):n.move(s,o),n.updateValue(o,h),o++;continue}if(r??=new Md,i??=Ib(n,o,s,t),Qm(n,r,o,L))n.updateValue(o,h),o++,s++;else if(i.has(L))r.set(P,n.detach(o)),s--;else{let z=n.create(o,e[o]);n.attach(o,z),o++,s++}}for(;o<=u;)Eb(n,r,t,o,e[o]),o++}else if(e!=null){let u=e[Symbol.iterator](),l=u.next();for(;!l.done&&o<=s;){let h=n.at(o),p=l.value,m=Sm(o,h,o,p,t);if(m!==0)m<0&&n.updateValue(o,p),o++,l=u.next();else{r??=new Md,i??=Ib(n,o,s,t);let y=t(o,p);if(Qm(n,r,o,y))n.updateValue(o,p),o++,s++,l=u.next();else if(!i.has(y))n.attach(o,n.create(o,p)),o++,s++,l=u.next();else{let S=t(o,h);r.set(S,n.detach(o)),s--}}}for(;!l.done;)Eb(n,r,t,n.length,l.value),l=u.next()}for(;o<=s;)n.destroy(n.detach(s--));r?.forEach(u=>{n.destroy(u)})}function Qm(n,e,t,r){return e!==void 0&&e.has(r)?(n.attach(t,e.get(r)),e.delete(r),!0):!1}function Eb(n,e,t,r,i){if(Qm(n,e,r,t(r,i)))n.updateValue(r,i);else{let o=n.create(r,i);n.attach(r,o)}}function Ib(n,e,t,r){let i=new Set;for(let o=e;o<=t;o++)i.add(r(o,n.at(o)));return i}var Md=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}};function mr(n,e,t,r,i,o,s,a){pn("NgControlFlow");let u=oe(),l=Vt(),h=kn(l.consts,o);return Sd(u,l,n,e,t,r,i,h,256,s,a),Ss}function Ss(n,e,t,r,i,o,s,a){pn("NgControlFlow");let u=oe(),l=Vt(),h=kn(l.consts,o);return Sd(u,l,n,e,t,r,i,h,512,s,a),Ss}function yr(n,e){pn("NgControlFlow");let t=oe(),r=no(),i=t[r]!==gr?t[r]:-1,o=i!==-1?Pd(t,et+i):void 0,s=0;if(Ln(t,r,n)){let a=X(null);try{if(o!==void 0&&NC(o,s),n!==-1){let u=et+n,l=Pd(t,u),h=Xm(t[W],u),p=PC(l,h,t),m=qd(t,h,e,{dehydratedView:p});Gd(l,m,s,yc(h,p))}}finally{X(a)}}else if(o!==void 0){let a=RC(o,s);a!==void 0&&(a[$e]=e)}}var Ym=class{lContainer;$implicit;$index;constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-Ge}};var Zm=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}};function Py(n,e,t,r,i,o,s,a,u,l,h,p,m){pn("NgControlFlow");let y=oe(),S=Vt(),P=u!==void 0,M=oe(),L=a?s.bind(M[Bt][$e]):s,z=new Zm(P,L);M[et+n]=z,Sd(y,S,n+1,e,t,r,i,kn(S.consts,o),256),P&&Sd(y,S,n+2,u,l,h,p,kn(S.consts,m),512)}var Jm=class extends Km{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r}get length(){return this.lContainer.length-Ge}at(e){return this.getLView(e)[$e].$implicit}attach(e,t){let r=t[ds];this.needsIndexUpdate||=e!==this.length,Gd(this.lContainer,t,e,yc(this.templateTNode,r))}detach(e,t){return this.needsIndexUpdate||=e!==this.length-1,t&&dL(this.lContainer,e),hL(this.lContainer,e)}create(e,t){let r=Lm(this.lContainer,this.templateTNode.tView.ssrId),i=qd(this.hostLView,this.templateTNode,new Ym(this.lContainer,t,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){Hd(e[W],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[$e].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[$e].$index=e}getLView(e){return fL(this.lContainer,e)}};function ky(n){let e=X(null),t=dc();try{let r=oe(),i=r[W],o=r[t],s=t+1,a=Pd(r,s);if(o.liveCollection===void 0){let l=Xm(i,s);o.liveCollection=new Jm(a,r,l)}else o.liveCollection.reset();let u=o.liveCollection;if(lL(u,n,o.trackByFn),u.updateIndexes(),o.hasEmptyBlock){let l=no(),h=u.length===0;if(Ln(r,l,h)){let p=t+2,m=Pd(r,p);if(h){let y=Xm(i,p),S=PC(m,y,r),P=qd(r,y,void 0,{dehydratedView:S});Gd(m,P,0,yc(y,S))}else i.firstUpdatePass&&XO(m),NC(m,0)}}}finally{X(e)}}function Pd(n,e){return n[e]}function dL(n,e){if(n.length<=Ge)return;let t=Ge+e,r=n[t];r&&r[ft]&&(r[ft].skipLeaveAnimations=!0)}function hL(n,e){return _c(n,e)}function fL(n,e){return RC(n,e)}function Xm(n,e){return uc(n,e)}function vr(n,e,t){let r=oe(),i=no();if(Ln(r,i,e)){let o=Vt(),s=id();wO(s,r,n,e,r[He],t)}return vr}function wb(n,e,t,r,i){my(e,n,t,i?"class":"style",r)}function ve(n,e,t,r){let i=oe(),o=i[W],s=n+et,a=o.firstCreatePass?LC(s,i,2,e,SO,OD(),t,r):o.data[s];if(yC(a,i,n,e,JC),Yl(a)){let u=i[W];gC(u,i,a),Jb(u,a,i)}return r!=null&&gy(i,a),ve}function _e(){let n=Vt(),e=It(),t=vC(e);return n.firstCreatePass&&FC(n,t),cm(t)&&um(),am(),t.classesWithoutHost!=null&&dx(t)&&wb(n,t,oe(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&hx(t)&&wb(n,t,oe(),t.stylesWithoutHost,!1),_e}function tt(n,e,t,r){return ve(n,e,t,r),_e(),tt}function Se(n,e,t,r){let i=oe(),o=i[W],s=n+et,a=o.firstCreatePass?p1(s,o,2,e,t,r):o.data[s];return yC(a,i,n,e,JC),r!=null&&gy(i,a),Se}function Ne(){let n=It(),e=vC(n);return cm(e)&&um(),am(),Ne}function gn(n,e,t,r){return Se(n,e,t,r),Ne(),gn}var JC=(n,e,t,r,i)=>(sd(!0),oC(e[He],r,WD()));function As(){return oe()}function Xd(n,e,t){let r=oe(),i=no();if(Ln(r,i,e)){let o=Vt(),s=id();mC(s,r,n,e,r[He],t)}return Xd}var Dc="en-US";var pL=Dc;function XC(n){typeof n=="string"&&(pL=n.toLowerCase().replace(/_/g,"-"))}function _r(n,e,t){let r=oe(),i=Vt(),o=It();return gL(i,r,r[He],o,n,e,t),_r}function gL(n,e,t,r,i,o,s){let a=!0,u=null;if((r.type&3||s)&&(u??=bm(r,e,o),v1(r,n,e,s,t,i,o,u)&&(a=!1)),a){let l=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let m=h[p],y=h[p+1];u??=bm(r,e,o),hb(r,e,m,y,i,u)}if(l&&l.length)for(let p of l)u??=bm(r,e,o),hb(r,e,p,i,i,u)}}function oi(n=1){return GD(n)}function xy(n,e,t,r){$1(n,e,t,r)}function Oy(n){let e=oe(),t=Vt(),r=pm();td(r+1);let i=wy(t,r);if(n.dirty&&AD(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=G1(e,r);n.reset(o,Cx),n.notifyOnChanges()}return!0}return!1}function Ly(){return U1(oe(),pm())}function ce(n,e=""){let t=oe(),r=Vt(),i=n+et,o=r.firstCreatePass?Wd(r,i,1,e,null):r.data[i],s=mL(r,t,o,e,n);t[i]=s,od()&&fy(r,t,s,o),ys(o,!1)}var mL=(n,e,t,r,i)=>(sd(!0),Zx(e[He],r));function yL(n,e,t,r=""){return Ln(n,no(),t)?e+nc(t)+r:gr}function po(n){return bc("",n),po}function bc(n,e,t){let r=oe(),i=yL(r,n,e,t);return i!==gr&&vL(r,dc(),i),bc}function vL(n,e,t){let r=CD(e,n);Jx(n[He],r,t)}function eh(n,e,t){let r=Xl()+n,i=oe();return i[r]===gr?Iy(i,r,t?e.call(t):e()):g1(i,r)}function Fy(n,e,t,r,i,o){return EL(oe(),Xl(),n,e,t,r,i,o)}function eS(n,e){let t=n[e];return t===gr?void 0:t}function _L(n,e,t,r,i,o){let s=e+t;return Ln(n,s,i)?Iy(n,s+1,o?r.call(o,i):r(i)):eS(n,s+1)}function EL(n,e,t,r,i,o,s,a){let u=e+t;return y1(n,u,i,o,s)?Iy(n,u+3,a?r.call(a,i,o,s):r(i,o,s)):eS(n,u+3)}function Rs(n,e){let t=Vt(),r,i=n+et;t.firstCreatePass?(r=IL(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=Wr(r.type,!0)),s,a=Nt(Re);try{let u=yd(!1),l=o();return yd(u),tm(t,oe(),i,l),l}finally{Nt(a)}}function IL(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Ns(n,e,t){let r=n+et,i=oe(),o=SD(i,r);return wL(i,r)?_L(i,Xl(),e,o.transform,t,o):o.transform(t)}function wL(n,e){return n[W].data[e].pure}var kd=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Vy=(()=>{class n{compileModuleSync(t){return new Cd(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=Wg(t),o=rC(i.declarations).reduce((s,a)=>{let u=dr(a);return u&&s.push(new oo(u)),s},[]);return new kd(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var TL=(()=>{class n{zone=R(fe);changeDetectionScheduler=R(cr);applicationRef=R(Fn);applicationErrorHandler=R(wt);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),tS=new B("",{factory:()=>!1});function jy({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new fe(me(F({},By()),{scheduleInRootZone:t})),[{provide:fe,useFactory:n},{provide:lr,multi:!0,useFactory:()=>{let r=R(TL,{optional:!0});return()=>r.initialize()}},{provide:lr,multi:!0,useFactory:()=>{let r=R(DL);return()=>{r.initialize()}}},e===!0?{provide:_m,useValue:!0}:[],{provide:Em,useValue:t??qC},{provide:wt,useFactory:()=>{let r=R(fe),i=R(Be),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(cn),o.handleError(s))})}}}]}function Uy(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=jy({ngZoneFactory:()=>{let i=By(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&pn("NgZone_CoalesceEvent"),new fe(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return Et([{provide:tS,useValue:!0},{provide:hc,useValue:!1},r])}function By(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var DL=(()=>{class n{subscription=new Le;initialized=!1;zone=R(fe);pendingTasks=R(xn);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{fe.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{fe.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var nS=(()=>{class n{applicationErrorHandler=R(wt);appRef=R(Fn);taskService=R(xn);ngZone=R(fe);zonelessEnabled=R(hc);tracing=R(ho,{optional:!0});disableScheduling=R(_m,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Le;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Ad):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(R(Em,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Rd||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?yb:GC;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Ad+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,yb(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function bL(){return typeof $localize<"u"&&$localize.locale||Dc}var th=new B("",{providedIn:"root",factory:()=>R(th,{optional:!0,skipSelf:!0})||bL()});function tn(n){return oD(n)}var rS=class{[xt];constructor(e){this[xt]=e}destroy(){this[xt].destroy()}};var sS=Symbol("InputSignalNode#UNSET"),jL=me(F({},gl),{transformFn:void 0,applyValueToInputSignal(n,e){Yo(n,e)}});function aS(n,e){let t=Object.create(jL);t.value=n,t.transformFn=e?.transform;function r(){if(za(t),t.value===sS){let i=null;throw new U(-950,i)}return t.value}return r[xt]=t,r}var rh=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>Ic(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},UL=new B("");UL.__NG_ELEMENT_ID__=n=>{let e=It();if(e===null)throw new U(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new U(204,!1)};function iS(n,e){return aS(n,e)}function BL(n){return aS(sS,n)}var cS=(iS.required=BL,iS);var $y=new B(""),$L=new B("");function Cc(n){return!n.moduleRef}function HL(n){let e=Cc(n)?n.r3Injector:n.moduleRef.injector,t=e.get(fe);return t.run(()=>{Cc(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(wt),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),Cc(n)){let o=()=>e.destroy(),s=n.platformInjector.get($y);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get($y);s.add(o),n.moduleRef.onDestroy(()=>{gc(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return qL(r,t,()=>{let o=e.get(xn),s=o.add(),a=e.get(My);return a.runInitializers(),a.donePromise.then(()=>{let u=e.get(th,Dc);if(XC(u||Dc),!e.get($L,!0))return Cc(n)?e.get(Fn):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Cc(n)){let h=e.get(Fn);return n.rootComponent!==void 0&&h.bootstrap(n.rootComponent),h}else return zL?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(s))})})}var zL;function qL(n,e,t){try{let r=t();return fo(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var nh=null;function GL(n=[],e){return xe.create({name:e,providers:[{provide:ic,useValue:"platform"},{provide:$y,useValue:new Set([()=>nh=null])},...n]})}function WL(n=[]){if(nh)return nh;let e=GL(n);return nh=e,YC(),KL(e),e}function KL(n){let e=n.get(Fd,null);qe(n,()=>{e?.forEach(t=>t())})}function Sc(){return!1}var go=(()=>{class n{static __NG_ELEMENT_ID__=QL}return n})();function QL(n){return YL(It(),oe(),(n&16)===16)}function YL(n,e,t){if(Jr(n)&&!t){let r=en(n.index,e);return new ei(r,r)}else if(n.type&175){let r=e[Bt];return new ei(r,e)}return null}function uS(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;Te(8);try{let o=i?.injector??WL(r),s=[jy({}),{provide:cr,useExisting:nS},QD,...t||[]],a=new Ec({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return HL({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{Te(9)}}function Ac(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function lS(n){let e=dr(n);if(!e)return null;let t=new oo(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var fS=null;function Er(){return fS}function Hy(n){fS??=n}var Rc=class{},Nc=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:()=>R(pS),providedIn:"platform"})}return n})(),zy=new B(""),pS=(()=>{class n extends Nc{_location;_history;_doc=R(ze);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Er().getBaseHref(this._doc)}onPopState(t){let r=Er().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Er().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function ih(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function dS(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function mn(n){return n&&n[0]!=="?"?`?${n}`:n}var yn=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:()=>R(sh),providedIn:"root"})}return n})(),oh=new B(""),sh=(()=>{class n extends yn{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??R(ze).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return ih(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+mn(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+mn(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+mn(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)($(Nc),$(oh,8))};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),si=(()=>{class n{_subject=new ke;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=XL(dS(hS(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+mn(r))}normalize(t){return n.stripTrailingSlash(JL(this._basePath,hS(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+mn(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+mn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=mn;static joinWithSlash=ih;static stripTrailingSlash=dS;static \u0275fac=function(r){return new(r||n)($(yn))};static \u0275prov=j({token:n,factory:()=>ZL(),providedIn:"root"})}return n})();function ZL(){return new si($(yn))}function JL(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function hS(n){return n.replace(/\/index.html$/,"")}function XL(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Ky=(()=>{class n extends yn{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=ih(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+mn(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+mn(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)($(Nc),$(oh,8))};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})();var qy=/\s+/,gS=[],Qy=(()=>{class n{_ngEl;_renderer;initialClasses=gS;rawClass;stateMap=new Map;constructor(t,r){this._ngEl=t,this._renderer=r}set klass(t){this.initialClasses=t!=null?t.trim().split(qy):gS}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(qy):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(qy).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(Re(fn),Re(uo))};static \u0275dir=ii({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();function eF(n,e){return new U(2100,!1)}var Gy=class{createSubscription(e,t,r){return tn(()=>e.subscribe({next:t,error:r}))}dispose(e){tn(()=>e.unsubscribe())}},Wy=class{createSubscription(e,t,r){return e.then(i=>t?.(i),i=>r?.(i)),{unsubscribe:()=>{t=null,r=null}}}dispose(e){e.unsubscribe()}},tF=new Wy,nF=new Gy,Mc=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=R(wt);constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r),r=>this.applicationErrorHandler(r))}_selectStrategy(t){if(fo(t))return tF;if(Zd(t))return nF;throw eF(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||n)(Re(go,16))};static \u0275pipe=Ty({name:"async",type:n,pure:!1})}return n})();var ai=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=ri({type:n});static \u0275inj=ur({})}return n})();function Yy(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Pc=class{};var mS="browser";var yS=(()=>{class n{static \u0275prov=j({token:n,providedIn:"root",factory:()=>new Zy(R(ze),window)})}return n})(),Zy=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e,t){this.window.scrollTo(me(F({},t),{left:e[0],top:e[1]}))}scrollToAnchor(e,t){let r=iF(this.document,e);r&&(this.scrollToElement(r,t),r.focus())}setHistoryScrollRestoration(e){try{this.window.history.scrollRestoration=e}catch{console.warn(Qr(2400,!1))}}scrollToElement(e,t){let r=e.getBoundingClientRect(),i=r.left+this.window.pageXOffset,o=r.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(me(F({},t),{left:i-s[0],top:o-s[1]}))}};function iF(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var uh=new B(""),nv=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new U(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)($(uh),$(fe))};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})(),kc=class{_doc;constructor(e){this._doc=e}manager},Jy="ng-app-id";function vS(n){for(let e of n)e.remove()}function _S(n,e){let t=e.createElement("style");return t.textContent=n,t}function oF(n,e,t,r){let i=n.head?.querySelectorAll(`style[${Jy}="${e}"],link[${Jy}="${e}"]`);if(i)for(let o of i)o.removeAttribute(Jy),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function ev(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var rv=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,oF(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,_S);r?.forEach(i=>this.addUsage(i,this.external,ev))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(vS(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])vS(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,_S(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,ev(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)($(ze),$(Ld),$(Vd,8),$(ti))};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})(),Xy={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},iv=/%COMP%/g;var IS="%COMP%",sF=`_nghost-${IS}`,aF=`_ngcontent-${IS}`,cF=!0,uF=new B("",{providedIn:"root",factory:()=>cF});function lF(n){return aF.replace(iv,n)}function dF(n){return sF.replace(iv,n)}function wS(n,e){return e.map(t=>t.replace(iv,n))}var ov=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,u,l=null,h=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.tracingService=h,this.platformIsServer=!1,this.defaultRenderer=new xc(t,s,u,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof ch?i.applyToHost(t):i instanceof Oc&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,m=this.tracingService;switch(r.encapsulation){case pr.Emulated:o=new ch(u,l,r,this.appId,h,s,a,p,m);break;case pr.ShadowDom:return new tv(u,l,t,r,s,a,this.nonce,p,m);default:o=new Oc(u,l,r,h,s,a,p,m);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)($(nv),$(rv),$(Ld),$(uF),$(ze),$(ti),$(fe),$(Vd),$(ho,8))};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})(),xc=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(Xy[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(ES(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(ES(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new U(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=Xy[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Xy[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(ni.DashCase|ni.Important)?e.style.setProperty(t,r,i&ni.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&ni.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Er().getGlobalEventTarget(this.doc,e),!e))throw new U(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function ES(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var tv=class extends xc{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,u,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=wS(i.id,h);for(let m of h){let y=document.createElement("style");a&&y.setAttribute("nonce",a),y.textContent=m,this.shadowRoot.appendChild(y)}let p=i.getExternalStyles?.();if(p)for(let m of p){let y=ev(m,o);a&&y.setAttribute("nonce",a),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Oc=class extends xc{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,a,u),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=l?wS(l,h):h,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&$d.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},ch=class extends Oc{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,u,l){let h=i+"-"+r.id;super(e,t,r,o,s,a,u,l,h),this.contentAttr=lF(h),this.hostAttr=dF(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var lh=class n extends Rc{supportsDOMEvents=!0;static makeCurrent(){Hy(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=hF();return t==null?null:fF(t)}resetBaseElement(){Lc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Yy(document.cookie,e)}},Lc=null;function hF(){return Lc=Lc||document.head.querySelector("base"),Lc?Lc.getAttribute("href"):null}function fF(n){return new URL(n,document.baseURI).pathname}var pF=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})(),DS=(()=>{class n extends kc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)($(ze))};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})(),TS=["alt","control","meta","shift"],gF={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},mF={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},bS=(()=>{class n extends kc{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Er().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),TS.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=gF[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),TS.forEach(s=>{if(s!==i){let a=mF[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)($(ze))};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})();function sv(n,e,t){let r=F({rootComponent:n,platformRef:t?.platformRef},yF(e));return uS(r)}function yF(n){return{appProviders:[...wF,...n?.providers??[]],platformProviders:IF}}function vF(){lh.makeCurrent()}function _F(){return new cn}function EF(){return ny(document),document}var IF=[{provide:ti,useValue:mS},{provide:Fd,useValue:vF,multi:!0},{provide:ze,useFactory:EF}];var wF=[{provide:ic,useValue:"root"},{provide:cn,useFactory:_F},{provide:uh,useClass:DS,multi:!0,deps:[ze]},{provide:uh,useClass:bS,multi:!0,deps:[ze]},ov,rv,nv,{provide:io,useExisting:ov},{provide:Pc,useClass:pF},[]];var CS=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)($(ze))};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var re="primary",Qc=Symbol("RouteTitle"),dv=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function vo(n){return new dv(n)}function xS(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function DF(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Vn(n[t],e[t]))return!1;return!0}function Vn(n,e){let t=n?hv(n):void 0,r=e?hv(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!OS(n[i],e[i]))return!1;return!0}function hv(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function OS(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function LS(n){return n.length>0?n[n.length-1]:null}function Ir(n){return _g(n)?n:fo(n)?we(Promise.resolve(n)):q(n)}var bF={exact:VS,subset:jS},FS={exact:CF,subset:SF,ignored:()=>!0};function SS(n,e,t){return bF[t.paths](n.root,e.root,t.matrixParams)&&FS[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function CF(n,e){return Vn(n,e)}function VS(n,e,t){if(!mo(n.segments,e.segments)||!fh(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!VS(n.children[r],e.children[r],t))return!1;return!0}function SF(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>OS(n[t],e[t]))}function jS(n,e,t){return US(n,e,e.segments,t)}function US(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!mo(i,t)||e.hasChildren()||!fh(i,t,r))}else if(n.segments.length===t.length){if(!mo(n.segments,t)||!fh(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!jS(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!mo(n.segments,i)||!fh(n.segments,i,r)||!n.children[re]?!1:US(n.children[re],e,o,r)}}function fh(n,e,t){return e.every((r,i)=>FS[t](n[i].parameters,r.parameters))}var Un=class{root;queryParams;fragment;_queryParamMap;constructor(e=new ge([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=vo(this.queryParams),this._queryParamMap}toString(){return NF.serialize(this)}},ge=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ph(this)}},ci=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=vo(this.parameters),this._parameterMap}toString(){return $S(this)}};function AF(n,e){return mo(n,e)&&n.every((t,r)=>Vn(t.parameters,e[r].parameters))}function mo(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function RF(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===re&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==re&&(t=t.concat(e(i,r)))}),t}var _o=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:()=>new ui,providedIn:"root"})}return n})(),ui=class{parse(e){let t=new pv(e);return new Un(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Fc(e.root,!0)}`,r=kF(e.queryParams),i=typeof e.fragment=="string"?`#${MF(e.fragment)}`:"";return`${t}${r}${i}`}},NF=new ui;function ph(n){return n.segments.map(e=>$S(e)).join("/")}function Fc(n,e){if(!n.hasChildren())return ph(n);if(e){let t=n.children[re]?Fc(n.children[re],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==re&&r.push(`${i}:${Fc(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=RF(n,(r,i)=>i===re?[Fc(n.children[re],!1)]:[`${i}:${Fc(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[re]!=null?`${ph(n)}/${t[0]}`:`${ph(n)}/(${t.join("//")})`}}function BS(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function dh(n){return BS(n).replace(/%3B/gi,";")}function MF(n){return encodeURI(n)}function fv(n){return BS(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function gh(n){return decodeURIComponent(n)}function AS(n){return gh(n.replace(/\+/g,"%20"))}function $S(n){return`${fv(n.path)}${PF(n.parameters)}`}function PF(n){return Object.entries(n).map(([e,t])=>`;${fv(e)}=${fv(t)}`).join("")}function kF(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${dh(t)}=${dh(i)}`).join("&"):`${dh(t)}=${dh(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var xF=/^[^\/()?;#]+/;function av(n){let e=n.match(xF);return e?e[0]:""}var OF=/^[^\/()?;=#]+/;function LF(n){let e=n.match(OF);return e?e[0]:""}var FF=/^[^=?&#]+/;function VF(n){let e=n.match(FF);return e?e[0]:""}var jF=/^[^&#]+/;function UF(n){let e=n.match(jF);return e?e[0]:""}var pv=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ge([],{}):new ge([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[re]=new ge(e,t)),r}parseSegment(){let e=av(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new U(4009,!1);return this.capture(e),new ci(gh(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=LF(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=av(this.remaining);i&&(r=i,this.capture(r))}e[gh(t)]=gh(r)}parseQueryParam(e){let t=VF(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=UF(this.remaining);s&&(r=s,this.capture(r))}let i=AS(t),o=AS(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=av(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new U(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=re);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[re]:new ge([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new U(4011,!1)}};function HS(n){return n.segments.length>0?new ge([],{[re]:n}):n}function zS(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=zS(i);if(r===re&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new ge(n.segments,e);return BF(t)}function BF(n){if(n.numberOfChildren===1&&n.children[re]){let e=n.children[re];return new ge(n.segments.concat(e.segments),e.children)}return n}function li(n){return n instanceof Un}function qS(n,e,t=null,r=null){let i=GS(n);return WS(i,e,t,r)}function GS(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new ge(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=HS(r);return e??i}function WS(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return cv(i,i,i,t,r);let o=$F(e);if(o.toRoot())return cv(i,i,new ge([],{}),t,r);let s=HF(o,i,n),a=s.processChildren?jc(s.segmentGroup,s.index,o.commands):QS(s.segmentGroup,s.index,o.commands);return cv(i,s.segmentGroup,a,t,r)}function mh(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Bc(n){return typeof n=="object"&&n!=null&&n.outlets}function cv(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=KS(n,e,t);let a=HS(zS(s));return new Un(a,o,i)}function KS(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=KS(o,e,t)}),new ge(n.segments,r)}var yh=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&mh(r[0]))throw new U(4003,!1);let i=r.find(Bc);if(i&&i!==LS(r))throw new U(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function $F(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new yh(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new yh(t,e,r)}var xs=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function HF(n,e,t){if(n.isAbsolute)return new xs(e,!0,0);if(!t)return new xs(e,!1,NaN);if(t.parent===null)return new xs(t,!0,0);let r=mh(n.commands[0])?0:1,i=t.segments.length-1+r;return zF(t,i,n.numberOfDoubleDots)}function zF(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new U(4005,!1);i=r.segments.length}return new xs(r,!1,i-o)}function qF(n){return Bc(n[0])?n[0].outlets:{[re]:n}}function QS(n,e,t){if(n??=new ge([],{}),n.segments.length===0&&n.hasChildren())return jc(n,e,t);let r=GF(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new ge(n.segments.slice(0,r.pathIndex),{});return o.children[re]=new ge(n.segments.slice(r.pathIndex),n.children),jc(o,0,i)}else return r.match&&i.length===0?new ge(n.segments,{}):r.match&&!n.hasChildren()?gv(n,e,t):r.match?jc(n,0,i):gv(n,e,t)}function jc(n,e,t){if(t.length===0)return new ge(n.segments,{});{let r=qF(t),i={};if(Object.keys(r).some(o=>o!==re)&&n.children[re]&&n.numberOfChildren===1&&n.children[re].segments.length===0){let o=jc(n.children[re],e,t);return new ge(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=QS(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new ge(n.segments,i)}}function GF(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Bc(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!NS(u,l,s))return o;r+=2}else{if(!NS(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function gv(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Bc(o)){let u=WF(o.outlets);return new ge(r,u)}if(i===0&&mh(t[0])){let u=n.segments[e];r.push(new ci(u.path,RS(t[0]))),i++;continue}let s=Bc(o)?o.outlets[re]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&mh(a)?(r.push(new ci(s,RS(a))),i+=2):(r.push(new ci(s,{})),i++)}return new ge(r,{})}function WF(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=gv(new ge([],{}),0,r))}),e}function RS(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function NS(n,e,t){return n==t.path&&Vn(e,t.parameters)}var Os="imperative",nt=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(nt||{}),qt=class{id;url;constructor(e,t){this.id=e,this.url=t}},di=class extends qt{type=nt.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Gt=class extends qt{urlAfterRedirects;type=nt.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Pt=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(Pt||{}),Fs=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(Fs||{}),jn=class extends qt{reason;code;type=nt.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Bn=class extends qt{reason;code;type=nt.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Vs=class extends qt{error;target;type=nt.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},$c=class extends qt{urlAfterRedirects;state;type=nt.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},vh=class extends qt{urlAfterRedirects;state;type=nt.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},_h=class extends qt{urlAfterRedirects;state;shouldActivate;type=nt.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Eh=class extends qt{urlAfterRedirects;state;type=nt.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ih=class extends qt{urlAfterRedirects;state;type=nt.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},wh=class{route;type=nt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Th=class{route;type=nt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Dh=class{snapshot;type=nt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},bh=class{snapshot;type=nt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ch=class{snapshot;type=nt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Sh=class{snapshot;type=nt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},js=class{routerEvent;position;anchor;type=nt.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Hc=class{},Us=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function KF(n){return!(n instanceof Hc)&&!(n instanceof Us)}function QF(n,e){return n.providers&&!n._injector&&(n._injector=bs(n.providers,e,`Route: ${n.path}`)),n._injector??e}function vn(n){return n.outlet||re}function YF(n,e){let t=n.filter(r=>vn(r)===e);return t.push(...n.filter(r=>vn(r)!==e)),t}function Hs(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Ah=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Hs(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Eo(this.rootInjector)}},Eo=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Ah(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)($(Be))};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Rh=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=mv(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=mv(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=yv(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return yv(e,this._root).map(t=>t.value)}};function mv(n,e){if(n===e.value)return e;for(let t of e.children){let r=mv(n,t);if(r)return r}return null}function yv(n,e){if(n===e.value)return[e];for(let t of e.children){let r=yv(n,t);if(r.length)return r.unshift(e),r}return[]}var zt=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function ks(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var zc=class extends Rh{snapshot;constructor(e,t){super(e),this.snapshot=t,bv(this,e)}toString(){return this.snapshot.toString()}};function YS(n){let e=ZF(n),t=new ht([new ci("",{})]),r=new ht({}),i=new ht({}),o=new ht({}),s=new ht(""),a=new $n(t,r,o,s,i,re,n,e.root);return a.snapshot=e.root,new zc(new zt(a,[]),e)}function ZF(n){let e={},t={},r={},o=new yo([],e,r,"",t,re,n,null,{});return new qc("",new zt(o,[]))}var $n=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(Q(l=>l[Qc]))??q(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Q(e=>vo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Q(e=>vo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Nh(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:F(F({},e.params),n.params),data:F(F({},e.data),n.data),resolve:F(F(F(F({},n.data),e.data),i?.data),n._resolvedData)}:r={params:F({},n.params),data:F({},n.data),resolve:F(F({},n.data),n._resolvedData??{})},i&&JS(i)&&(r.resolve[Qc]=i.title),r}var yo=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Qc]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=vo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=vo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},qc=class extends Rh{url;constructor(e,t){super(t),this.url=e,bv(this,t)}toString(){return ZS(this._root)}};function bv(n,e){e.value._routerState=n,e.children.forEach(t=>bv(n,t))}function ZS(n){let e=n.children.length>0?` { ${n.children.map(ZS).join(", ")} } `:"";return`${n.value}${e}`}function uv(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Vn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Vn(e.params,t.params)||n.paramsSubject.next(t.params),DF(e.url,t.url)||n.urlSubject.next(t.url),Vn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function vv(n,e){let t=Vn(n.params,e.params)&&AF(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||vv(n.parent,e.parent))}function JS(n){return typeof n.title=="string"||n.title===null}var XS=new B(""),Yc=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=re;activateEvents=new Tt;deactivateEvents=new Tt;attachEvents=new Tt;detachEvents=new Tt;routerOutletData=cS(void 0);parentContexts=R(Eo);location=R(lo);changeDetector=R(go);inputBinder=R(Zc,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new U(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new U(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new U(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new U(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new _v(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=ii({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[ao]})}return n})(),_v=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===$n?this.route:e===Eo?this.childContexts:e===XS?this.outletData:this.parent.get(e,t)}},Zc=new B(""),Cv=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Qa([r.queryParams,r.params,r.data]).pipe(Ae(([o,s,a],u)=>(a=F(F(F({},o),s),a),u===0?q(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=lS(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})(),Sv=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Mt({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&tt(0,"router-outlet")},dependencies:[Yc],encapsulation:2})}return n})();function Av(n){let e=n.children&&n.children.map(Av),t=e?me(F({},n),{children:e}):F({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==re&&(t.component=Sv),t}function JF(n,e,t){let r=Gc(n,e._root,t?t._root:void 0);return new zc(r,e)}function Gc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=XF(n,e,t);return new zt(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Gc(n,a)),s}}let r=eV(e.value),i=e.children.map(o=>Gc(n,o));return new zt(r,i)}}function XF(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Gc(n,r,i);return Gc(n,r)})}function eV(n){return new $n(new ht(n.url),new ht(n.params),new ht(n.queryParams),new ht(n.fragment),new ht(n.data),n.outlet,n.component,n)}var Bs=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},eA="ngNavigationCancelingError";function Mh(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=li(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=tA(!1,Pt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function tA(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[eA]=!0,t.cancellationCode=e,t}function tV(n){return nA(n)&&li(n.url)}function nA(n){return!!n&&n[eA]}var nV=(n,e,t,r)=>Q(i=>(new Ev(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),Ev=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),uv(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=ks(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=ks(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=ks(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=ks(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Sh(o.value.snapshot))}),e.children.length&&this.forwardEvent(new bh(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(uv(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),uv(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Ph=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ls=class{component;route;constructor(e,t){this.component=e,this.route=t}};function rV(n,e,t){let r=n._root,i=e?e._root:null;return Vc(r,i,t,[r.value])}function iV(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function zs(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!Lg(n)?n:e.get(n):r}function Vc(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=ks(e);return n.children.forEach(s=>{oV(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Uc(a,t.getContext(s),i)),i}function oV(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=sV(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Ph(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Vc(n,e,a?a.children:null,r,i):Vc(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ls(a.outlet.component,s))}else s&&Uc(e,a,i),i.canActivateChecks.push(new Ph(r)),o.component?Vc(n,null,a?a.children:null,r,i):Vc(n,null,t,r,i);return i}function sV(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!mo(n.url,e.url);case"pathParamsOrQueryParamsChange":return!mo(n.url,e.url)||!Vn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!vv(n,e)||!Vn(n.queryParams,e.queryParams);case"paramsChange":default:return!vv(n,e)}}function Uc(n,e,t){let r=ks(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Uc(s,e.children.getContext(o),t):Uc(s,null,t):Uc(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Ls(e.outlet.component,i)):t.canDeactivateChecks.push(new Ls(null,i)):t.canDeactivateChecks.push(new Ls(null,i))}function Jc(n){return typeof n=="function"}function aV(n){return typeof n=="boolean"}function cV(n){return n&&Jc(n.canLoad)}function uV(n){return n&&Jc(n.canActivate)}function lV(n){return n&&Jc(n.canActivateChild)}function dV(n){return n&&Jc(n.canDeactivate)}function hV(n){return n&&Jc(n.canMatch)}function rA(n){return n instanceof rr||n?.name==="EmptyError"}var hh=Symbol("INITIAL_VALUE");function $s(){return Ae(n=>Qa(n.map(e=>e.pipe(Rt(1),Vl(hh)))).pipe(Q(e=>{for(let t of e)if(t!==!0){if(t===hh)return hh;if(t===!1||fV(t))return t}return!0}),it(e=>e!==hh),Rt(1)))}function fV(n){return li(n)||n instanceof Bs}function pV(n,e){return Ue(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?q(me(F({},t),{guardsResult:!0})):gV(s,r,i,n).pipe(Ue(a=>a&&aV(a)?mV(r,o,n,e):q(a)),Q(a=>me(F({},t),{guardsResult:a})))})}function gV(n,e,t,r){return we(n).pipe(Ue(i=>IV(i.component,i.route,t,e,r)),sr(i=>i!==!0,!0))}function mV(n,e,t,r){return we(e).pipe(zr(i=>cs(vV(i.route.parent,r),yV(i.route,r),EV(n,i.path,t),_V(n,i.route,t))),sr(i=>i!==!0,!0))}function yV(n,e){return n!==null&&e&&e(new Ch(n)),q(!0)}function vV(n,e){return n!==null&&e&&e(new Dh(n)),q(!0)}function _V(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return q(!0);let i=r.map(o=>Bi(()=>{let s=Hs(e)??t,a=zs(o,s),u=uV(a)?a.canActivate(e,n):qe(s,()=>a(e,n));return Ir(u).pipe(sr())}));return q(i).pipe($s())}function EV(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>iV(s)).filter(s=>s!==null).map(s=>Bi(()=>{let a=s.guards.map(u=>{let l=Hs(s.node)??t,h=zs(u,l),p=lV(h)?h.canActivateChild(r,n):qe(l,()=>h(r,n));return Ir(p).pipe(sr())});return q(a).pipe($s())}));return q(o).pipe($s())}function IV(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return q(!0);let s=o.map(a=>{let u=Hs(e)??i,l=zs(a,u),h=dV(l)?l.canDeactivate(n,e,t,r):qe(u,()=>l(n,e,t,r));return Ir(h).pipe(sr())});return q(s).pipe($s())}function wV(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return q(!0);let o=i.map(s=>{let a=zs(s,n),u=cV(a)?a.canLoad(e,t):qe(n,()=>a(e,t));return Ir(u)});return q(o).pipe($s(),iA(r))}function iA(n){return El(ot(e=>{if(typeof e!="boolean")throw Mh(n,e)}),Q(e=>e===!0))}function TV(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return q(!0);let o=i.map(s=>{let a=zs(s,n),u=hV(a)?a.canMatch(e,t):qe(n,()=>a(e,t));return Ir(u)});return q(o).pipe($s(),iA(r))}var Wc=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Kc=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Ps(n){return as(new Wc(n))}function DV(n){return as(new U(4e3,!1))}function bV(n){return as(tA(!1,Pt.GuardRejected))}var Iv=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return q(r);if(i.numberOfChildren>1||!i.children[re])return DV(`${e.redirectTo}`);i=i.children[re]}}applyRedirectCommands(e,t,r,i,o){return CV(t,i,o).pipe(Q(s=>{if(s instanceof Un)throw new Kc(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new Kc(a);return a}))}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Un(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new ge(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new U(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function CV(n,e,t){if(typeof n=="string")return q(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,params:l,data:h,title:p}=e;return Ir(qe(t,()=>r({params:l,data:h,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,title:p})))}var wv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function SV(n,e,t,r,i){let o=oA(n,e,t);return o.matched?(r=QF(e,r),TV(r,e,t,i).pipe(Q(s=>s===!0?o:F({},wv)))):q(o)}function oA(n,e,t){if(e.path==="**")return AV(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?F({},wv):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||xS)(t,n,e);if(!i)return F({},wv);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?F(F({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function AV(n){return{matched:!0,parameters:n.length>0?LS(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function MS(n,e,t,r){return t.length>0&&MV(n,t,r)?{segmentGroup:new ge(e,NV(r,new ge(t,n.children))),slicedSegments:[]}:t.length===0&&PV(n,t,r)?{segmentGroup:new ge(n.segments,RV(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new ge(n.segments,n.children),slicedSegments:t}}function RV(n,e,t,r){let i={};for(let o of t)if(xh(n,e,o)&&!r[vn(o)]){let s=new ge([],{});i[vn(o)]=s}return F(F({},r),i)}function NV(n,e){let t={};t[re]=e;for(let r of n)if(r.path===""&&vn(r)!==re){let i=new ge([],{});t[vn(r)]=i}return t}function MV(n,e,t){return t.some(r=>xh(n,e,r)&&vn(r)!==re)}function PV(n,e,t){return t.some(r=>xh(n,e,r))}function xh(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function kV(n,e,t){return e.length===0&&!n.children[t]}var Tv=class{};function xV(n,e,t,r,i,o,s="emptyOnly"){return new Dv(n,e,t,r,i,s,o).recognize()}var OV=31,Dv=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Iv(this.urlSerializer,this.urlTree)}noMatchError(e){return new U(4002,`'${e.segmentGroup}'`)}recognize(){let e=MS(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Q(({children:t,rootSnapshot:r})=>{let i=new zt(r,t),o=new qc("",i),s=qS(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new yo([],Object.freeze({}),Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),re,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,re,t).pipe(Q(r=>({children:r,rootSnapshot:t})),or(r=>{if(r instanceof Kc)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Wc?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(Q(s=>s instanceof zt?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return we(o).pipe(zr(s=>{let a=r.children[s],u=YF(t,s);return this.processSegmentGroup(e,u,a,s,i)}),Fl((s,a)=>(s.push(...a),s)),qr(null),Eg(),Ue(s=>{if(s===null)return Ps(r);let a=sA(s);return LV(a),q(a)}))}processSegment(e,t,r,i,o,s,a){return we(t).pipe(zr(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,a).pipe(or(l=>{if(l instanceof Wc)return q(null);throw l}))),sr(u=>!!u),or(u=>{if(rA(u))return kV(r,i,o)?q(new Tv):Ps(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,u){return vn(r)!==s&&(s===re||!xh(i,o,r))?Ps(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u):Ps(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=oA(t,i,o);if(!u)return Ps(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>OV&&(this.allowRedirects=!1));let y=new yo(o,l,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,PS(i),vn(i),i.component??i._loadedComponent??null,i,kS(i)),S=Nh(y,a,this.paramsInheritanceStrategy);return y.params=Object.freeze(S.params),y.data=Object.freeze(S.data),this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e).pipe(Ae(M=>this.applyRedirects.lineralizeSegments(i,M)),Ue(M=>this.processSegment(e,r,t,M.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=SV(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Ae(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Ae(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:y}=u,S=new yo(m,p,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,PS(r),vn(r),r.component??r._loadedComponent??null,r,kS(r)),P=Nh(S,s,this.paramsInheritanceStrategy);S.params=Object.freeze(P.params),S.data=Object.freeze(P.data);let{segmentGroup:M,slicedSegments:L}=MS(t,m,y,l);if(L.length===0&&M.hasChildren())return this.processChildren(h,l,M,S).pipe(Q(Z=>new zt(S,Z)));if(l.length===0&&L.length===0)return q(new zt(S,[]));let z=vn(r)===o;return this.processSegment(h,l,M,L,z?re:o,!0,S).pipe(Q(Z=>new zt(S,Z instanceof zt?[Z]:[])))}))):Ps(t)))}getChildConfig(e,t,r){return t.children?q({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?q({routes:t._loadedRoutes,injector:t._loadedInjector}):wV(e,t,r,this.urlSerializer).pipe(Ue(i=>i?this.configLoader.loadChildren(e,t).pipe(ot(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):bV(t))):q({routes:[],injector:e})}};function LV(n){n.sort((e,t)=>e.value.outlet===re?-1:t.value.outlet===re?1:e.value.outlet.localeCompare(t.value.outlet))}function FV(n){let e=n.value.routeConfig;return e&&e.path===""}function sA(n){let e=[],t=new Set;for(let r of n){if(!FV(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=sA(r.children);e.push(new zt(r.value,i))}return e.filter(r=>!t.has(r))}function PS(n){return n.data||{}}function kS(n){return n.resolve||{}}function VV(n,e,t,r,i,o){return Ue(s=>xV(n,e,t,r,s.extractedUrl,i,o).pipe(Q(({state:a,tree:u})=>me(F({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function jV(n,e){return Ue(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return q(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of aA(u))s.add(l);let a=0;return we(s).pipe(zr(u=>o.has(u)?UV(u,r,n,e):(u.data=Nh(u,u.parent,n).resolve,q(void 0))),ot(()=>a++),us(1),Ue(u=>a===s.size?q(t):Ot))})}function aA(n){let e=n.children.map(t=>aA(t)).flat();return[n,...e]}function UV(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!JS(i)&&(o[Qc]=i.title),Bi(()=>(n.data=Nh(n,n.parent,t).resolve,BV(o,n,e,r).pipe(Q(s=>(n._resolvedData=s,n.data=F(F({},n.data),s),null)))))}function BV(n,e,t,r){let i=hv(n);if(i.length===0)return q({});let o={};return we(i).pipe(Ue(s=>$V(n[s],e,t,r).pipe(sr(),ot(a=>{if(a instanceof Bs)throw Mh(new ui,a);o[s]=a}))),us(1),Q(()=>o),or(s=>rA(s)?Ot:as(s)))}function $V(n,e,t,r){let i=Hs(e)??r,o=zs(n,i),s=o.resolve?o.resolve(e,t):qe(i,()=>o(e,t));return Ir(s)}function lv(n){return Ae(e=>{let t=n(e);return t?we(t).pipe(Q(()=>e)):q(e)})}var Rv=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===re);return r}getResolvedTitleForRoute(t){return t.data[Qc]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:()=>R(cA),providedIn:"root"})}return n})(),cA=(()=>{class n extends Rv{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)($(CS))};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),hi=new B("",{providedIn:"root",factory:()=>({})}),Io=new B(""),Oh=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=R(Vy);loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return q(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Ir(qe(t,()=>r.loadComponent())).pipe(Q(lA),Ae(dA),ot(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),Ya(()=>{this.componentLoaders.delete(r)})),o=new rs(i,()=>new ke).pipe(ns());return this.componentLoaders.set(r,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return q({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=uA(r,this.compiler,t,this.onLoadEndListener).pipe(Ya(()=>{this.childrenLoaders.delete(r)})),s=new rs(o,()=>new ke).pipe(ns());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function uA(n,e,t,r){return Ir(qe(t,()=>n.loadChildren())).pipe(Q(lA),Ae(dA),Ue(i=>i instanceof Qd||Array.isArray(i)?q(i):we(e.compileModuleAsync(i))),Q(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(Io,[],{optional:!0,self:!0}).flat()),{routes:s.map(Av),injector:o}}))}function HV(n){return n&&typeof n=="object"&&"default"in n}function lA(n){return HV(n)?n.default:n}function dA(n){return q(n)}var Lh=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:()=>R(zV),providedIn:"root"})}return n})(),zV=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Nv=new B(""),Mv=new B("");function hA(n,e,t){let r=n.get(Mv),i=n.get(ze);if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),qV(n)));a.ready.catch(l=>{});let{onViewTransitionCreated:u}=r;return u&&qe(n,()=>u({transition:a,from:e,to:t})),s}function qV(n){return new Promise(e=>{Sy({read:()=>setTimeout(e)},{injector:n})})}var Pv=new B(""),Fh=(()=>{class n{currentNavigation=fr(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new ke;transitionAbortWithErrorSubject=new ke;configLoader=R(Oh);environmentInjector=R(Be);destroyRef=R(hr);urlSerializer=R(_o);rootContexts=R(Eo);location=R(si);inputBindingEnabled=R(Zc,{optional:!0})!==null;titleStrategy=R(Rv);options=R(hi,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=R(Lh);createViewTransition=R(Nv,{optional:!0});navigationErrorHandler=R(Pv,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>q(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new wh(i)),r=i=>this.events.next(new Th(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;tn(()=>{this.transitions?.next(me(F({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(t){return this.transitions=new ht(null),this.transitions.pipe(it(r=>r!==null),Ae(r=>{let i=!1;return q(r).pipe(Ae(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Pt.SupersededByNewNavigation),Ot;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?me(F({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let s=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!s&&a!=="reload")return this.events.next(new Bn(o.id,this.urlSerializer.serialize(o.rawUrl),"",Fs.IgnoredSameUrlNavigation)),o.resolve(!1),Ot;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return q(o).pipe(Ae(u=>(this.events.next(new di(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?Ot:Promise.resolve(u))),VV(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),ot(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation.update(h=>(h.finalUrl=u.urlAfterRedirects,h));let l=new $c(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:u,extractedUrl:l,source:h,restoredState:p,extras:m}=o,y=new di(u,this.urlSerializer.serialize(l),h,p);this.events.next(y);let S=YS(this.rootComponentType).snapshot;return this.currentTransition=r=me(F({},o),{targetSnapshot:S,urlAfterRedirects:l,extras:me(F({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(P=>(P.finalUrl=l,P)),q(r)}else return this.events.next(new Bn(o.id,this.urlSerializer.serialize(o.extractedUrl),"",Fs.IgnoredByUrlHandlingStrategy)),o.resolve(!1),Ot}),ot(o=>{let s=new vh(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),Q(o=>(this.currentTransition=r=me(F({},o),{guards:rV(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),pV(this.environmentInjector,o=>this.events.next(o)),ot(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw Mh(this.urlSerializer,o.guardsResult);let s=new _h(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),it(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Pt.GuardRejected),!1)),lv(o=>{if(o.guards.canActivateChecks.length!==0)return q(o).pipe(ot(s=>{let a=new Eh(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Ae(s=>{let a=!1;return q(s).pipe(jV(this.paramsInheritanceStrategy,this.environmentInjector),ot({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",Pt.NoDataFromResolver)}}))}),ot(s=>{let a=new Ih(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),lv(o=>{let s=a=>{let u=[];if(a.routeConfig?.loadComponent){let l=Hs(a)??this.environmentInjector;u.push(this.configLoader.loadComponent(l,a.routeConfig).pipe(ot(h=>{a.component=h}),Q(()=>{})))}for(let l of a.children)u.push(...s(l));return u};return Qa(s(o.targetSnapshot.root)).pipe(qr(null),Rt(1))}),lv(()=>this.afterPreactivation()),Ae(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?we(a).pipe(Q(()=>r)):q(r)}),Q(o=>{let s=JF(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=me(F({},o),{targetRouterState:s}),this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),ot(()=>{this.events.next(new Hc)}),nV(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Rt(1),jl(new G(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(it(()=>!i&&!r.targetRouterState),ot(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",Pt.Aborted)}))),ot({next:o=>{i=!0,this.lastSuccessfulNavigation=tn(this.currentNavigation),this.events.next(new Gt(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),jl(this.transitionAbortWithErrorSubject.pipe(ot(o=>{throw o}))),Ya(()=>{i||this.cancelNavigationTransition(r,"",Pt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),or(o=>{if(this.destroyed)return r.resolve(!1),Ot;if(i=!0,nA(o))this.events.next(new jn(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),tV(o)?this.events.next(new Us(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new Vs(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=qe(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof Bs){let{message:u,cancellationCode:l}=Mh(this.urlSerializer,a);this.events.next(new jn(r.id,this.urlSerializer.serialize(r.extractedUrl),u,l)),this.events.next(new Us(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return Ot}))}))}cancelNavigationTransition(t,r,i){let o=new jn(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=tn(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function GV(n){return n!==Os}var fA=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:()=>R(WV),providedIn:"root"})}return n})(),kh=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},WV=(()=>{class n extends kh{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Od(n)))(i||n)}})();static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),pA=(()=>{class n{urlSerializer=R(_o);options=R(hi,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=R(si);urlHandlingStrategy=R(Lh);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Un;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof Un?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=YS(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:()=>R(KV),providedIn:"root"})}return n})(),KV=(()=>{class n extends pA{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof di?this.updateStateMemento():t instanceof Bn?this.commitTransition(r):t instanceof $c?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Hc?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof jn&&t.code!==Pt.SupersededByNewNavigation&&t.code!==Pt.Redirect?this.restoreHistory(r):t instanceof Vs?this.restoreHistory(r,!0):t instanceof Gt&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,u=F(F({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",u)}else{let a=F(F({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Od(n)))(i||n)}})();static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Vh(n,e){n.events.pipe(it(t=>t instanceof Gt||t instanceof jn||t instanceof Vs||t instanceof Bn),Q(t=>t instanceof Gt||t instanceof Bn?0:(t instanceof jn?t.code===Pt.Redirect||t.code===Pt.SupersededByNewNavigation:!1)?2:1),it(t=>t!==2),Rt(1)).subscribe(()=>{e()})}var QV={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},YV={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},_n=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=R(Ay);stateManager=R(pA);options=R(hi,{optional:!0})||{};pendingTasks=R(xn);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=R(Fh);urlSerializer=R(_o);location=R(si);urlHandlingStrategy=R(Lh);injector=R(Be);_events=new ke;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=R(fA);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=R(Io,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!R(Zc,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Le;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=tn(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof jn&&r.code!==Pt.Redirect&&r.code!==Pt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Gt)this.navigated=!0;else if(r instanceof Us){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=F({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||GV(i.source)},s);this.scheduleNavigation(a,Os,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}KF(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Os,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=F({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o).catch(u=>{this.disposed||this.injector.get(wt)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return tn(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Av),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=F(F({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=GS(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return WS(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=li(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Os,null,r)}navigate(t,r={skipLocationChange:!1}){return ZV(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=F({},QV):r===!1?i=F({},YV):i=r,li(t))return SS(this.currentUrlTree,t,i);let o=this.parseUrl(t);return SS(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,u=m});let h=this.pendingTasks.add();return Vh(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ZV(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new U(4008,!1)}var qs=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=fr(null);get href(){return tn(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new ke;applicationErrorHandler=R(wt);options=R(hi,{optional:!0});constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(R(new rh("href"),{optional:!0}));let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area"||!!(typeof customElements=="object"&&customElements.get(u)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof Gt&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(li(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:li(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(Re(_n),Re($n),Ic("tabindex"),Re(uo),Re(fn),Re(yn))};static \u0275dir=ii({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&_r("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Jd("href",i.reactiveHref(),sy)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Ac],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Ac],replaceUrl:[2,"replaceUrl","replaceUrl",Ac],routerLink:"routerLink"},features:[ao]})}return n})(),xv=(()=>{class n{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new Tt;constructor(t,r,i,o,s){this.router=t,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.routerEventsSubscription=t.events.subscribe(a=>{a instanceof Gt&&this.update()})}ngAfterContentInit(){q(this.links.changes,q(null)).pipe(Hr()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=we(t).pipe(Hr()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=JV(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?t.isActive(o,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(r){return new(r||n)(Re(_n),Re(fn),Re(uo),Re(go),Re(qs,8))};static \u0275dir=ii({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&xy(o,qs,5),r&2){let s;Oy(s=Ly())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[ao]})}return n})();function JV(n){return!!n.paths}var Xc=class{};var gA=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,o){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(it(t=>t instanceof Gt),zr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=bs(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return we(i).pipe(Hr())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=q(null);let o=i.pipe(Ue(s=>s===null?q(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(t,r);return we([o,s]).pipe(Hr())}else return o})}static \u0275fac=function(r){return new(r||n)($(_n),$(Be),$(Xc),$(Oh))};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),mA=new B(""),XV=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=Os;restoredId=0;store={};constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof di?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Gt?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Bn&&t.code===Fs.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof js&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>_(this,null,function*(){yield new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new js(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){Ey()};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})();function Ov(n,...e){return Et([{provide:Io,multi:!0,useValue:n},[],{provide:$n,useFactory:yA,deps:[_n]},{provide:Tc,multi:!0,useFactory:vA},e.map(t=>t.\u0275providers)])}function yA(n){return n.routerState.root}function eu(n,e){return{\u0275kind:n,\u0275providers:e}}function vA(){let n=R(xe);return e=>{let t=n.get(Fn);if(e!==t.components[0])return;let r=n.get(_n),i=n.get(_A);n.get(Lv)===1&&r.initialNavigation(),n.get(wA,null,{optional:!0})?.setUpPreloading(),n.get(mA,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var _A=new B("",{factory:()=>new ke}),Lv=new B("",{providedIn:"root",factory:()=>1});function EA(){let n=[{provide:ry,useValue:!0},{provide:Lv,useValue:0},Cs(()=>{let e=R(xe);return e.get(zy,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(_n),o=e.get(_A);Vh(i,()=>{r(!0)}),e.get(Fh).afterPreactivation=()=>(r(!0),o.closed?q(void 0):o),i.initialNavigation()}))})];return eu(2,n)}function IA(){let n=[Cs(()=>{R(_n).setUpLocationChangeListener()}),{provide:Lv,useValue:2}];return eu(3,n)}var wA=new B("");function TA(n){return eu(0,[{provide:wA,useExisting:gA},{provide:Xc,useExisting:n}])}function DA(){return eu(8,[Cv,{provide:Zc,useExisting:Cv}])}function bA(n){pn("NgRouterViewTransitions");let e=[{provide:Nv,useValue:hA},{provide:Mv,useValue:F({skipNextTransition:!!n?.skipInitialTransition},n)}];return eu(9,e)}var CA=[si,{provide:_o,useClass:ui},_n,Eo,{provide:$n,useFactory:yA,deps:[_n]},Oh,[]],Fv=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[CA,[],{provide:Io,multi:!0,useValue:t},[],r?.errorHandler?{provide:Pv,useValue:r.errorHandler}:[],{provide:hi,useValue:r||{}},r?.useHash?t2():n2(),e2(),r?.preloadingStrategy?TA(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?r2(r):[],r?.bindToComponentInputs?DA().\u0275providers:[],r?.enableViewTransitions?bA().\u0275providers:[],i2()]}}static forChild(t){return{ngModule:n,providers:[{provide:Io,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ri({type:n});static \u0275inj=ur({})}return n})();function e2(){return{provide:mA,useFactory:()=>{let n=R(yS),e=R(fe),t=R(hi),r=R(Fh),i=R(_o);return t.scrollOffset&&n.setOffset(t.scrollOffset),new XV(i,r,n,e,t)}}}function t2(){return{provide:yn,useClass:Ky}}function n2(){return{provide:yn,useClass:sh}}function r2(n){return[n.initialNavigation==="disabled"?IA().\u0275providers:[],n.initialNavigation==="enabledBlocking"?EA().\u0275providers:[]]}var kv=new B("");function i2(){return[{provide:kv,useFactory:vA},{provide:Tc,multi:!0,useExisting:kv}]}var SA=()=>{};var NA=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},s2=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},jh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,u=i+2<n.length,l=u?n[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,m=(a&15)<<2|l>>6,y=l&63;u||(y=64,s||(m=64)),r.push(t[h],t[p],t[m],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(NA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):s2(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new jv;let m=o<<2|a>>4;if(r.push(m),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let S=l<<6&192|p;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},jv=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},a2=function(n){let e=NA(n);return jh.encodeByteArray(e,!0)},nu=function(n){return a2(n).replace(/\./g,"")},Uh=function(n){try{return jh.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Bv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var c2=()=>Bv().__FIREBASE_DEFAULTS__,u2=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},l2=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Uh(n[1]);return e&&JSON.parse(e)},Bh=()=>{try{return SA()||c2()||u2()||l2()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},$v=n=>{var e,t;return(t=(e=Bh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},MA=n=>{let e=$v(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Hv=()=>{var n;return(n=Bh())===null||n===void 0?void 0:n.config},zv=n=>{var e;return(e=Bh())===null||e===void 0?void 0:e[`_${n}`]};var wo=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function fi(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function $h(n){return _(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function PA(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[nu(JSON.stringify(t)),nu(JSON.stringify(s)),""].join(".")}var tu={};function d2(){let n={prod:[],emulator:[]};for(let e of Object.keys(tu))tu[e]?n.emulator.push(e):n.prod.push(e);return n}function h2(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var AA=!1;function Hh(n,e){if(typeof window>"u"||typeof document>"u"||!fi(window.location.host)||tu[n]===e||tu[n]||AA)return;tu[n]=e;function t(m){return`__firebase__banner__${m}`}let r="__firebase__banner",o=d2().prod.length>0;function s(){let m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function l(){let m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{AA=!0,s()},m}function h(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){let m=h2(r),y=t("text"),S=document.getElementById(y)||document.createElement("span"),P=t("learnmore"),M=document.getElementById(P)||document.createElement("a"),L=t("preprendIcon"),z=document.getElementById(L)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){let Z=m.element;a(Z),h(M,P);let De=l();u(z,L),Z.append(z,S,M,De),document.body.appendChild(Z)}o?(S.innerText="Preview backend disconnected.",z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function at(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(at())}function f2(){var n;let e=(n=Bh())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function xA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function OA(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function LA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function FA(){let n=at();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function VA(){return!f2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ru(){try{return typeof indexedDB=="object"}catch{return!1}}function jA(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var p2="FirebaseError",Wt=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=p2,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,En.prototype.create)}},En=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?g2(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Wt(i,a,r)}};function g2(n,e){return n.replace(m2,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var m2=/\{\$([^}]+)}/g;function UA(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Hn(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(RA(o)&&RA(s)){if(!Hn(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function RA(n){return n!==null&&typeof n=="object"}function Gs(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function BA(n,e){let t=new Uv(n,e);return t.subscribe.bind(t)}var Uv=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");y2(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Vv),i.error===void 0&&(i.error=Vv),i.complete===void 0&&(i.complete=Vv);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function y2(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Vv(){}var Lte=14400*1e3;function Fe(n){return n&&n._delegate?n._delegate:n}var kt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var To="[DEFAULT]";var qv=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new wo;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_2(e))try{this.getOrInitializeService({instanceIdentifier:To})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=To){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return _(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=To){return this.instances.has(e)}getOptions(e=To){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:v2(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=To){return this.component?this.component.multipleInstances?e:To:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function v2(n){return n===To?void 0:n}function _2(n){return n.instantiationMode==="EAGER"}var zh=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new qv(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var E2=[],se=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(se||{}),I2={debug:se.DEBUG,verbose:se.VERBOSE,info:se.INFO,warn:se.WARN,error:se.ERROR,silent:se.SILENT},w2=se.INFO,T2={[se.DEBUG]:"log",[se.VERBOSE]:"log",[se.INFO]:"info",[se.WARN]:"warn",[se.ERROR]:"error"},D2=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=T2[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},zn=class{constructor(e){this.name=e,this._logLevel=w2,this._logHandler=D2,this._userLogHandler=null,E2.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?I2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,se.DEBUG,...e),this._logHandler(this,se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,se.VERBOSE,...e),this._logHandler(this,se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,se.INFO,...e),this._logHandler(this,se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,se.WARN,...e),this._logHandler(this,se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,se.ERROR,...e),this._logHandler(this,se.ERROR,...e)}};var b2=(n,e)=>e.some(t=>n instanceof t),$A,HA;function C2(){return $A||($A=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function S2(){return HA||(HA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var zA=new WeakMap,Wv=new WeakMap,qA=new WeakMap,Gv=new WeakMap,Qv=new WeakMap;function A2(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(qn(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&zA.set(t,n)}).catch(()=>{}),Qv.set(e,n),e}function R2(n){if(Wv.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});Wv.set(n,e)}var Kv={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Wv.get(n);if(e==="objectStoreNames")return n.objectStoreNames||qA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return qn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function GA(n){Kv=n(Kv)}function N2(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(qh(this),e,...t);return qA.set(r,e.sort?e.sort():[e]),qn(r)}:S2().includes(n)?function(...e){return n.apply(qh(this),e),qn(zA.get(this))}:function(...e){return qn(n.apply(qh(this),e))}}function M2(n){return typeof n=="function"?N2(n):(n instanceof IDBTransaction&&R2(n),b2(n,C2())?new Proxy(n,Kv):n)}function qn(n){if(n instanceof IDBRequest)return A2(n);if(Gv.has(n))return Gv.get(n);let e=M2(n);return e!==n&&(Gv.set(n,e),Qv.set(e,n)),e}var qh=n=>Qv.get(n);function KA(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=qn(s);return r&&s.addEventListener("upgradeneeded",u=>{r(qn(s.result),u.oldVersion,u.newVersion,qn(s.transaction),u)}),t&&s.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var P2=["get","getKey","getAll","getAllKeys","count"],k2=["put","add","delete","clear"],Yv=new Map;function WA(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Yv.get(e))return Yv.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=k2.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||P2.includes(t)))return;let o=function(s,...a){return _(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),i&&u.done]))[0]})};return Yv.set(e,o),o}GA(n=>me(F({},n),{get:(e,t,r)=>WA(e,t)||n.get(e,t,r),has:(e,t)=>!!WA(e,t)||n.has(e,t)}));var Jv=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(x2(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function x2(n){let e=n.getComponent();return e?.type==="VERSION"}var Xv="@firebase/app",QA="0.13.2";var wr=new zn("@firebase/app"),O2="@firebase/app-compat",L2="@firebase/analytics-compat",F2="@firebase/analytics",V2="@firebase/app-check-compat",j2="@firebase/app-check",U2="@firebase/auth",B2="@firebase/auth-compat",$2="@firebase/database",H2="@firebase/data-connect",z2="@firebase/database-compat",q2="@firebase/functions",G2="@firebase/functions-compat",W2="@firebase/installations",K2="@firebase/installations-compat",Q2="@firebase/messaging",Y2="@firebase/messaging-compat",Z2="@firebase/performance",J2="@firebase/performance-compat",X2="@firebase/remote-config",ej="@firebase/remote-config-compat",tj="@firebase/storage",nj="@firebase/storage-compat",rj="@firebase/firestore",ij="@firebase/ai",oj="@firebase/firestore-compat",sj="firebase",aj="11.10.0";var e_="[DEFAULT]",cj={[Xv]:"fire-core",[O2]:"fire-core-compat",[F2]:"fire-analytics",[L2]:"fire-analytics-compat",[j2]:"fire-app-check",[V2]:"fire-app-check-compat",[U2]:"fire-auth",[B2]:"fire-auth-compat",[$2]:"fire-rtdb",[H2]:"fire-data-connect",[z2]:"fire-rtdb-compat",[q2]:"fire-fn",[G2]:"fire-fn-compat",[W2]:"fire-iid",[K2]:"fire-iid-compat",[Q2]:"fire-fcm",[Y2]:"fire-fcm-compat",[Z2]:"fire-perf",[J2]:"fire-perf-compat",[X2]:"fire-rc",[ej]:"fire-rc-compat",[tj]:"fire-gcs",[nj]:"fire-gcs-compat",[rj]:"fire-fst",[oj]:"fire-fst-compat",[ij]:"fire-vertex","fire-js":"fire-js",[sj]:"fire-js-all"};var iu=new Map,uj=new Map,t_=new Map;function YA(n,e){try{n.container.addComponent(e)}catch(t){wr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function In(n){let e=n.name;if(t_.has(e))return wr.debug(`There were multiple attempts to register component ${e}.`),!1;t_.set(e,n);for(let t of iu.values())YA(t,n);for(let t of uj.values())YA(t,n);return!0}function Ws(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Kt(n){return n==null?!1:n.settings!==void 0}var lj={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},pi=new En("app","Firebase",lj);var n_=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new kt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw pi.create("app-deleted",{appName:this._name})}};var gi=aj;function o_(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:e_,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw pi.create("bad-app-name",{appName:String(i)});if(t||(t=Hv()),!t)throw pi.create("no-options");let o=iu.get(i);if(o){if(Hn(t,o.options)&&Hn(r,o.config))return o;throw pi.create("duplicate-app",{appName:i})}let s=new zh(i);for(let u of t_.values())s.addComponent(u);let a=new n_(t,r,s);return iu.set(i,a),a}function Do(n=e_){let e=iu.get(n);if(!e&&n===e_&&Hv())return o_();if(!e)throw pi.create("no-app",{appName:n});return e}function Gh(){return Array.from(iu.values())}function Ve(n,e,t){var r;let i=(r=cj[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),wr.warn(a.join(" "));return}In(new kt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var dj="firebase-heartbeat-database",hj=1,ou="firebase-heartbeat-store",Zv=null;function e0(){return Zv||(Zv=KA(dj,hj,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ou)}catch(t){console.warn(t)}}}}).catch(n=>{throw pi.create("idb-open",{originalErrorMessage:n.message})})),Zv}function fj(n){return _(this,null,function*(){try{let t=(yield e0()).transaction(ou),r=yield t.objectStore(ou).get(t0(n));return yield t.done,r}catch(e){if(e instanceof Wt)wr.warn(e.message);else{let t=pi.create("idb-get",{originalErrorMessage:e?.message});wr.warn(t.message)}}})}function ZA(n,e){return _(this,null,function*(){try{let r=(yield e0()).transaction(ou,"readwrite");yield r.objectStore(ou).put(e,t0(n)),yield r.done}catch(t){if(t instanceof Wt)wr.warn(t.message);else{let r=pi.create("idb-set",{originalErrorMessage:t?.message});wr.warn(r.message)}}})}function t0(n){return`${n.name}!${n.options.appId}`}var pj=1024,gj=30,r_=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new i_(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return _(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=JA();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>gj){let s=yj(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){wr.warn(r)}})}getHeartbeatsHeader(){return _(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=JA(),{heartbeatsToSend:r,unsentEntries:i}=mj(this._heartbeatsCache.heartbeats),o=nu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return wr.warn(t),""}})}};function JA(){return new Date().toISOString().substring(0,10)}function mj(n,e=pj){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),XA(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),XA(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var i_=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return _(this,null,function*(){return ru()?jA().then(()=>!0).catch(()=>!1):!1})}read(){return _(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield fj(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return _(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return ZA(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return _(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return ZA(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function XA(n){return nu(JSON.stringify({version:2,heartbeats:n})).length}function yj(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function vj(n){In(new kt("platform-logger",e=>new Jv(e),"PRIVATE")),In(new kt("heartbeat",e=>new r_(e),"PRIVATE")),Ve(Xv,QA,n),Ve(Xv,QA,"esm2017"),Ve("fire-js","")}vj("");var _j="firebase",Ej="11.10.0";Ve(_j,Ej,"app");function n0(n){n===void 0&&(n=R(xe));let e=n.get(vs);return t=>new G(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var mi=new Hi("ANGULARFIRE2_VERSION");function su(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Qs=(n,e)=>{let t=e?[e]:Gh(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Ks=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(Ks||{}),r0=Sc()&&typeof Zone<"u"?Ks.WARN:Ks.SILENT;var Wh=class{zone;delegate;constructor(e,t=vg){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},yi=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=R(fe);this.outsideAngular=t.runOutsideAngular(()=>new Wh(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new Wh(typeof Zone>"u"?void 0:Zone.current,yg))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),i0=!1;function Ij(n,e){!i0&&(r0>Ks.SILENT||Sc())&&(i0=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),r0>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function wj(n){let e=R(fe,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function bo(n){let e=R(fe,{optional:!0});return e?e.run(()=>n()):n()}var Tj=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),qe(t,()=>bo(()=>n.apply(void 0,r)))),We=(n,e,t)=>(t||=e?Ks.WARN:Ks.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=R(yi),s=R(vs),a=R(Be)}catch{return Ij(n,t),n.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=bo(()=>s.add())),i[l]=Tj(i[l],r,a));let u=wj(()=>n.apply(this,i));return e?u instanceof G?u.pipe($r(o.outsideAngular),Br(o.insideAngular),n0(a)):u instanceof Promise?bo(()=>{let l=s.add();return new Promise((h,p)=>{u.then(m=>qe(a,()=>bo(()=>h(m))),m=>qe(a,()=>bo(()=>p(m)))).finally(l)})}):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:bo(()=>u):u instanceof G?u.pipe($r(o.outsideAngular),Br(o.insideAngular)):bo(()=>u)});var Tr=class{constructor(e){return e}},Co=class{constructor(){return Gh()}};function Dj(n){return n&&n.length===1?n[0]:new Tr(Do())}var s_=new B("angularfire2._apps"),bj={provide:Tr,useFactory:Dj,deps:[[new Ht,s_]]},Cj={provide:Co,deps:[[new Ht,s_]]};function Sj(n){return(e,t)=>{let r=t.get(ti);Ve("angularfire",mi.full,"core"),Ve("angularfire",mi.full,"app"),Ve("angular",kg.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Tr(i)}}function o0(n,...e){return Et([bj,Cj,{provide:s_,useFactory:Sj(n),multi:!0,deps:[fe,xe,yi,...e]}])}var s0=We(o_,!0);var Aj=new Map,Rj={activated:!1,tokenObservers:[]},Nj={initialized:!1,enabled:!1};function wn(n){return Aj.get(n)||Object.assign({},Rj)}function l0(){return Nj}var Mj="https://content-firebaseappcheck.googleapis.com/v1";var Pj="exchangeDebugToken",a0={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},jne=1440*60*1e3;var u_=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return _(this,null,function*(){this.stop();try{this.pending=new wo,this.pending.promise.catch(t=>{}),yield kj(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new wo,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function kj(n){return new Promise(e=>{setTimeout(e,n)})}var xj={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},vi=new En("appCheck","AppCheck",xj);function d0(n){if(!wn(n).activated)throw vi.create("use-before-activation",{appName:n.name})}function h0(r,i){return _(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(n,a)}catch(y){throw vi.create("fetch-network-error",{originalErrorMessage:y?.message})}if(u.status!==200)throw vi.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(y){throw vi.create("fetch-parse-error",{originalErrorMessage:y?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw vi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+p,issuedAtTimeMillis:m}})}function f0(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${Mj}/projects/${t}/apps/${r}:${Pj}?key=${i}`,body:{debug_token:e}}}var Oj="firebase-app-check-database",Lj=1,l_="firebase-app-check-store";var Kh=null;function Fj(){return Kh||(Kh=new Promise((n,e)=>{try{let t=indexedDB.open(Oj,Lj);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(vi.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(l_,{keyPath:"compositeKey"})}}}catch(t){e(vi.create("storage-open",{originalErrorMessage:t?.message}))}}),Kh)}function Vj(n,e){return jj(Uj(n),e)}function jj(n,e){return _(this,null,function*(){let r=(yield Fj()).transaction(l_,"readwrite"),o=r.objectStore(l_).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(vi.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function Uj(n){return`${n.options.appId}-${n.name}`}var au=new zn("@firebase/app-check");function a_(n,e){return ru()?Vj(n,e).catch(t=>{au.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function p0(){return l0().enabled}function g0(){return _(this,null,function*(){let n=l0();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var Bj={error:"UNKNOWN_ERROR"};function $j(n){return jh.encodeString(JSON.stringify(n),!1)}function d_(n,e=!1,t=!1){return _(this,null,function*(){let r=n.app;d0(r);let i=wn(r),o=i.token,s;if(o&&!cu(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(cu(l)?o=l:yield a_(r,void 0))}if(!e&&o&&cu(o))return{token:o.token};let a=!1;if(p0())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=h0(f0(r,yield g0()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=yield i.exchangeTokenPromise;return yield a_(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?au.warn(l.message):t&&au.error(l),c_(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield wn(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?au.warn(l.message):t&&au.error(l),s=l}let u;return o?s?cu(o)?u={token:o.token,internalError:s}:u=c_(s):(u={token:o.token},i.token=o,yield a_(r,o)):u=c_(s),a&&Gj(r,u),u})}function Hj(n){return _(this,null,function*(){let e=n.app;d0(e);let{provider:t}=wn(e);if(p0()){let r=yield g0(),{token:i}=yield h0(f0(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function zj(n,e,t,r){let{app:i}=n,o=wn(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&cu(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),c0(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>c0(n))}function m0(n,e){let t=wn(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function c0(n){let{app:e}=n,t=wn(e),r=t.tokenRefresher;r||(r=qj(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function qj(n){let{app:e}=n;return new u_(()=>_(null,null,function*(){let t=wn(e),r;if(t.token?r=yield d_(n,!0):r=yield d_(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=wn(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},a0.RETRIAL_MIN_WAIT,a0.RETRIAL_MAX_WAIT)}function Gj(n,e){let t=wn(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function cu(n){return n.expireTimeMillis-Date.now()>0}function c_(n){return{token:$j(Bj),error:n}}var h_=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=wn(this.app);for(let t of e)m0(this.app,t.next);return Promise.resolve()}};function Wj(n,e){return new h_(n,e)}function Kj(n){return{getToken:e=>d_(n,e),getLimitedUseToken:()=>Hj(n),addTokenListener:e=>zj(n,"INTERNAL",e),removeTokenListener:e=>m0(n.app,e)}}var Qj="@firebase/app-check",Yj="0.10.1";var Zj="app-check",u0="app-check-internal";function Jj(){In(new kt(Zj,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return Wj(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(u0).initialize()})),In(new kt(u0,n=>{let e=n.getProvider("app-check").getImmediate();return Kj(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ve(Qj,Yj)}Jj();var Xj="app-check";var Ys=class{constructor(){return Qs(Xj)}};var eU=["localhost","0.0.0.0","127.0.0.1"],Jne=typeof window<"u"&&eU.includes(window.location.hostname);function M0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var P0=M0,k0=new En("auth","Firebase",M0());var ef=new zn("@firebase/auth");function tU(n,...e){ef.logLevel<=se.WARN&&ef.warn(`Auth (${gi}): ${n}`,...e)}function Yh(n,...e){ef.logLevel<=se.ERROR&&ef.error(`Auth (${gi}): ${n}`,...e)}function Wn(n,...e){throw N_(n,...e)}function Tn(n,...e){return N_(n,...e)}function R_(n,e,t){let r=Object.assign(Object.assign({},P0()),{[e]:t});return new En("auth","Firebase",r).create(e,{appName:n.name})}function So(n){return R_(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function nU(n,e,t){let r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Wn(n,"argument-error"),R_(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function N_(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return k0.create(n,...e)}function Y(n,e,...t){if(!n)throw N_(e,...t)}function Dr(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Yh(e),new Error(e)}function Cr(n,e){n||Dr(e)}function g_(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function rU(){return y0()==="http:"||y0()==="https:"}function y0(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function iU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(rU()||OA()||"connection"in navigator)?navigator.onLine:!0}function oU(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Ao=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Cr(t>e,"Short delay should be less than long delay!"),this.isMobile=kA()||LA()}get(){return iU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function M_(n,e){Cr(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var tf=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Dr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Dr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Dr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var sU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var aU=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],cU=new Ao(3e4,6e4);function P_(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Js(o,s,a,u){return _(this,arguments,function*(n,e,t,r,i={}){return x0(n,i,()=>_(null,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=Gs(Object.assign({key:n.config.apiKey},h)).slice(1),m=yield n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);let y=Object.assign({method:e,headers:m},l);return xA()||(y.referrerPolicy="no-referrer"),n.emulatorConfig&&fi(n.emulatorConfig.host)&&(y.credentials="include"),tf.fetch()(yield O0(n,n.config.apiHost,t,p),y)}))})}function x0(n,e,t){return _(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},sU),e);try{let i=new m_(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Qh(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Qh(n,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw Qh(n,"email-already-in-use",s);if(u==="USER_DISABLED")throw Qh(n,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw R_(n,h,l);Wn(n,h)}}catch(i){if(i instanceof Wt)throw i;Wn(n,"network-request-failed",{message:String(i)})}})}function uU(o,s,a,u){return _(this,arguments,function*(n,e,t,r,i={}){let l=yield Js(n,e,t,r,i);return"mfaPendingCredential"in l&&Wn(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function O0(n,e,t,r){return _(this,null,function*(){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?M_(n.config,i):`${n.config.apiScheme}://${i}`;return aU.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}var m_=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Tn(this.auth,"network-request-failed")),cU.get())})}};function Qh(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Tn(n,e,r);return i.customData._tokenResponse=t,i}function lU(n,e){return _(this,null,function*(){return Js(n,"POST","/v1/accounts:delete",e)})}function nf(n,e){return _(this,null,function*(){return Js(n,"POST","/v1/accounts:lookup",e)})}function uu(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function k_(n,e=!1){return _(this,null,function*(){let t=Fe(n),r=yield t.getIdToken(e),i=x_(r);Y(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:uu(f_(i.auth_time)),issuedAtTime:uu(f_(i.iat)),expirationTime:uu(f_(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function f_(n){return Number(n)*1e3}function x_(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Yh("JWT malformed, contained fewer than 3 sections"),null;try{let i=Uh(t);return i?JSON.parse(i):(Yh("Failed to decode base64 JWT payload"),null)}catch(i){return Yh("Caught error parsing JWT payload as JSON",i?.toString()),null}}function v0(n){let e=x_(n);return Y(e,"internal-error"),Y(typeof e.exp<"u","internal-error"),Y(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function du(n,e,t=!1){return _(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Wt&&dU(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function dU({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var y_=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>_(this,null,function*(){yield this.iteration()}),t)}iteration(){return _(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var hu=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=uu(this.lastLoginAt),this.creationTime=uu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function rf(n){return _(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield du(n,nf(t,{idToken:r}));Y(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?L0(o.providerUserInfo):[],a=hU(n.providerData,s),u=n.isAnonymous,l=!(n.email&&o.passwordHash)&&!a?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new hu(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(n,p)})}function O_(n){return _(this,null,function*(){let e=Fe(n);yield rf(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function hU(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function L0(n){return n.map(e=>{var{providerId:t}=e,r=bl(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function fU(n,e){return _(this,null,function*(){let t=yield x0(n,{},()=>_(null,null,function*(){let r=Gs({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=yield O0(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:a,body:r};return n.emulatorConfig&&fi(n.emulatorConfig.host)&&(u.credentials="include"),tf.fetch()(s,u)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function pU(n,e){return _(this,null,function*(){return Js(n,"POST","/v2/accounts:revokeToken",P_(n,e))})}var lu=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Y(e.idToken,"internal-error"),Y(typeof e.idToken<"u","internal-error"),Y(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):v0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Y(e.length!==0,"internal-error");let t=v0(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return _(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Y(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return _(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield fU(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(Y(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(Y(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(Y(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Dr("not implemented")}};function _i(n,e){Y(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Ei=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=bl(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new y_(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new hu(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return _(this,null,function*(){let t=yield du(this,this.stsTokenManager.getToken(this.auth,e));return Y(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return k_(this,e)}reload(){return O_(this)}_assign(e){this!==e&&(Y(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Y(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return _(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield rf(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return _(this,null,function*(){if(Kt(this.auth.app))return Promise.reject(So(this.auth));let e=yield this.getIdToken();return yield du(this,lU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,u,l,h;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,m=(i=t.email)!==null&&i!==void 0?i:void 0,y=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,S=(s=t.photoURL)!==null&&s!==void 0?s:void 0,P=(a=t.tenantId)!==null&&a!==void 0?a:void 0,M=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,L=(l=t.createdAt)!==null&&l!==void 0?l:void 0,z=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:Z,emailVerified:De,isAnonymous:Ct,providerData:Ie,stsTokenManager:T}=t;Y(Z&&T,e,"internal-error");let v=lu.fromJSON(this.name,T);Y(typeof Z=="string",e,"internal-error"),_i(p,e.name),_i(m,e.name),Y(typeof De=="boolean",e,"internal-error"),Y(typeof Ct=="boolean",e,"internal-error"),_i(y,e.name),_i(S,e.name),_i(P,e.name),_i(M,e.name),_i(L,e.name),_i(z,e.name);let I=new n({uid:Z,auth:e,email:m,emailVerified:De,displayName:p,isAnonymous:Ct,photoURL:S,phoneNumber:y,tenantId:P,stsTokenManager:v,createdAt:L,lastLoginAt:z});return Ie&&Array.isArray(Ie)&&(I.providerData=Ie.map(w=>Object.assign({},w))),M&&(I._redirectEventId=M),I}static _fromIdTokenResponse(e,t,r=!1){return _(this,null,function*(){let i=new lu;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield rf(o),o})}static _fromGetAccountInfoResponse(e,t,r){return _(this,null,function*(){let i=t.users[0];Y(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?L0(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new lu;a.updateFromIdToken(r);let u=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new hu(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var _0=new Map;function br(n){Cr(n instanceof Function,"Expected a class definition");let e=_0.get(n);return e?(Cr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,_0.set(n,e),e)}var gU=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return _(this,null,function*(){return!0})}_set(t,r){return _(this,null,function*(){this.storage[t]=r})}_get(t){return _(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return _(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),v_=gU;function Zh(n,e,t){return`firebase:${n}:${e}:${t}`}var of=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Zh(this.userKey,i.apiKey,o),this.fullPersistenceKey=Zh("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return _(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield nf(this.auth,{idToken:e}).catch(()=>{});return t?Ei._fromGetAccountInfoResponse(this.auth,t,e):null}return Ei._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return _(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return _(this,null,function*(){if(!t.length)return new n(br(v_),e,r);let i=(yield Promise.all(t.map(l=>_(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||br(v_),s=Zh(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let h=yield l._get(s);if(h){let p;if(typeof h=="string"){let m=yield nf(e,{idToken:h}).catch(()=>{});if(!m)break;p=yield Ei._fromGetAccountInfoResponse(e,m,h)}else p=Ei._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new n(o,e,r):(o=u[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(l=>_(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new n(o,e,r))})}};function E0(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(U0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(F0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if($0(e))return"Blackberry";if(H0(e))return"Webos";if(V0(e))return"Safari";if((e.includes("chrome/")||j0(e))&&!e.includes("edge/"))return"Chrome";if(B0(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function F0(n=at()){return/firefox\//i.test(n)}function V0(n=at()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function j0(n=at()){return/crios\//i.test(n)}function U0(n=at()){return/iemobile/i.test(n)}function B0(n=at()){return/android/i.test(n)}function $0(n=at()){return/blackberry/i.test(n)}function H0(n=at()){return/webos/i.test(n)}function L_(n=at()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function mU(n=at()){var e;return L_(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function yU(){return FA()&&document.documentMode===10}function z0(n=at()){return L_(n)||B0(n)||H0(n)||$0(n)||/windows phone/i.test(n)||U0(n)}function q0(n,e=[]){let t;switch(n){case"Browser":t=E0(at());break;case"Worker":t=`${E0(at())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${gi}/${r}`}var __=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return _(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function vU(t){return _(this,arguments,function*(n,e={}){return Js(n,"GET","/v2/passwordPolicy",P_(n,e))})}var _U=6,E_=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:_U,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var I_=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new sf(this),this.idTokenSubscription=new sf(this),this.beforeStateQueue=new __(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=k0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=br(t)),this._initializationPromise=this.queue(()=>_(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield of.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return _(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return _(this,null,function*(){try{let t=yield nf(this,{idToken:e}),r=yield Ei._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return _(this,null,function*(){var t;if(Kt(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Y(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return _(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return _(this,null,function*(){try{yield rf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=oU()}_delete(){return _(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return _(this,null,function*(){if(Kt(this.app))return Promise.reject(So(this));let t=e?Fe(e):null;return t&&Y(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return _(this,null,function*(){if(!this._deleted)return e&&Y(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>_(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return _(this,null,function*(){return Kt(this.app)?Promise.reject(So(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Kt(this.app)?Promise.reject(So(this)):this.queue(()=>_(this,null,function*(){yield this.assertedPersistence.setPersistence(br(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return _(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return _(this,null,function*(){let e=yield vU(this),t=new E_(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new En("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return _(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield pU(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return _(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return _(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&br(e)||this._popupRedirectResolver;Y(t,this,"argument-error"),this.redirectPersistenceManager=yield of.create(this,[br(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return _(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>_(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return _(this,null,function*(){if(e===this.currentUser)return this.queue(()=>_(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Y(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(t);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return _(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Y(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=q0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return _(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return _(this,null,function*(){var e;if(Kt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&tU(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function pf(n){return Fe(n)}var sf=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=BA(t=>this.observer=t)}get next(){return Y(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var F_={loadJS(){return _(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function EU(n){F_=n}function IU(n){return F_.loadJS(n)}function wU(){return F_.gapiScript}function G0(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function V_(n,e){let t=Ws(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(Hn(o,e??{}))return i;Wn(i,"already-initialized")}return t.initialize({options:e})}function TU(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(br);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function j_(n,e,t){let r=pf(n);Y(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=W0(e),{host:s,port:a}=DU(e),u=a===null?"":`:${a}`,l={url:`${o}//${s}${u}/`},h=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Y(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Y(Hn(l,r.config.emulator)&&Hn(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,fi(s)?($h(`${o}//${s}${u}`),Hh("Auth",!0)):i||bU()}function W0(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function DU(n){let e=W0(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:I0(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:I0(s)}}}function I0(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function bU(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var fu=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Dr("not implemented")}_getIdTokenResponse(e){return Dr("not implemented")}_linkToIdToken(e,t){return Dr("not implemented")}_getReauthenticationResolver(e){return Dr("not implemented")}};function Zs(n,e){return _(this,null,function*(){return uU(n,"POST","/v1/accounts:signInWithIdp",P_(n,e))})}var CU="http://localhost",af=class n extends fu{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Wn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,o=bl(t,["providerId","signInMethod"]);if(!r||!i)return null;let s=new n(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){let t=this.buildRequest();return Zs(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,Zs(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,Zs(e,t)}buildRequest(){let e={requestUri:CU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Gs(t)}return e}};var pu=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var cf=class extends pu{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var U_=(()=>{class n extends cf{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return af._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();var gu=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return _(this,null,function*(){let o=yield Ei._fromIdTokenResponse(e,r,i),s=w0(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return _(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=w0(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function w0(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var w_=class n extends Wt{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function K0(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?w_._fromErrorAndOperation(n,o,e,r):o})}function SU(n,e,t=!1){return _(this,null,function*(){let r=yield du(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return gu._forOperation(n,"link",r)})}function AU(n,e,t=!1){return _(this,null,function*(){let{auth:r}=n;if(Kt(r.app))return Promise.reject(So(r));let i="reauthenticate";try{let o=yield du(n,K0(r,i,e,n),t);Y(o.idToken,r,"internal-error");let s=x_(o.idToken);Y(s,r,"internal-error");let{sub:a}=s;return Y(n.uid===a,r,"user-mismatch"),gu._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Wn(r,"user-mismatch"),o}})}function RU(n,e,t=!1){return _(this,null,function*(){if(Kt(n.app))return Promise.reject(So(n));let r="signIn",i=yield K0(n,r,e),o=yield gu._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function gf(n,e,t,r){return Fe(n).onIdTokenChanged(e,t,r)}function B_(n,e,t){return Fe(n).beforeAuthStateChanged(e,t)}function mf(n,e,t,r){return Fe(n).onAuthStateChanged(e,t,r)}function $_(n){return Fe(n).signOut()}var uf="__sak";var lf=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(uf,"1"),this.storage.removeItem(uf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var NU=1e3,MU=10,PU=(()=>{class n extends lf{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=z0(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);yU()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,MU):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},NU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return _(this,null,function*(){yield jr(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return _(this,null,function*(){let r=yield jr(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return _(this,null,function*(){yield jr(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),Q0=PU;var kU=(()=>{class n extends lf{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),H_=kU;function xU(n){return Promise.all(n.map(e=>_(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var OU=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return _(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(a).map(h=>_(this,null,function*(){return h(r.origin,s)})),l=yield xU(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function z_(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var T_=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return _(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{let l=z_("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(m.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function Gn(){return window}function LU(n){Gn().location.href=n}function Y0(){return typeof Gn().WorkerGlobalScope<"u"&&typeof Gn().importScripts=="function"}function FU(){return _(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function VU(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function jU(){return Y0()?self:null}var Z0="firebaseLocalStorageDb",UU=1,df="firebaseLocalStorage",J0="fbase_key",Ro=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function yf(n,e){return n.transaction([df],e?"readwrite":"readonly").objectStore(df)}function BU(){let n=indexedDB.deleteDatabase(Z0);return new Ro(n).toPromise()}function D_(){let n=indexedDB.open(Z0,UU);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(df,{keyPath:J0})}catch(i){t(i)}}),n.addEventListener("success",()=>_(null,null,function*(){let r=n.result;r.objectStoreNames.contains(df)?e(r):(r.close(),yield BU(),e(yield D_()))}))})}function T0(n,e,t){return _(this,null,function*(){let r=yf(n,!0).put({[J0]:e,value:t});return new Ro(r).toPromise()})}function $U(n,e){return _(this,null,function*(){let t=yf(n,!1).get(e),r=yield new Ro(t).toPromise();return r===void 0?null:r.value})}function D0(n,e){let t=yf(n,!0).delete(e);return new Ro(t).toPromise()}var HU=800,zU=3,qU=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return _(this,null,function*(){return this.db?this.db:(this.db=yield D_(),this.db)})}_withRetries(t){return _(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>zU)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return _(this,null,function*(){return Y0()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return _(this,null,function*(){this.receiver=OU._getInstance(jU()),this.receiver._subscribe("keyChanged",(t,r)=>_(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>_(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return _(this,null,function*(){var t,r;if(this.activeServiceWorker=yield FU(),!this.activeServiceWorker)return;this.sender=new T_(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return _(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||VU()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return _(this,null,function*(){try{if(!indexedDB)return!1;let t=yield D_();return yield T0(t,uf,"1"),yield D0(t,uf),!0}catch{}return!1})}_withPendingWrite(t){return _(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(i=>T0(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return _(this,null,function*(){let r=yield this._withRetries(i=>$U(i,t));return this.localCache[t]=r,r})}_remove(t){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(r=>D0(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return _(this,null,function*(){let t=yield this._withRetries(o=>{let s=yf(o,!1).getAll();return new Ro(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>_(this,null,function*(){return this._poll()}),HU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),X0=qU;var cre=G0("rcb"),ure=new Ao(3e4,6e4);function eR(n,e){return e?br(e):(Y(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var mu=class extends fu{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Zs(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Zs(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Zs(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function GU(n){return RU(n.auth,new mu(n),n.bypassAuthState)}function WU(n){let{auth:e,user:t}=n;return Y(t,e,"internal-error"),AU(t,new mu(n),n.bypassAuthState)}function KU(n){return _(this,null,function*(){let{auth:e,user:t}=n;return Y(t,e,"internal-error"),SU(t,new mu(n),n.bypassAuthState)})}var hf=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>_(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return _(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return GU;case"linkViaPopup":case"linkViaRedirect":return KU;case"reauthViaPopup":case"reauthViaRedirect":return WU;default:Wn(this.auth,"internal-error")}}resolve(e){Cr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Cr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var QU=new Ao(2e3,1e4);function q_(n,e,t){return _(this,null,function*(){if(Kt(n.app))return Promise.reject(Tn(n,"operation-not-supported-in-this-environment"));let r=pf(n);nU(n,e,pu);let i=eR(r,t);return new YU(r,"signInViaPopup",e,i).executeNotNull()})}var YU=(()=>{class n extends hf{constructor(t,r,i,o,s){super(t,r,o,s),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){return _(this,null,function*(){let t=yield this.execute();return Y(t,this.auth,"internal-error"),t})}onExecution(){return _(this,null,function*(){Cr(this.filter.length===1,"Popup operations only handle one event");let t=z_();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Tn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Tn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Tn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,QU.get())};t()}}n.currentPopupAction=null;return n})(),ZU="pendingRedirect",Jh=new Map,b_=class n extends hf{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return _(this,null,function*(){let e=Jh.get(this.auth._key());if(!e){try{let r=(yield JU(this.resolver,this.auth))?yield jr(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Jh.set(this.auth._key(),e)}return this.bypassAuthState||Jh.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return _(this,null,function*(){if(e.type==="signInViaRedirect")return jr(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,jr(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return _(this,null,function*(){})}cleanUp(){}};function JU(n,e){return _(this,null,function*(){let t=tB(e),r=eB(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function XU(n,e){Jh.set(n._key(),e)}function eB(n){return br(n._redirectPersistence)}function tB(n){return Zh(ZU,n.config.apiKey,n.name)}function nB(n,e,t=!1){return _(this,null,function*(){if(Kt(n.app))return Promise.reject(So(n));let r=pf(n),i=eR(r,e),s=yield new b_(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var rB=600*1e3,C_=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!iB(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!tR(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Tn(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=rB&&this.cachedEventUids.clear(),this.cachedEventUids.has(b0(e))}saveEventToCache(e){this.cachedEventUids.add(b0(e)),this.lastProcessedEventTime=Date.now()}};function b0(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function tR({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function iB(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tR(n);default:return!1}}function oB(t){return _(this,arguments,function*(n,e={}){return Js(n,"GET","/v1/projects",e)})}var sB=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,aB=/^https?/;function cB(n){return _(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield oB(n);for(let t of e)try{if(uB(t))return}catch{}Wn(n,"unauthorized-domain")})}function uB(n){let e=g_(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!aB.test(t))return!1;if(sB.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var lB=new Ao(3e4,6e4);function C0(){let n=Gn().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function dB(n){return new Promise((e,t)=>{var r,i,o;function s(){C0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{C0(),t(Tn(n,"network-request-failed"))},timeout:lB.get()})}if(!((i=(r=Gn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Gn().gapi)===null||o===void 0)&&o.load)s();else{let a=G0("iframefcb");return Gn()[a]=()=>{gapi.load?s():t(Tn(n,"network-request-failed"))},IU(`${wU()}?onload=${a}`).catch(u=>t(u))}}).catch(e=>{throw Xh=null,e})}var Xh=null;function hB(n){return Xh=Xh||dB(n),Xh}var fB=new Ao(5e3,15e3),pB="__/auth/iframe",gB="emulator/auth/iframe",mB={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yB=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vB(n){let e=n.config;Y(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?M_(e,gB):`https://${n.config.authDomain}/${pB}`,r={apiKey:e.apiKey,appName:n.name,v:gi},i=yB.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Gs(r).slice(1)}`}function _B(n){return _(this,null,function*(){let e=yield hB(n),t=Gn().gapi;return Y(t,n,"internal-error"),e.open({where:document.body,url:vB(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mB,dontclear:!0},r=>new Promise((i,o)=>_(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=Tn(n,"network-request-failed"),a=Gn().setTimeout(()=>{o(s)},fB.get());function u(){Gn().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})})))})}var EB={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},IB=500,wB=600,TB="_blank",DB="http://localhost",ff=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function bB(n,e,t,r=IB,i=wB){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},EB),{width:r.toString(),height:i.toString(),top:o,left:s}),l=at().toLowerCase();t&&(a=j0(l)?TB:t),F0(l)&&(e=e||DB,u.scrollbars="yes");let h=Object.entries(u).reduce((m,[y,S])=>`${m}${y}=${S},`,"");if(mU(l)&&a!=="_self")return CB(e||"",a),new ff(null);let p=window.open(e||"",a,h);Y(p,n,"popup-blocked");try{p.focus()}catch{}return new ff(p)}function CB(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var SB="__/auth/handler",AB="emulator/auth/handler",RB=encodeURIComponent("fac");function S0(n,e,t,r,i,o){return _(this,null,function*(){Y(n.config.authDomain,n,"auth-domain-config-required"),Y(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:gi,eventId:i};if(e instanceof pu){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",UA(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof cf){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield n._getAppCheckToken(),l=u?`#${RB}=${encodeURIComponent(u)}`:"";return`${NB(n)}?${Gs(a).slice(1)}${l}`})}function NB({config:n}){return n.emulator?M_(n,AB):`https://${n.authDomain}/${SB}`}var p_="webStorageSupport",S_=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=H_,this._completeRedirectFn=nB,this._overrideRedirectResult=XU}_openPopup(e,t,r,i){return _(this,null,function*(){var o;Cr((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield S0(e,t,r,g_(),i);return bB(e,s,z_())})}_openRedirect(e,t,r,i){return _(this,null,function*(){yield this._originValidation(e);let o=yield S0(e,t,r,g_(),i);return LU(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Cr(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return _(this,null,function*(){let t=yield _B(e),r=new C_(e);return t.register("authEvent",i=>(Y(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(p_,{type:p_},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[p_];s!==void 0&&t(!!s),Wn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=cB(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return z0()||V0()||L_()}},nR=S_;var A0="@firebase/auth",R0="1.10.8";var A_=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return _(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Y(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function MB(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function PB(n){In(new kt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;Y(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:q0(n)},l=new I_(r,i,o,u);return TU(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),In(new kt("auth-internal",e=>{let t=pf(e.getProvider("auth").getImmediate());return(r=>new A_(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ve(A0,R0,MB(n)),Ve(A0,R0,"esm2017")}var kB=300,xB=zv("authIdTokenMaxAge")||kB,N0=null,OB=n=>e=>_(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>xB)return;let i=t?.token;N0!==i&&(N0=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function G_(n=Do()){let e=Ws(n,"auth");if(e.isInitialized())return e.getImmediate();let t=V_(n,{popupRedirectResolver:nR,persistence:[X0,Q0,H_]}),r=zv("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=OB(o.toString());B_(t,s,()=>s(t.currentUser)),gf(t,a=>s(a))}}let i=$v("auth");return i&&j_(t,`http://${i}`),t}function LB(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}EU({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=Tn("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",LB().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});PB("Browser");function iR(n){return new G(function(e){var t=mf(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var oR="auth",No=class{constructor(e){return e}},yu=class{constructor(){return Qs(oR)}};var W_=new B("angularfire2.auth-instances");function b$(n,e){let t=su(oR,n,e);return t&&new No(t)}function C$(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new No(r)}}var S$={provide:yu,deps:[[new Ht,W_]]},A$={provide:No,useFactory:b$,deps:[[new Ht,W_],Tr]};function sR(n,...e){return Ve("angularfire",mi.full,"auth"),Et([A$,S$,{provide:W_,useFactory:C$(n),multi:!0,deps:[fe,xe,yi,Co,[new Ht,Ys],...e]}])}var aR=We(iR,!0);var cR=We(G_,!0);var uR=We(q_,!0,2);var lR=We($_,!0,2);var dR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},hR={};var Sr,K_;(function(){var n;function e(T,v){function I(){}I.prototype=v.prototype,T.D=v.prototype,T.prototype=new I,T.prototype.constructor=T,T.C=function(w,D,C){for(var E=Array(arguments.length-2),er=2;er<arguments.length;er++)E[er-2]=arguments[er];return v.prototype[D].apply(w,E)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,v,I){I||(I=0);var w=Array(16);if(typeof v=="string")for(var D=0;16>D;++D)w[D]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(D=0;16>D;++D)w[D]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=T.g[0],I=T.g[1],D=T.g[2];var C=T.g[3],E=v+(C^I&(D^C))+w[0]+3614090360&4294967295;v=I+(E<<7&4294967295|E>>>25),E=C+(D^v&(I^D))+w[1]+3905402710&4294967295,C=v+(E<<12&4294967295|E>>>20),E=D+(I^C&(v^I))+w[2]+606105819&4294967295,D=C+(E<<17&4294967295|E>>>15),E=I+(v^D&(C^v))+w[3]+3250441966&4294967295,I=D+(E<<22&4294967295|E>>>10),E=v+(C^I&(D^C))+w[4]+4118548399&4294967295,v=I+(E<<7&4294967295|E>>>25),E=C+(D^v&(I^D))+w[5]+1200080426&4294967295,C=v+(E<<12&4294967295|E>>>20),E=D+(I^C&(v^I))+w[6]+2821735955&4294967295,D=C+(E<<17&4294967295|E>>>15),E=I+(v^D&(C^v))+w[7]+4249261313&4294967295,I=D+(E<<22&4294967295|E>>>10),E=v+(C^I&(D^C))+w[8]+1770035416&4294967295,v=I+(E<<7&4294967295|E>>>25),E=C+(D^v&(I^D))+w[9]+2336552879&4294967295,C=v+(E<<12&4294967295|E>>>20),E=D+(I^C&(v^I))+w[10]+4294925233&4294967295,D=C+(E<<17&4294967295|E>>>15),E=I+(v^D&(C^v))+w[11]+2304563134&4294967295,I=D+(E<<22&4294967295|E>>>10),E=v+(C^I&(D^C))+w[12]+1804603682&4294967295,v=I+(E<<7&4294967295|E>>>25),E=C+(D^v&(I^D))+w[13]+4254626195&4294967295,C=v+(E<<12&4294967295|E>>>20),E=D+(I^C&(v^I))+w[14]+2792965006&4294967295,D=C+(E<<17&4294967295|E>>>15),E=I+(v^D&(C^v))+w[15]+1236535329&4294967295,I=D+(E<<22&4294967295|E>>>10),E=v+(D^C&(I^D))+w[1]+4129170786&4294967295,v=I+(E<<5&4294967295|E>>>27),E=C+(I^D&(v^I))+w[6]+3225465664&4294967295,C=v+(E<<9&4294967295|E>>>23),E=D+(v^I&(C^v))+w[11]+643717713&4294967295,D=C+(E<<14&4294967295|E>>>18),E=I+(C^v&(D^C))+w[0]+3921069994&4294967295,I=D+(E<<20&4294967295|E>>>12),E=v+(D^C&(I^D))+w[5]+3593408605&4294967295,v=I+(E<<5&4294967295|E>>>27),E=C+(I^D&(v^I))+w[10]+38016083&4294967295,C=v+(E<<9&4294967295|E>>>23),E=D+(v^I&(C^v))+w[15]+3634488961&4294967295,D=C+(E<<14&4294967295|E>>>18),E=I+(C^v&(D^C))+w[4]+3889429448&4294967295,I=D+(E<<20&4294967295|E>>>12),E=v+(D^C&(I^D))+w[9]+568446438&4294967295,v=I+(E<<5&4294967295|E>>>27),E=C+(I^D&(v^I))+w[14]+3275163606&4294967295,C=v+(E<<9&4294967295|E>>>23),E=D+(v^I&(C^v))+w[3]+4107603335&4294967295,D=C+(E<<14&4294967295|E>>>18),E=I+(C^v&(D^C))+w[8]+1163531501&4294967295,I=D+(E<<20&4294967295|E>>>12),E=v+(D^C&(I^D))+w[13]+2850285829&4294967295,v=I+(E<<5&4294967295|E>>>27),E=C+(I^D&(v^I))+w[2]+4243563512&4294967295,C=v+(E<<9&4294967295|E>>>23),E=D+(v^I&(C^v))+w[7]+1735328473&4294967295,D=C+(E<<14&4294967295|E>>>18),E=I+(C^v&(D^C))+w[12]+2368359562&4294967295,I=D+(E<<20&4294967295|E>>>12),E=v+(I^D^C)+w[5]+4294588738&4294967295,v=I+(E<<4&4294967295|E>>>28),E=C+(v^I^D)+w[8]+2272392833&4294967295,C=v+(E<<11&4294967295|E>>>21),E=D+(C^v^I)+w[11]+1839030562&4294967295,D=C+(E<<16&4294967295|E>>>16),E=I+(D^C^v)+w[14]+4259657740&4294967295,I=D+(E<<23&4294967295|E>>>9),E=v+(I^D^C)+w[1]+2763975236&4294967295,v=I+(E<<4&4294967295|E>>>28),E=C+(v^I^D)+w[4]+1272893353&4294967295,C=v+(E<<11&4294967295|E>>>21),E=D+(C^v^I)+w[7]+4139469664&4294967295,D=C+(E<<16&4294967295|E>>>16),E=I+(D^C^v)+w[10]+3200236656&4294967295,I=D+(E<<23&4294967295|E>>>9),E=v+(I^D^C)+w[13]+681279174&4294967295,v=I+(E<<4&4294967295|E>>>28),E=C+(v^I^D)+w[0]+3936430074&4294967295,C=v+(E<<11&4294967295|E>>>21),E=D+(C^v^I)+w[3]+3572445317&4294967295,D=C+(E<<16&4294967295|E>>>16),E=I+(D^C^v)+w[6]+76029189&4294967295,I=D+(E<<23&4294967295|E>>>9),E=v+(I^D^C)+w[9]+3654602809&4294967295,v=I+(E<<4&4294967295|E>>>28),E=C+(v^I^D)+w[12]+3873151461&4294967295,C=v+(E<<11&4294967295|E>>>21),E=D+(C^v^I)+w[15]+530742520&4294967295,D=C+(E<<16&4294967295|E>>>16),E=I+(D^C^v)+w[2]+3299628645&4294967295,I=D+(E<<23&4294967295|E>>>9),E=v+(D^(I|~C))+w[0]+4096336452&4294967295,v=I+(E<<6&4294967295|E>>>26),E=C+(I^(v|~D))+w[7]+1126891415&4294967295,C=v+(E<<10&4294967295|E>>>22),E=D+(v^(C|~I))+w[14]+2878612391&4294967295,D=C+(E<<15&4294967295|E>>>17),E=I+(C^(D|~v))+w[5]+4237533241&4294967295,I=D+(E<<21&4294967295|E>>>11),E=v+(D^(I|~C))+w[12]+1700485571&4294967295,v=I+(E<<6&4294967295|E>>>26),E=C+(I^(v|~D))+w[3]+2399980690&4294967295,C=v+(E<<10&4294967295|E>>>22),E=D+(v^(C|~I))+w[10]+4293915773&4294967295,D=C+(E<<15&4294967295|E>>>17),E=I+(C^(D|~v))+w[1]+2240044497&4294967295,I=D+(E<<21&4294967295|E>>>11),E=v+(D^(I|~C))+w[8]+1873313359&4294967295,v=I+(E<<6&4294967295|E>>>26),E=C+(I^(v|~D))+w[15]+4264355552&4294967295,C=v+(E<<10&4294967295|E>>>22),E=D+(v^(C|~I))+w[6]+2734768916&4294967295,D=C+(E<<15&4294967295|E>>>17),E=I+(C^(D|~v))+w[13]+1309151649&4294967295,I=D+(E<<21&4294967295|E>>>11),E=v+(D^(I|~C))+w[4]+4149444226&4294967295,v=I+(E<<6&4294967295|E>>>26),E=C+(I^(v|~D))+w[11]+3174756917&4294967295,C=v+(E<<10&4294967295|E>>>22),E=D+(v^(C|~I))+w[2]+718787259&4294967295,D=C+(E<<15&4294967295|E>>>17),E=I+(C^(D|~v))+w[9]+3951481745&4294967295,T.g[0]=T.g[0]+v&4294967295,T.g[1]=T.g[1]+(D+(E<<21&4294967295|E>>>11))&4294967295,T.g[2]=T.g[2]+D&4294967295,T.g[3]=T.g[3]+C&4294967295}r.prototype.u=function(T,v){v===void 0&&(v=T.length);for(var I=v-this.blockSize,w=this.B,D=this.h,C=0;C<v;){if(D==0)for(;C<=I;)i(this,T,C),C+=this.blockSize;if(typeof T=="string"){for(;C<v;)if(w[D++]=T.charCodeAt(C++),D==this.blockSize){i(this,w),D=0;break}}else for(;C<v;)if(w[D++]=T[C++],D==this.blockSize){i(this,w),D=0;break}}this.h=D,this.o+=v},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var v=1;v<T.length-8;++v)T[v]=0;var I=8*this.o;for(v=T.length-8;v<T.length;++v)T[v]=I&255,I/=256;for(this.u(T),T=Array(16),v=I=0;4>v;++v)for(var w=0;32>w;w+=8)T[I++]=this.g[v]>>>w&255;return T};function o(T,v){var I=a;return Object.prototype.hasOwnProperty.call(I,T)?I[T]:I[T]=v(T)}function s(T,v){this.h=v;for(var I=[],w=!0,D=T.length-1;0<=D;D--){var C=T[D]|0;w&&C==v||(I[D]=C,w=!1)}this.g=I}var a={};function u(T){return-128<=T&&128>T?o(T,function(v){return new s([v|0],0>v?-1:0)}):new s([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return p;if(0>T)return M(l(-T));for(var v=[],I=1,w=0;T>=I;w++)v[w]=T/I|0,I*=4294967296;return new s(v,0)}function h(T,v){if(T.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(T.charAt(0)=="-")return M(h(T.substring(1),v));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(v,8)),w=p,D=0;D<T.length;D+=8){var C=Math.min(8,T.length-D),E=parseInt(T.substring(D,D+C),v);8>C?(C=l(Math.pow(v,C)),w=w.j(C).add(l(E))):(w=w.j(I),w=w.add(l(E)))}return w}var p=u(0),m=u(1),y=u(16777216);n=s.prototype,n.m=function(){if(P(this))return-M(this).m();for(var T=0,v=1,I=0;I<this.g.length;I++){var w=this.i(I);T+=(0<=w?w:4294967296+w)*v,v*=4294967296}return T},n.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(S(this))return"0";if(P(this))return"-"+M(this).toString(T);for(var v=l(Math.pow(T,6)),I=this,w="";;){var D=De(I,v).g;I=L(I,D.j(v));var C=((0<I.g.length?I.g[0]:I.h)>>>0).toString(T);if(I=D,S(I))return C+w;for(;6>C.length;)C="0"+C;w=C+w}},n.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function S(T){if(T.h!=0)return!1;for(var v=0;v<T.g.length;v++)if(T.g[v]!=0)return!1;return!0}function P(T){return T.h==-1}n.l=function(T){return T=L(this,T),P(T)?-1:S(T)?0:1};function M(T){for(var v=T.g.length,I=[],w=0;w<v;w++)I[w]=~T.g[w];return new s(I,~T.h).add(m)}n.abs=function(){return P(this)?M(this):this},n.add=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],w=0,D=0;D<=v;D++){var C=w+(this.i(D)&65535)+(T.i(D)&65535),E=(C>>>16)+(this.i(D)>>>16)+(T.i(D)>>>16);w=E>>>16,C&=65535,E&=65535,I[D]=E<<16|C}return new s(I,I[I.length-1]&-2147483648?-1:0)};function L(T,v){return T.add(M(v))}n.j=function(T){if(S(this)||S(T))return p;if(P(this))return P(T)?M(this).j(M(T)):M(M(this).j(T));if(P(T))return M(this.j(M(T)));if(0>this.l(y)&&0>T.l(y))return l(this.m()*T.m());for(var v=this.g.length+T.g.length,I=[],w=0;w<2*v;w++)I[w]=0;for(w=0;w<this.g.length;w++)for(var D=0;D<T.g.length;D++){var C=this.i(w)>>>16,E=this.i(w)&65535,er=T.i(D)>>>16,Da=T.i(D)&65535;I[2*w+2*D]+=E*Da,z(I,2*w+2*D),I[2*w+2*D+1]+=C*Da,z(I,2*w+2*D+1),I[2*w+2*D+1]+=E*er,z(I,2*w+2*D+1),I[2*w+2*D+2]+=C*er,z(I,2*w+2*D+2)}for(w=0;w<v;w++)I[w]=I[2*w+1]<<16|I[2*w];for(w=v;w<2*v;w++)I[w]=0;return new s(I,0)};function z(T,v){for(;(T[v]&65535)!=T[v];)T[v+1]+=T[v]>>>16,T[v]&=65535,v++}function Z(T,v){this.g=T,this.h=v}function De(T,v){if(S(v))throw Error("division by zero");if(S(T))return new Z(p,p);if(P(T))return v=De(M(T),v),new Z(M(v.g),M(v.h));if(P(v))return v=De(T,M(v)),new Z(M(v.g),v.h);if(30<T.g.length){if(P(T)||P(v))throw Error("slowDivide_ only works with positive integers.");for(var I=m,w=v;0>=w.l(T);)I=Ct(I),w=Ct(w);var D=Ie(I,1),C=Ie(w,1);for(w=Ie(w,2),I=Ie(I,2);!S(w);){var E=C.add(w);0>=E.l(T)&&(D=D.add(I),C=E),w=Ie(w,1),I=Ie(I,1)}return v=L(T,D.j(v)),new Z(D,v)}for(D=p;0<=T.l(v);){for(I=Math.max(1,Math.floor(T.m()/v.m())),w=Math.ceil(Math.log(I)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),C=l(I),E=C.j(v);P(E)||0<E.l(T);)I-=w,C=l(I),E=C.j(v);S(C)&&(C=m),D=D.add(C),T=L(T,E)}return new Z(D,T)}n.A=function(T){return De(this,T).h},n.and=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],w=0;w<v;w++)I[w]=this.i(w)&T.i(w);return new s(I,this.h&T.h)},n.or=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],w=0;w<v;w++)I[w]=this.i(w)|T.i(w);return new s(I,this.h|T.h)},n.xor=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],w=0;w<v;w++)I[w]=this.i(w)^T.i(w);return new s(I,this.h^T.h)};function Ct(T){for(var v=T.g.length+1,I=[],w=0;w<v;w++)I[w]=T.i(w)<<1|T.i(w-1)>>>31;return new s(I,T.h)}function Ie(T,v){var I=v>>5;v%=32;for(var w=T.g.length-I,D=[],C=0;C<w;C++)D[C]=0<v?T.i(C+I)>>>v|T.i(C+I+1)<<32-v:T.i(C+I);return new s(D,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,K_=hR.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,Sr=hR.Integer=s}).apply(typeof dR<"u"?dR:typeof self<"u"?self:typeof window<"u"?window:{});var vf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ar={};var Q_,N$,Xs,Y_,vu,_f,Z_,J_,X_;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof vf=="object"&&vf];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var b=c[g];if(!(b in f))break e;f=f[b]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,g=!1,b={next:function(){if(!g&&f<c.length){var A=f++;return{value:d(A,c[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,g),c.apply(d,b)}}return function(){return c.apply(d,arguments)}}function m(c,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function y(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function S(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,b,A){for(var x=Array(arguments.length-2),be=2;be<arguments.length;be++)x[be-2]=arguments[be];return d.prototype[b].apply(g,x)}}function P(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function M(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let b=c.length||0,A=g.length||0;c.length=b+A;for(let x=0;x<A;x++)c[b+x]=g[x]}else c.push(g)}}class L{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function z(c){return/^[\s\xa0]*$/.test(c)}function Z(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function De(c){return De[" "](c),c}De[" "]=function(){};var Ct=Z().indexOf("Gecko")!=-1&&!(Z().toLowerCase().indexOf("webkit")!=-1&&Z().indexOf("Edge")==-1)&&!(Z().indexOf("Trident")!=-1||Z().indexOf("MSIE")!=-1)&&Z().indexOf("Edge")==-1;function Ie(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function T(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function v(c){let d={};for(let f in c)d[f]=c[f];return d}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(c,d){let f,g;for(let b=1;b<arguments.length;b++){g=arguments[b];for(f in g)c[f]=g[f];for(let A=0;A<I.length;A++)f=I[A],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function D(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function C(c){a.setTimeout(()=>{throw c},0)}function E(){var c=Cp;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class er{constructor(){this.h=this.g=null}add(d,f){let g=Da.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Da=new L(()=>new dP,c=>c.reset());class dP{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let ba,Ca=!1,Cp=new er,Ew=()=>{let c=a.Promise.resolve(void 0);ba=()=>{c.then(hP)}};var hP=()=>{for(var c;c=E();){try{c.h.call(c.g)}catch(f){C(f)}var d=Da;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Ca=!1};function Or(){this.s=this.s,this.C=this.C}Or.prototype.s=!1,Or.prototype.ma=function(){this.s||(this.s=!0,this.N())},Or.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function gt(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}gt.prototype.h=function(){this.defaultPrevented=!0};var fP=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c})();function Sa(c,d){if(gt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(Ct){e:{try{De(d.nodeName);var b=!0;break e}catch{}b=!1}b||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:pP[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Sa.aa.h.call(this)}}S(Sa,gt);var pP={2:"touch",3:"pen",4:"mouse"};Sa.prototype.h=function(){Sa.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Aa="closure_listenable_"+(1e6*Math.random()|0),gP=0;function mP(c,d,f,g,b){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=b,this.key=++gP,this.da=this.fa=!1}function Wu(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Ku(c){this.src=c,this.g={},this.h=0}Ku.prototype.add=function(c,d,f,g,b){var A=c.toString();c=this.g[A],c||(c=this.g[A]=[],this.h++);var x=Ap(c,d,g,b);return-1<x?(d=c[x],f||(d.fa=!1)):(d=new mP(d,this.src,A,!!g,b),d.fa=f,c.push(d)),d};function Sp(c,d){var f=d.type;if(f in c.g){var g=c.g[f],b=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=b)&&Array.prototype.splice.call(g,b,1),A&&(Wu(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function Ap(c,d,f,g){for(var b=0;b<c.length;++b){var A=c[b];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==g)return b}return-1}var Rp="closure_lm_"+(1e6*Math.random()|0),Np={};function Iw(c,d,f,g,b){if(g&&g.once)return Tw(c,d,f,g,b);if(Array.isArray(d)){for(var A=0;A<d.length;A++)Iw(c,d[A],f,g,b);return null}return f=xp(f),c&&c[Aa]?c.K(d,f,l(g)?!!g.capture:!!g,b):ww(c,d,f,!1,g,b)}function ww(c,d,f,g,b,A){if(!d)throw Error("Invalid event type");var x=l(b)?!!b.capture:!!b,be=Pp(c);if(be||(c[Rp]=be=new Ku(c)),f=be.add(d,f,g,x,A),f.proxy)return f;if(g=yP(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)fP||(b=x),b===void 0&&(b=!1),c.addEventListener(d.toString(),g,b);else if(c.attachEvent)c.attachEvent(bw(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function yP(){function c(f){return d.call(c.src,c.listener,f)}let d=vP;return c}function Tw(c,d,f,g,b){if(Array.isArray(d)){for(var A=0;A<d.length;A++)Tw(c,d[A],f,g,b);return null}return f=xp(f),c&&c[Aa]?c.L(d,f,l(g)?!!g.capture:!!g,b):ww(c,d,f,!0,g,b)}function Dw(c,d,f,g,b){if(Array.isArray(d))for(var A=0;A<d.length;A++)Dw(c,d[A],f,g,b);else g=l(g)?!!g.capture:!!g,f=xp(f),c&&c[Aa]?(c=c.i,d=String(d).toString(),d in c.g&&(A=c.g[d],f=Ap(A,f,g,b),-1<f&&(Wu(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete c.g[d],c.h--)))):c&&(c=Pp(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Ap(d,f,g,b)),(f=-1<c?d[c]:null)&&Mp(f))}function Mp(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Aa])Sp(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(bw(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=Pp(d))?(Sp(f,c),f.h==0&&(f.src=null,d[Rp]=null)):Wu(c)}}}function bw(c){return c in Np?Np[c]:Np[c]="on"+c}function vP(c,d){if(c.da)c=!0;else{d=new Sa(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&Mp(c),c=f.call(g,d)}return c}function Pp(c){return c=c[Rp],c instanceof Ku?c:null}var kp="__closure_events_fn_"+(1e9*Math.random()>>>0);function xp(c){return typeof c=="function"?c:(c[kp]||(c[kp]=function(d){return c.handleEvent(d)}),c[kp])}function mt(){Or.call(this),this.i=new Ku(this),this.M=this,this.F=null}S(mt,Or),mt.prototype[Aa]=!0,mt.prototype.removeEventListener=function(c,d,f,g){Dw(this,c,d,f,g)};function St(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new gt(d,c);else if(d instanceof gt)d.target=d.target||c;else{var b=d;d=new gt(g,c),w(d,b)}if(b=!0,f)for(var A=f.length-1;0<=A;A--){var x=d.g=f[A];b=Qu(x,g,!0,d)&&b}if(x=d.g=c,b=Qu(x,g,!0,d)&&b,b=Qu(x,g,!1,d)&&b,f)for(A=0;A<f.length;A++)x=d.g=f[A],b=Qu(x,g,!1,d)&&b}mt.prototype.N=function(){if(mt.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)Wu(f[g]);delete c.g[d],c.h--}}this.F=null},mt.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},mt.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function Qu(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var b=!0,A=0;A<d.length;++A){var x=d[A];if(x&&!x.da&&x.capture==f){var be=x.listener,dt=x.ha||x.src;x.fa&&Sp(c.i,x),b=be.call(dt,g)!==!1&&b}}return b&&!g.defaultPrevented}function Cw(c,d,f){if(typeof c=="function")f&&(c=m(c,f));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function Sw(c){c.g=Cw(()=>{c.g=null,c.i&&(c.i=!1,Sw(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class _P extends Or{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Sw(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ra(c){Or.call(this),this.h=c,this.g={}}S(Ra,Or);var Aw=[];function Rw(c){Ie(c.g,function(d,f){this.g.hasOwnProperty(f)&&Mp(d)},c),c.g={}}Ra.prototype.N=function(){Ra.aa.N.call(this),Rw(this)},Ra.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Op=a.JSON.stringify,EP=a.JSON.parse,IP=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Lp(){}Lp.prototype.h=null;function Nw(c){return c.h||(c.h=c.i())}function Mw(){}var Na={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Fp(){gt.call(this,"d")}S(Fp,gt);function Vp(){gt.call(this,"c")}S(Vp,gt);var Pi={},Pw=null;function Yu(){return Pw=Pw||new mt}Pi.La="serverreachability";function kw(c){gt.call(this,Pi.La,c)}S(kw,gt);function Ma(c){let d=Yu();St(d,new kw(d))}Pi.STAT_EVENT="statevent";function xw(c,d){gt.call(this,Pi.STAT_EVENT,c),this.stat=d}S(xw,gt);function At(c){let d=Yu();St(d,new xw(d,c))}Pi.Ma="timingevent";function Ow(c,d){gt.call(this,Pi.Ma,c),this.size=d}S(Ow,gt);function Pa(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function ka(){this.g=!0}ka.prototype.xa=function(){this.g=!1};function wP(c,d,f,g,b,A){c.info(function(){if(c.g)if(A)for(var x="",be=A.split("&"),dt=0;dt<be.length;dt++){var pe=be[dt].split("=");if(1<pe.length){var yt=pe[0];pe=pe[1];var vt=yt.split("_");x=2<=vt.length&&vt[1]=="type"?x+(yt+"="+pe+"&"):x+(yt+"=redacted&")}}else x=null;else x=A;return"XMLHTTP REQ ("+g+") [attempt "+b+"]: "+d+`
`+f+`
`+x})}function TP(c,d,f,g,b,A,x){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+b+"]: "+d+`
`+f+`
`+A+" "+x})}function zo(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+bP(c,f)+(g?" "+g:"")})}function DP(c,d){c.info(function(){return"TIMEOUT: "+d})}ka.prototype.info=function(){};function bP(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var b=g[1];if(Array.isArray(b)&&!(1>b.length)){var A=b[0];if(A!="noop"&&A!="stop"&&A!="close")for(var x=1;x<b.length;x++)b[x]=""}}}}return Op(f)}catch{return d}}var Zu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Lw={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},jp;function Ju(){}S(Ju,Lp),Ju.prototype.g=function(){return new XMLHttpRequest},Ju.prototype.i=function(){return{}},jp=new Ju;function Lr(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new Ra(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Fw}function Fw(){this.i=null,this.g="",this.h=!1}var Vw={},Up={};function Bp(c,d,f){c.L=1,c.v=nl(tr(d)),c.m=f,c.P=!0,jw(c,null)}function jw(c,d){c.F=Date.now(),Xu(c),c.A=tr(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),Xw(f.i,"t",g),c.C=0,f=c.j.J,c.h=new Fw,c.g=yT(c.j,f?d:null,!c.m),0<c.O&&(c.M=new _P(m(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var b="readystatechange";Array.isArray(b)||(b&&(Aw[0]=b.toString()),b=Aw);for(var A=0;A<b.length;A++){var x=Iw(f,b[A],g||d.handleEvent,!1,d.h||d);if(!x)break;d.g[x.key]=x}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Ma(),wP(c.i,c.u,c.A,c.l,c.R,c.m)}Lr.prototype.ca=function(c){c=c.target;let d=this.M;d&&nr(c)==3?d.j():this.Y(c)},Lr.prototype.Y=function(c){try{if(c==this.g)e:{let vt=nr(this.g);var d=this.g.Ba();let Wo=this.g.Z();if(!(3>vt)&&(vt!=3||this.g&&(this.h.h||this.g.oa()||sT(this.g)))){this.J||vt!=4||d==7||(d==8||0>=Wo?Ma(3):Ma(2)),$p(this);var f=this.g.Z();this.X=f;t:if(Uw(this)){var g=sT(this.g);c="";var b=g.length,A=nr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ki(this),xa(this);var x="";break t}this.h.i=new a.TextDecoder}for(d=0;d<b;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(A&&d==b-1)});g.length=0,this.h.g+=c,this.C=0,x=this.h.g}else x=this.g.oa();if(this.o=f==200,TP(this.i,this.u,this.A,this.l,this.R,vt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var be,dt=this.g;if((be=dt.g?dt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(be)){var pe=be;break t}}pe=null}if(f=pe)zo(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Hp(this,f);else{this.o=!1,this.s=3,At(12),ki(this),xa(this);break e}}if(this.P){f=!0;let on;for(;!this.J&&this.C<x.length;)if(on=CP(this,x),on==Up){vt==4&&(this.s=4,At(14),f=!1),zo(this.i,this.l,null,"[Incomplete Response]");break}else if(on==Vw){this.s=4,At(15),zo(this.i,this.l,x,"[Invalid Chunk]"),f=!1;break}else zo(this.i,this.l,on,null),Hp(this,on);if(Uw(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),vt!=4||x.length!=0||this.h.h||(this.s=1,At(16),f=!1),this.o=this.o&&f,!f)zo(this.i,this.l,x,"[Invalid Chunked Response]"),ki(this),xa(this);else if(0<x.length&&!this.W){this.W=!0;var yt=this.j;yt.g==this&&yt.ba&&!yt.M&&(yt.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),Qp(yt),yt.M=!0,At(11))}}else zo(this.i,this.l,x,null),Hp(this,x);vt==4&&ki(this),this.o&&!this.J&&(vt==4?fT(this.j,this):(this.o=!1,Xu(this)))}else HP(this.g),f==400&&0<x.indexOf("Unknown SID")?(this.s=3,At(12)):(this.s=0,At(13)),ki(this),xa(this)}}}catch{}finally{}};function Uw(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function CP(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?Up:(f=Number(d.substring(f,g)),isNaN(f)?Vw:(g+=1,g+f>d.length?Up:(d=d.slice(g,g+f),c.C=g+f,d)))}Lr.prototype.cancel=function(){this.J=!0,ki(this)};function Xu(c){c.S=Date.now()+c.I,Bw(c,c.I)}function Bw(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Pa(m(c.ba,c),d)}function $p(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Lr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(DP(this.i,this.A),this.L!=2&&(Ma(),At(17)),ki(this),this.s=2,xa(this)):Bw(this,this.S-c)};function xa(c){c.j.G==0||c.J||fT(c.j,c)}function ki(c){$p(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,Rw(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function Hp(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||zp(f.h,c))){if(!c.K&&zp(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var b=g;if(b[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)al(f),ol(f);else break e;Kp(f),At(18)}}else f.za=b[1],0<f.za-f.T&&37500>b[2]&&f.F&&f.v==0&&!f.C&&(f.C=Pa(m(f.Za,f),6e3));if(1>=zw(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Oi(f,11)}else if((c.K||f.g==c)&&al(f),!z(d))for(b=f.Da.g.parse(d),d=0;d<b.length;d++){let pe=b[d];if(f.T=pe[0],pe=pe[1],f.G==2)if(pe[0]=="c"){f.K=pe[1],f.ia=pe[2];let yt=pe[3];yt!=null&&(f.la=yt,f.j.info("VER="+f.la));let vt=pe[4];vt!=null&&(f.Aa=vt,f.j.info("SVER="+f.Aa));let Wo=pe[5];Wo!=null&&typeof Wo=="number"&&0<Wo&&(g=1.5*Wo,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let on=c.g;if(on){let ul=on.g?on.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ul){var A=g.h;A.g||ul.indexOf("spdy")==-1&&ul.indexOf("quic")==-1&&ul.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(qp(A,A.h),A.h=null))}if(g.D){let Yp=on.g?on.g.getResponseHeader("X-HTTP-Session-Id"):null;Yp&&(g.ya=Yp,Ce(g.I,g.D,Yp))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var x=c;if(g.qa=mT(g,g.J?g.ia:null,g.W),x.K){qw(g.h,x);var be=x,dt=g.L;dt&&(be.I=dt),be.B&&($p(be),Xu(be)),g.g=x}else dT(g);0<f.i.length&&sl(f)}else pe[0]!="stop"&&pe[0]!="close"||Oi(f,7);else f.G==3&&(pe[0]=="stop"||pe[0]=="close"?pe[0]=="stop"?Oi(f,7):Wp(f):pe[0]!="noop"&&f.l&&f.l.ta(pe),f.v=0)}}Ma(4)}catch{}}var SP=class{constructor(c,d){this.g=c,this.map=d}};function $w(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Hw(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function zw(c){return c.h?1:c.g?c.g.size:0}function zp(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function qp(c,d){c.g?c.g.add(d):c.h=d}function qw(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}$w.prototype.cancel=function(){if(this.i=Gw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function Gw(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return P(c.i)}function AP(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function RP(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function Ww(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=RP(c),g=AP(c),b=g.length,A=0;A<b;A++)d.call(void 0,g[A],f&&f[A],c)}var Kw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function NP(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),b=null;if(0<=g){var A=c[f].substring(0,g);b=c[f].substring(g+1)}else A=c[f];d(A,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function xi(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof xi){this.h=c.h,el(this,c.j),this.o=c.o,this.g=c.g,tl(this,c.s),this.l=c.l;var d=c.i,f=new Fa;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),Qw(this,f),this.m=c.m}else c&&(d=String(c).match(Kw))?(this.h=!1,el(this,d[1]||"",!0),this.o=Oa(d[2]||""),this.g=Oa(d[3]||"",!0),tl(this,d[4]),this.l=Oa(d[5]||"",!0),Qw(this,d[6]||"",!0),this.m=Oa(d[7]||"")):(this.h=!1,this.i=new Fa(null,this.h))}xi.prototype.toString=function(){var c=[],d=this.j;d&&c.push(La(d,Yw,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(La(d,Yw,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(La(f,f.charAt(0)=="/"?kP:PP,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",La(f,OP)),c.join("")};function tr(c){return new xi(c)}function el(c,d,f){c.j=f?Oa(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function tl(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function Qw(c,d,f){d instanceof Fa?(c.i=d,LP(c.i,c.h)):(f||(d=La(d,xP)),c.i=new Fa(d,c.h))}function Ce(c,d,f){c.i.set(d,f)}function nl(c){return Ce(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Oa(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function La(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,MP),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function MP(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Yw=/[#\/\?@]/g,PP=/[#\?:]/g,kP=/[#\?]/g,xP=/[#\?@]/g,OP=/#/g;function Fa(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Fr(c){c.g||(c.g=new Map,c.h=0,c.i&&NP(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=Fa.prototype,n.add=function(c,d){Fr(this),this.i=null,c=qo(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function Zw(c,d){Fr(c),d=qo(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function Jw(c,d){return Fr(c),d=qo(c,d),c.g.has(d)}n.forEach=function(c,d){Fr(this),this.g.forEach(function(f,g){f.forEach(function(b){c.call(d,b,g,this)},this)},this)},n.na=function(){Fr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let b=c[g];for(let A=0;A<b.length;A++)f.push(d[g])}return f},n.V=function(c){Fr(this);let d=[];if(typeof c=="string")Jw(this,c)&&(d=d.concat(this.g.get(qo(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},n.set=function(c,d){return Fr(this),this.i=null,c=qo(this,c),Jw(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function Xw(c,d,f){Zw(c,d),0<f.length&&(c.i=null,c.g.set(qo(c,d),P(f)),c.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let A=encodeURIComponent(String(g)),x=this.V(g);for(g=0;g<x.length;g++){var b=A;x[g]!==""&&(b+="="+encodeURIComponent(String(x[g]))),c.push(b)}}return this.i=c.join("&")};function qo(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function LP(c,d){d&&!c.j&&(Fr(c),c.i=null,c.g.forEach(function(f,g){var b=g.toLowerCase();g!=b&&(Zw(this,g),Xw(this,b,f))},c)),c.j=d}function FP(c,d){let f=new ka;if(a.Image){let g=new Image;g.onload=y(Vr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=y(Vr,f,"TestLoadImage: error",!1,d,g),g.onabort=y(Vr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=y(Vr,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function VP(c,d){let f=new ka,g=new AbortController,b=setTimeout(()=>{g.abort(),Vr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(A=>{clearTimeout(b),A.ok?Vr(f,"TestPingServer: ok",!0,d):Vr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(b),Vr(f,"TestPingServer: error",!1,d)})}function Vr(c,d,f,g,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),g(f)}catch{}}function jP(){this.g=new IP}function UP(c,d,f){let g=f||"";try{Ww(c,function(b,A){let x=b;l(b)&&(x=Op(b)),d.push(g+A+"="+encodeURIComponent(x))})}catch(b){throw d.push(g+"type="+encodeURIComponent("_badmap")),b}}function Va(c){this.l=c.Ub||null,this.j=c.eb||!1}S(Va,Lp),Va.prototype.g=function(){return new rl(this.l,this.j)},Va.prototype.i=(function(c){return function(){return c}})({});function rl(c,d){mt.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(rl,mt),n=rl.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,Ua(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ja(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Ua(this)),this.g&&(this.readyState=3,Ua(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;eT(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function eT(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?ja(this):Ua(this),this.readyState==3&&eT(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,ja(this))},n.Qa=function(c){this.g&&(this.response=c,ja(this))},n.ga=function(){this.g&&ja(this)};function ja(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Ua(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function Ua(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(rl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function tT(c){let d="";return Ie(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function Gp(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=tT(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Ce(c,d,f))}function Oe(c){mt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(Oe,mt);var BP=/^https?$/i,$P=["POST","PUT"];n=Oe.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():jp.g(),this.v=this.o?Nw(this.o):Nw(jp),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(A){nT(this,A);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var b in g)f.set(b,g[b]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())f.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),b=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call($P,d,void 0))||g||b||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,x]of f)this.g.setRequestHeader(A,x);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{oT(this),this.u=!0,this.g.send(c),this.u=!1}catch(A){nT(this,A)}};function nT(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,rT(c),il(c)}function rT(c){c.A||(c.A=!0,St(c,"complete"),St(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,St(this,"complete"),St(this,"abort"),il(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),il(this,!0)),Oe.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?iT(this):this.bb())},n.bb=function(){iT(this)};function iT(c){if(c.h&&typeof s<"u"&&(!c.v[1]||nr(c)!=4||c.Z()!=2)){if(c.u&&nr(c)==4)Cw(c.Ea,0,c);else if(St(c,"readystatechange"),nr(c)==4){c.h=!1;try{let x=c.Z();e:switch(x){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=x===0){var b=String(c.D).match(Kw)[1]||null;!b&&a.self&&a.self.location&&(b=a.self.location.protocol.slice(0,-1)),g=!BP.test(b?b.toLowerCase():"")}f=g}if(f)St(c,"complete"),St(c,"success");else{c.m=6;try{var A=2<nr(c)?c.g.statusText:""}catch{A=""}c.l=A+" ["+c.Z()+"]",rT(c)}}finally{il(c)}}}}function il(c,d){if(c.g){oT(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||St(c,"ready");try{f.onreadystatechange=g}catch{}}}function oT(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function nr(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<nr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),EP(d)}};function sT(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function HP(c){let d={};c=(c.g&&2<=nr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(z(c[g]))continue;var f=D(c[g]);let b=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[b]||[];d[b]=A,A.push(f)}T(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ba(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function aT(c){this.Aa=0,this.i=[],this.j=new ka,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ba("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ba("baseRetryDelayMs",5e3,c),this.cb=Ba("retryDelaySeedMs",1e4,c),this.Wa=Ba("forwardChannelMaxRetries",2,c),this.wa=Ba("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new $w(c&&c.concurrentRequestLimit),this.Da=new jP,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=aT.prototype,n.la=8,n.G=1,n.connect=function(c,d,f,g){At(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=mT(this,null,this.W),sl(this)};function Wp(c){if(cT(c),c.G==3){var d=c.U++,f=tr(c.I);if(Ce(f,"SID",c.K),Ce(f,"RID",d),Ce(f,"TYPE","terminate"),$a(c,f),d=new Lr(c,c.j,d),d.L=2,d.v=nl(tr(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=yT(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Xu(d)}gT(c)}function ol(c){c.g&&(Qp(c),c.g.cancel(),c.g=null)}function cT(c){ol(c),c.u&&(a.clearTimeout(c.u),c.u=null),al(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function sl(c){if(!Hw(c.h)&&!c.s){c.s=!0;var d=c.Ga;ba||Ew(),Ca||(ba(),Ca=!0),Cp.add(d,c),c.B=0}}function zP(c,d){return zw(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Pa(m(c.Ga,c,d),pT(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let b=new Lr(this,this.j,c),A=this.o;if(this.S&&(A?(A=v(A),w(A,this.S)):A=this.S),this.m!==null||this.O||(b.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=lT(this,b,d),f=tr(this.I),Ce(f,"RID",c),Ce(f,"CVER",22),this.D&&Ce(f,"X-HTTP-Session-Id",this.D),$a(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(tT(A)))+"&"+d:this.m&&Gp(f,this.m,A)),qp(this.h,b),this.Ua&&Ce(f,"TYPE","init"),this.P?(Ce(f,"$req",d),Ce(f,"SID","null"),b.T=!0,Bp(b,f,null)):Bp(b,f,d),this.G=2}}else this.G==3&&(c?uT(this,c):this.i.length==0||Hw(this.h)||uT(this))};function uT(c,d){var f;d?f=d.l:f=c.U++;let g=tr(c.I);Ce(g,"SID",c.K),Ce(g,"RID",f),Ce(g,"AID",c.T),$a(c,g),c.m&&c.o&&Gp(g,c.m,c.o),f=new Lr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=lT(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),qp(c.h,f),Bp(f,g,d)}function $a(c,d){c.H&&Ie(c.H,function(f,g){Ce(d,g,f)}),c.l&&Ww({},function(f,g){Ce(d,g,f)})}function lT(c,d,f){f=Math.min(c.i.length,f);var g=c.l?m(c.l.Na,c.l,c):null;e:{var b=c.i;let A=-1;for(;;){let x=["count="+f];A==-1?0<f?(A=b[0].g,x.push("ofs="+A)):A=0:x.push("ofs="+A);let be=!0;for(let dt=0;dt<f;dt++){let pe=b[dt].g,yt=b[dt].map;if(pe-=A,0>pe)A=Math.max(0,b[dt].g-100),be=!1;else try{UP(yt,x,"req"+pe+"_")}catch{g&&g(yt)}}if(be){g=x.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function dT(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;ba||Ew(),Ca||(ba(),Ca=!0),Cp.add(d,c),c.v=0}}function Kp(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Pa(m(c.Fa,c),pT(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,hT(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Pa(m(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,At(10),ol(this),hT(this))};function Qp(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function hT(c){c.g=new Lr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=tr(c.qa);Ce(d,"RID","rpc"),Ce(d,"SID",c.K),Ce(d,"AID",c.T),Ce(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ce(d,"TO",c.ja),Ce(d,"TYPE","xmlhttp"),$a(c,d),c.m&&c.o&&Gp(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=nl(tr(d)),f.m=null,f.P=!0,jw(f,c)}n.Za=function(){this.C!=null&&(this.C=null,ol(this),Kp(this),At(19))};function al(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function fT(c,d){var f=null;if(c.g==d){al(c),Qp(c),c.g=null;var g=2}else if(zp(c.h,d))f=d.D,qw(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var b=c.B;g=Yu(),St(g,new Ow(g,f)),sl(c)}else dT(c);else if(b=d.s,b==3||b==0&&0<d.X||!(g==1&&zP(c,d)||g==2&&Kp(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),b){case 1:Oi(c,5);break;case 4:Oi(c,10);break;case 3:Oi(c,6);break;default:Oi(c,2)}}}function pT(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function Oi(c,d){if(c.j.info("Error code "+d),d==2){var f=m(c.fb,c),g=c.Xa;let b=!g;g=new xi(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||el(g,"https"),nl(g),b?FP(g.toString(),f):VP(g.toString(),f)}else At(2);c.G=0,c.l&&c.l.sa(d),gT(c),cT(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),At(2)):(this.j.info("Failed to ping google.com"),At(1))};function gT(c){if(c.G=0,c.ka=[],c.l){let d=Gw(c.h);(d.length!=0||c.i.length!=0)&&(M(c.ka,d),M(c.ka,c.i),c.h.i.length=0,P(c.i),c.i.length=0),c.l.ra()}}function mT(c,d,f){var g=f instanceof xi?tr(f):new xi(f);if(g.g!="")d&&(g.g=d+"."+g.g),tl(g,g.s);else{var b=a.location;g=b.protocol,d=d?d+"."+b.hostname:b.hostname,b=+b.port;var A=new xi(null);g&&el(A,g),d&&(A.g=d),b&&tl(A,b),f&&(A.l=f),g=A}return f=c.D,d=c.ya,f&&d&&Ce(g,f,d),Ce(g,"VER",c.la),$a(c,g),g}function yT(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Oe(new Va({eb:f})):new Oe(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function vT(){}n=vT.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function cl(){}cl.prototype.g=function(c,d){return new jt(c,d)};function jt(c,d){mt.call(this),this.g=new aT(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!z(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!z(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Go(this)}S(jt,mt),jt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},jt.prototype.close=function(){Wp(this.g)},jt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=Op(c),c=f);d.i.push(new SP(d.Ya++,c)),d.G==3&&sl(d)},jt.prototype.N=function(){this.g.l=null,delete this.j,Wp(this.g),delete this.g,jt.aa.N.call(this)};function _T(c){Fp.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}S(_T,Fp);function ET(){Vp.call(this),this.status=1}S(ET,Vp);function Go(c){this.g=c}S(Go,vT),Go.prototype.ua=function(){St(this.g,"a")},Go.prototype.ta=function(c){St(this.g,new _T(c))},Go.prototype.sa=function(c){St(this.g,new ET)},Go.prototype.ra=function(){St(this.g,"b")},cl.prototype.createWebChannel=cl.prototype.g,jt.prototype.send=jt.prototype.o,jt.prototype.open=jt.prototype.m,jt.prototype.close=jt.prototype.close,X_=Ar.createWebChannelTransport=function(){return new cl},J_=Ar.getStatEventTarget=function(){return Yu()},Z_=Ar.Event=Pi,_f=Ar.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Zu.NO_ERROR=0,Zu.TIMEOUT=8,Zu.HTTP_ERROR=6,vu=Ar.ErrorCode=Zu,Lw.COMPLETE="complete",Y_=Ar.EventType=Lw,Mw.EventType=Na,Na.OPEN="a",Na.CLOSE="b",Na.ERROR="c",Na.MESSAGE="d",mt.prototype.listen=mt.prototype.K,Xs=Ar.WebChannel=Mw,N$=Ar.FetchXmlHttpFactory=Va,Oe.prototype.listenOnce=Oe.prototype.L,Oe.prototype.getLastError=Oe.prototype.Ka,Oe.prototype.getLastErrorCode=Oe.prototype.Ba,Oe.prototype.getStatus=Oe.prototype.Z,Oe.prototype.getResponseJson=Oe.prototype.Oa,Oe.prototype.getResponseText=Oe.prototype.oa,Oe.prototype.send=Oe.prototype.ea,Oe.prototype.setWithCredentials=Oe.prototype.Ha,Q_=Ar.XhrIo=Oe}).apply(typeof vf<"u"?vf:typeof self<"u"?self:typeof window<"u"?window:{});var fR="@firebase/firestore",pR="4.8.0";var ct=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ct.UNAUTHENTICATED=new ct(null),ct.GOOGLE_CREDENTIALS=new ct("google-credentials-uid"),ct.FIRST_PARTY=new ct("first-party-uid"),ct.MOCK_USER=new ct("mock-user");var _a="11.10.0";var Lo=new zn("@firebase/firestore");function ea(){return Lo.logLevel}function V(n,...e){if(Lo.logLevel<=se.DEBUG){let t=e.map(HI);Lo.debug(`Firestore (${_a}): ${n}`,...t)}}function Rr(n,...e){if(Lo.logLevel<=se.ERROR){let t=e.map(HI);Lo.error(`Firestore (${_a}): ${n}`,...t)}}function bi(n,...e){if(Lo.logLevel<=se.WARN){let t=e.map(HI);Lo.warn(`Firestore (${_a}): ${n}`,...t)}}function HI(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function K(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,sN(n,r,t)}function sN(n,e,t){let r=`FIRESTORE (${_a}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Rr(r),new Error(r)}function Ee(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||sN(e,i,r)}function ee(n,e){return n}var N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},O=class extends Wt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Dn=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Cf=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},oE=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ct.UNAUTHENTICATED))}shutdown(){}},sE=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},aE=class{constructor(e){this.t=e,this.currentUser=ct.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ee(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new Dn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Dn,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>_(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{V("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(V("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Dn)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(V("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ee(typeof r.accessToken=="string",31837,{l:r}),new Cf(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Ee(e===null||typeof e=="string",2055,{h:e}),new ct(e)}},cE=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=ct.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},uE=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new cE(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(ct.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Sf=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},lE=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Kt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ee(this.o===void 0,3512);let r=o=>{o.error!=null&&V("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,V("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{V("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):V("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Sf(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ee(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Sf(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function M$(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function aN(){return new TextEncoder}var Du=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=M$(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function ie(n,e){return n<e?-1:n>e?1:0}function dE(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return ie(r,i);{let o=aN(),s=P$(o.encode(gR(n,t)),o.encode(gR(e,t)));return s!==0?s:ie(r,i)}}t+=r>65535?2:1}return ie(n.length,e.length)}function gR(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function P$(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return ie(n[t],e[t]);return ie(n.length,e.length)}function aa(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var mR="__name__",Af=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&K(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&K(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return ie(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):dE(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Sr.fromString(e.substring(4,e.length-2))}},Pe=class n extends Af{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new O(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},k$=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Yt=class n extends Af{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return k$.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===mR}static keyField(){return new n([mR])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new O(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new O(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new O(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new O(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var H=class n{constructor(e){this.path=e}static fromPath(e){return new n(Pe.fromString(e))}static fromName(e){return new n(Pe.fromString(e).popFirst(5))}static empty(){return new n(Pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Pe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Pe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Pe(e.slice()))}};function cN(n,e,t){if(!t)throw new O(N.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function x$(n,e,t,r){if(e===!0&&r===!0)throw new O(N.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function yR(n){if(!H.isDocumentKey(n))throw new O(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function vR(n){if(H.isDocumentKey(n))throw new O(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function uN(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function sp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":K(12329,{type:typeof n})}function bn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new O(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=sp(n);throw new O(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Ze(n,e){let t={typeString:n};return e&&(t.value=e),t}function ju(n,e){if(!uN(n))throw new O(N.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new O(N.INVALID_ARGUMENT,t);return!0}var _R=-62135596800,ER=1e6,Je=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*ER);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new O(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new O(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<_R)throw new O(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new O(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ER}_compareTo(e){return this.seconds===e.seconds?ie(this.nanoseconds,e.nanoseconds):ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ju(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-_R;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Je._jsonSchemaVersion="firestore/timestamp/1.0",Je._jsonSchema={type:Ze("string",Je._jsonSchemaVersion),seconds:Ze("number"),nanoseconds:Ze("number")};var ne=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Je(0,0))}static max(){return new n(new Je(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var bu=-1,hE=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};hE.UNKNOWN_ID=-1;function O$(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ne.fromTimestamp(r===1e9?new Je(t+1,0):new Je(t,r));return new Fo(i,H.empty(),e)}function L$(n){return new Fo(n.readTime,n.key,bu)}var Fo=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ne.min(),H.empty(),bu)}static max(){return new n(ne.max(),H.empty(),bu)}};function F$(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=H.comparator(n.documentKey,e.documentKey),t!==0?t:ie(n.largestBatchId,e.largestBatchId))}var V$="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",fE=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Ea(n){return _(this,null,function*(){if(n.code!==N.FAILED_PRECONDITION||n.message!==V$)throw n;V("LocalStore","Unexpectedly lost primary lease")})}var k=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&K(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function j$(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ia(n){return n.name==="IndexedDbTransactionError"}var zI=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),qI=-1;function ap(n){return n==null}function Cu(n){return n===0&&1/n==-1/0}function U$(n){return typeof n=="number"&&Number.isInteger(n)&&!Cu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var lN="";function B$(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=IR(e)),e=$$(n.get(t),e);return IR(e)}function $$(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case lN:t+="";break;default:t+=o}}return t}function IR(n){return n+lN+""}var H$="remoteDocuments",dN="owner";var hN="mutationQueues";var fN="mutations";var pN="documentMutations",z$="remoteDocumentsV14";var gN="remoteDocumentGlobal";var mN="targets";var yN="targetDocuments";var vN="targetGlobal",_N="collectionParents";var EN="clientMetadata";var IN="bundles";var wN="namedQueries";var q$="indexConfiguration";var G$="indexState";var W$="indexEntries";var TN="documentOverlays";var K$="globals";var Q$=[hN,fN,pN,H$,mN,dN,vN,yN,EN,gN,_N,IN,wN],gie=[...Q$,TN],Y$=[hN,fN,pN,z$,mN,dN,vN,yN,EN,gN,_N,IN,wN,TN],Z$=Y$,J$=[...Z$,q$,G$,W$];var mie=[...J$,K$];function wR(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Mi(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function DN(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var je=class n{constructor(e,t){this.comparator=e,this.root=t||Kn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Kn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Kn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ia(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ia(this.root,e,this.comparator,!1)}getReverseIterator(){return new ia(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ia(this.root,e,this.comparator,!0)}},ia=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Kn=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw K(43730,{key:this.key,value:this.value});if(this.right.isRed())throw K(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw K(27949);return e+(this.isRed()?0:1)}};Kn.EMPTY=null,Kn.RED=!0,Kn.BLACK=!1;Kn.EMPTY=new class{constructor(){this.size=0}get key(){throw K(57766)}get value(){throw K(16141)}get color(){throw K(16727)}get left(){throw K(29726)}get right(){throw K(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new Kn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var ut=class n{constructor(e){this.comparator=e,this.data=new je(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Rf(this.data.getIterator())}getIteratorFrom(e){return new Rf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Rf=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var rn=class n{constructor(e){this.fields=e,e.sort(Yt.comparator)}static empty(){return new n([])}unionWith(e){let t=new ut(Yt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return aa(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Nf=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var bt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Nf("Invalid base64 string: "+o):o}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};bt.EMPTY_BYTE_STRING=new bt("");var X$=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Nr(n){if(Ee(!!n,39018),typeof n=="string"){let e=0,t=X$.exec(n);if(Ee(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Me(n.seconds),nanos:Me(n.nanos)}}function Me(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Mr(n){return typeof n=="string"?bt.fromBase64String(n):bt.fromUint8Array(n)}var bN="server_timestamp",CN="__type__",SN="__previous_value__",AN="__local_write_time__";function GI(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[CN])===null||t===void 0?void 0:t.stringValue)===bN}function cp(n){let e=n.mapValue.fields[SN];return GI(e)?cp(e):e}function Su(n){let e=Nr(n.mapValue.fields[AN].timestampValue);return new Je(e.seconds,e.nanos)}var pE=class{constructor(e,t,r,i,o,s,a,u,l,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},Mf="(default)",Pf=class n{constructor(e,t){this.projectId=e,this.database=t||Mf}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Mf}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var WI="__type__",RN="__max__",Ef={mapValue:{fields:{__type__:{stringValue:RN}}}},KI="__vector__",ca="value";function Ci(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?GI(n)?4:MN(n)?9007199254740991:NN(n)?10:11:K(28295,{value:n})}function Jn(n,e){if(n===e)return!0;let t=Ci(n);if(t!==Ci(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Su(n).isEqual(Su(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Nr(i.timestampValue),a=Nr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return Mr(i.bytesValue).isEqual(Mr(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return Me(i.geoPointValue.latitude)===Me(o.geoPointValue.latitude)&&Me(i.geoPointValue.longitude)===Me(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return Me(i.integerValue)===Me(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Me(i.doubleValue),a=Me(o.doubleValue);return s===a?Cu(s)===Cu(a):isNaN(s)&&isNaN(a)}return!1})(n,e);case 9:return aa(n.arrayValue.values||[],e.arrayValue.values||[],Jn);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(wR(s)!==wR(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!Jn(s[u],a[u])))return!1;return!0})(n,e);default:return K(52216,{left:n})}}function Au(n,e){return(n.values||[]).find(t=>Jn(t,e))!==void 0}function ua(n,e){if(n===e)return 0;let t=Ci(n),r=Ci(e);if(t!==r)return ie(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ie(n.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=Me(o.integerValue||o.doubleValue),u=Me(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1})(n,e);case 3:return TR(n.timestampValue,e.timestampValue);case 4:return TR(Su(n),Su(e));case 5:return dE(n.stringValue,e.stringValue);case 6:return(function(o,s){let a=Mr(o),u=Mr(s);return a.compareTo(u)})(n.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=ie(a[l],u[l]);if(h!==0)return h}return ie(a.length,u.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=ie(Me(o.latitude),Me(s.latitude));return a!==0?a:ie(Me(o.longitude),Me(s.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return DR(n.arrayValue,e.arrayValue);case 10:return(function(o,s){var a,u,l,h;let p=o.fields||{},m=s.fields||{},y=(a=p[ca])===null||a===void 0?void 0:a.arrayValue,S=(u=m[ca])===null||u===void 0?void 0:u.arrayValue,P=ie(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=S?.values)===null||h===void 0?void 0:h.length)||0);return P!==0?P:DR(y,S)})(n.mapValue,e.mapValue);case 11:return(function(o,s){if(o===Ef.mapValue&&s===Ef.mapValue)return 0;if(o===Ef.mapValue)return 1;if(s===Ef.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=dE(u[p],h[p]);if(m!==0)return m;let y=ua(a[u[p]],l[h[p]]);if(y!==0)return y}return ie(u.length,h.length)})(n.mapValue,e.mapValue);default:throw K(23264,{le:t})}}function TR(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ie(n,e);let t=Nr(n),r=Nr(e),i=ie(t.seconds,r.seconds);return i!==0?i:ie(t.nanos,r.nanos)}function DR(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=ua(t[i],r[i]);if(o)return o}return ie(t.length,r.length)}function la(n){return gE(n)}function gE(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=Nr(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Mr(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return H.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=gE(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${gE(t.fields[s])}`;return i+"}"})(n.mapValue):K(61005,{value:n})}function Tf(n){switch(Ci(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=cp(n);return e?16+Tf(e):16;case 5:return 2*n.stringValue.length;case 6:return Mr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+Tf(o),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Mi(r.fields,(o,s)=>{i+=o.length+Tf(s)}),i})(n.mapValue);default:throw K(13486,{value:n})}}function bR(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function mE(n){return!!n&&"integerValue"in n}function QI(n){return!!n&&"arrayValue"in n}function CR(n){return!!n&&"nullValue"in n}function SR(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Df(n){return!!n&&"mapValue"in n}function NN(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[WI])===null||t===void 0?void 0:t.stringValue)===KI}function Eu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Mi(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Eu(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Eu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function MN(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===RN}var vie={mapValue:{fields:{[WI]:{stringValue:KI},[ca]:{arrayValue:{}}}}};var Qt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Df(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Eu(t)}setAll(e){let t=Yt.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Eu(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Df(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Jn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Df(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Mi(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Eu(this.value))}};function PN(n){let e=[];return Mi(n.fields,(t,r)=>{let i=new Yt([t]);if(Df(r)){let o=PN(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new rn(e)}var Cn=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,ne.min(),ne.min(),ne.min(),Qt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ne.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ne.min(),ne.min(),Qt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ne.min(),ne.min(),Qt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var da=class{constructor(e,t){this.position=e,this.inclusive=t}};function AR(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=H.comparator(H.fromName(s.referenceValue),t.key):r=ua(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function RR(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Jn(n.position[t],e.position[t]))return!1;return!0}var Vo=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function eH(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var kf=class{},Ye=class n extends kf{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new vE(e,t,r):t==="array-contains"?new IE(e,r):t==="in"?new wE(e,r):t==="not-in"?new TE(e,r):t==="array-contains-any"?new DE(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new _E(e,r):new EE(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ua(t,this.value)):t!==null&&Ci(this.value)===Ci(t)&&this.matchesComparison(ua(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return K(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Sn=class n extends kf{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return kN(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function kN(n){return n.op==="and"}function xN(n){return tH(n)&&kN(n)}function tH(n){for(let e of n.filters)if(e instanceof Sn)return!1;return!0}function yE(n){if(n instanceof Ye)return n.field.canonicalString()+n.op.toString()+la(n.value);if(xN(n))return n.filters.map(e=>yE(e)).join(",");{let e=n.filters.map(t=>yE(t)).join(",");return`${n.op}(${e})`}}function ON(n,e){return n instanceof Ye?(function(r,i){return i instanceof Ye&&r.op===i.op&&r.field.isEqual(i.field)&&Jn(r.value,i.value)})(n,e):n instanceof Sn?(function(r,i){return i instanceof Sn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&ON(s,i.filters[a]),!0):!1})(n,e):void K(19439)}function LN(n){return n instanceof Ye?(function(t){return`${t.field.canonicalString()} ${t.op} ${la(t.value)}`})(n):n instanceof Sn?(function(t){return t.op.toString()+" {"+t.getFilters().map(LN).join(" ,")+"}"})(n):"Filter"}var vE=class extends Ye{constructor(e,t,r){super(e,t,r),this.key=H.fromName(r.referenceValue)}matches(e){let t=H.comparator(e.key,this.key);return this.matchesComparison(t)}},_E=class extends Ye{constructor(e,t){super(e,"in",t),this.keys=FN("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},EE=class extends Ye{constructor(e,t){super(e,"not-in",t),this.keys=FN("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function FN(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>H.fromName(r.referenceValue))}var IE=class extends Ye{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return QI(t)&&Au(t.arrayValue,this.value)}},wE=class extends Ye{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Au(this.value.arrayValue,t)}},TE=class extends Ye{constructor(e,t){super(e,"not-in",t)}matches(e){if(Au(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Au(this.value.arrayValue,t)}},DE=class extends Ye{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!QI(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Au(this.value.arrayValue,r))}};var bE=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function NR(n,e=null,t=[],r=[],i=null,o=null,s=null){return new bE(n,e,t,r,i,o,s)}function YI(n){let e=ee(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>yE(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),ap(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>la(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>la(r)).join(",")),e.Pe=t}return e.Pe}function ZI(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!eH(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!ON(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!RR(n.startAt,e.startAt)&&RR(n.endAt,e.endAt)}function CE(n){return H.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Si=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function nH(n,e,t,r,i,o,s,a){return new Si(n,e,t,r,i,o,s,a)}function up(n){return new Si(n)}function MR(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function VN(n){return n.collectionGroup!==null}function Iu(n){let e=ee(n);if(e.Te===null){e.Te=[];let t=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new ut(Yt.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new Vo(o,r))}),t.has(Yt.keyField().canonicalString())||e.Te.push(new Vo(Yt.keyField(),r))}return e.Te}function Qn(n){let e=ee(n);return e.Ie||(e.Ie=rH(e,Iu(n))),e.Ie}function rH(n,e){if(n.limitType==="F")return NR(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Vo(i.field,o)});let t=n.endAt?new da(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new da(n.startAt.position,n.startAt.inclusive):null;return NR(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function SE(n,e){let t=n.filters.concat([e]);return new Si(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function AE(n,e,t){return new Si(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function lp(n,e){return ZI(Qn(n),Qn(e))&&n.limitType===e.limitType}function jN(n){return`${YI(Qn(n))}|lt:${n.limitType}`}function ta(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>LN(i)).join(", ")}]`),ap(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>la(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>la(i)).join(",")),`Target(${r})`})(Qn(n))}; limitType=${n.limitType})`}function dp(n,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):H.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,i){for(let o of Iu(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,u){let l=AR(s,a,u);return s.inclusive?l<=0:l<0})(r.startAt,Iu(r),i)||r.endAt&&!(function(s,a,u){let l=AR(s,a,u);return s.inclusive?l>=0:l>0})(r.endAt,Iu(r),i))})(n,e)}function iH(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function UN(n){return(e,t)=>{let r=!1;for(let i of Iu(n)){let o=oH(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function oH(n,e,t){let r=n.field.isKeyField()?H.comparator(e.key,t.key):(function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?ua(u,l):K(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return K(19790,{direction:n.dir})}}var Pr=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Mi(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return DN(this.inner)}size(){return this.innerSize}};var sH=new je(H.comparator);function kr(){return sH}var BN=new je(H.comparator);function _u(...n){let e=BN;for(let t of n)e=e.insert(t.key,t);return e}function $N(n){let e=BN;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Mo(){return wu()}function HN(){return wu()}function wu(){return new Pr(n=>n.toString(),(n,e)=>n.isEqual(e))}var aH=new je(H.comparator),cH=new ut(H.comparator);function ue(...n){let e=cH;for(let t of n)e=e.add(t);return e}var uH=new ut(ie);function lH(){return uH}function JI(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Cu(e)?"-0":e}}function zN(n){return{integerValue:""+n}}function dH(n,e){return U$(e)?zN(e):JI(n,e)}var ha=class{constructor(){this._=void 0}};function hH(n,e,t){return n instanceof fa?(function(i,o){let s={fields:{[CN]:{stringValue:bN},[AN]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&GI(o)&&(o=cp(o)),o&&(s.fields[SN]=o),{mapValue:s}})(t,e):n instanceof jo?GN(n,e):n instanceof Uo?WN(n,e):(function(i,o){let s=qN(i,o),a=PR(s)+PR(i.Ee);return mE(s)&&mE(i.Ee)?zN(a):JI(i.serializer,a)})(n,e)}function fH(n,e,t){return n instanceof jo?GN(n,e):n instanceof Uo?WN(n,e):t}function qN(n,e){return n instanceof pa?(function(r){return mE(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var fa=class extends ha{},jo=class extends ha{constructor(e){super(),this.elements=e}};function GN(n,e){let t=KN(e);for(let r of n.elements)t.some(i=>Jn(i,r))||t.push(r);return{arrayValue:{values:t}}}var Uo=class extends ha{constructor(e){super(),this.elements=e}};function WN(n,e){let t=KN(e);for(let r of n.elements)t=t.filter(i=>!Jn(i,r));return{arrayValue:{values:t}}}var pa=class extends ha{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function PR(n){return Me(n.integerValue||n.doubleValue)}function KN(n){return QI(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function pH(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof jo&&i instanceof jo||r instanceof Uo&&i instanceof Uo?aa(r.elements,i.elements,Jn):r instanceof pa&&i instanceof pa?Jn(r.Ee,i.Ee):r instanceof fa&&i instanceof fa})(n.transform,e.transform)}var RE=class{constructor(e,t){this.version=e,this.transformResults=t}},Yn=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function bf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var ga=class{};function QN(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Ru(n.key,Yn.none()):new Bo(n.key,n.data,Yn.none());{let t=n.data,r=Qt.empty(),i=new ut(Yt.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Xn(n.key,r,new rn(i.toArray()),Yn.none())}}function gH(n,e,t){n instanceof Bo?(function(i,o,s){let a=i.value.clone(),u=xR(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(n,e,t):n instanceof Xn?(function(i,o,s){if(!bf(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=xR(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(YN(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()})(n,e,t):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,t)}function Tu(n,e,t,r){return n instanceof Bo?(function(o,s,a,u){if(!bf(o.precondition,s))return a;let l=o.value.clone(),h=OR(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(n,e,t,r):n instanceof Xn?(function(o,s,a,u){if(!bf(o.precondition,s))return a;let l=OR(o.fieldTransforms,u,s),h=s.data;return h.setAll(YN(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))})(n,e,t,r):(function(o,s,a){return bf(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(n,e,t)}function mH(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=qN(r.transform,i||null);o!=null&&(t===null&&(t=Qt.empty()),t.set(r.field,o))}return t||null}function kR(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&aa(r,i,(o,s)=>pH(o,s))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Bo=class extends ga{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Xn=class extends ga{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function YN(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function xR(n,e,t){let r=new Map;Ee(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,fH(s,a,t[i]))}return r}function OR(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,hH(o,s,e))}return r}var Ru=class extends ga{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},NE=class extends ga{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var ME=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&gH(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Tu(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Tu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=HN();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=QN(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(ne.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ue())}isEqual(e){return this.batchId===e.batchId&&aa(this.mutations,e.mutations,(t,r)=>kR(t,r))&&aa(this.baseMutations,e.baseMutations,(t,r)=>kR(t,r))}},PE=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ee(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return aH})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var kE=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var xE=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Ke,he;function yH(n){switch(n){case N.OK:return K(64938);case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0;default:return K(15467,{code:n})}}function ZN(n){if(n===void 0)return Rr("GRPC error has no .code"),N.UNKNOWN;switch(n){case Ke.OK:return N.OK;case Ke.CANCELLED:return N.CANCELLED;case Ke.UNKNOWN:return N.UNKNOWN;case Ke.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case Ke.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case Ke.INTERNAL:return N.INTERNAL;case Ke.UNAVAILABLE:return N.UNAVAILABLE;case Ke.UNAUTHENTICATED:return N.UNAUTHENTICATED;case Ke.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case Ke.NOT_FOUND:return N.NOT_FOUND;case Ke.ALREADY_EXISTS:return N.ALREADY_EXISTS;case Ke.PERMISSION_DENIED:return N.PERMISSION_DENIED;case Ke.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case Ke.ABORTED:return N.ABORTED;case Ke.OUT_OF_RANGE:return N.OUT_OF_RANGE;case Ke.UNIMPLEMENTED:return N.UNIMPLEMENTED;case Ke.DATA_LOSS:return N.DATA_LOSS;default:return K(39323,{code:n})}}(he=Ke||(Ke={}))[he.OK=0]="OK",he[he.CANCELLED=1]="CANCELLED",he[he.UNKNOWN=2]="UNKNOWN",he[he.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",he[he.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",he[he.NOT_FOUND=5]="NOT_FOUND",he[he.ALREADY_EXISTS=6]="ALREADY_EXISTS",he[he.PERMISSION_DENIED=7]="PERMISSION_DENIED",he[he.UNAUTHENTICATED=16]="UNAUTHENTICATED",he[he.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",he[he.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",he[he.ABORTED=10]="ABORTED",he[he.OUT_OF_RANGE=11]="OUT_OF_RANGE",he[he.UNIMPLEMENTED=12]="UNIMPLEMENTED",he[he.INTERNAL=13]="INTERNAL",he[he.UNAVAILABLE=14]="UNAVAILABLE",he[he.DATA_LOSS=15]="DATA_LOSS";var LR=null;var vH=new Sr([4294967295,4294967295],0);function FR(n){let e=aN().encode(n),t=new K_;return t.update(e),new Uint8Array(t.digest())}function VR(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Sr([t,r],0),new Sr([i,o],0)]}var OE=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Po(`Invalid padding: ${t}`);if(r<0)throw new Po(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Po(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Po(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Sr.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(Sr.fromNumber(r)));return i.compare(vH)===1&&(i=new Sr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=FR(e),[r,i]=VR(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let t=FR(e),[r,i]=VR(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Po=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var xf=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Nu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ne.min(),i,new je(ie),kr(),ue())}},Nu=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ue(),ue(),ue())}};var oa=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},Of=class{constructor(e,t){this.targetId=e,this.De=t}},Lf=class{constructor(e,t,r=bt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Ff=class{constructor(){this.ve=0,this.Ce=jR(),this.Fe=bt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ue(),t=ue(),r=ue();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:K(38017,{changeType:o})}}),new Nu(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=jR()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Ee(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},LE=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=kr(),this.je=If(),this.Je=If(),this.He=new je(ie)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:K(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let o=i.target;if(CE(o))if(r===0){let s=new H(o.path);this.Xe(t,s,Cn.newNoDocument(s,ne.min()))}else Ee(r===1,20013,{expectedCount:r});else{let s=this.ot(t);if(s!==r){let a=this._t(e),u=a?this.ut(a,e,s):1;if(u!==0){this.rt(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,l)}LR?.ct((function(h,p,m,y,S){var P,M,L,z,Z,De;let Ct={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},Ie=p.unchangedNames;return Ie&&(Ct.bloomFilter={applied:S===0,hashCount:(P=Ie?.hashCount)!==null&&P!==void 0?P:0,bitmapLength:(z=(L=(M=Ie?.bits)===null||M===void 0?void 0:M.bitmap)===null||L===void 0?void 0:L.length)!==null&&z!==void 0?z:0,padding:(De=(Z=Ie?.bits)===null||Z===void 0?void 0:Z.padding)!==null&&De!==void 0?De:0,mightContain:T=>{var v;return(v=y?.mightContain(T))!==null&&v!==void 0&&v}}),Ct})(s,e.De,this.We.lt(),a,u))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=Mr(r).toUint8Array()}catch(u){if(u instanceof Nf)return bi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new OE(s,i,o)}catch(u){return bi(u instanceof Po?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.fe===0?null:a}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,o,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&CE(a.target)){let u=new H(a.target.path);this.Tt(u).has(s)||this.It(s,u)||this.Xe(s,u,Cn.newNoDocument(u,e))}o.Ne&&(t.set(s,o.Le()),o.ke())}});let r=ue();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.st(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new xf(e,t,this.He,this.ze,r);return this.ze=kr(),this.je=If(),this.Je=If(),this.He=new je(ie),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Ff,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new ut(ie),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new ut(ie),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||V("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Ff),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function If(){return new je(H.comparator)}function jR(){return new je(H.comparator)}var _H={asc:"ASCENDING",desc:"DESCENDING"},EH={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},IH={and:"AND",or:"OR"},FE=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function VE(n,e){return n.useProto3Json||ap(e)?e:{value:e}}function Vf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function JN(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function wH(n,e){return Vf(n,e.toTimestamp())}function Zn(n){return Ee(!!n,49232),ne.fromTimestamp((function(t){let r=Nr(t);return new Je(r.seconds,r.nanos)})(n))}function XI(n,e){return jE(n,e).canonicalString()}function jE(n,e){let t=(function(i){return new Pe(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function XN(n){let e=Pe.fromString(n);return Ee(iM(e),10190,{key:e.toString()}),e}function UE(n,e){return XI(n.databaseId,e.path)}function eE(n,e){let t=XN(e);if(t.get(1)!==n.databaseId.projectId)throw new O(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new O(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new H(tM(t))}function eM(n,e){return XI(n.databaseId,e)}function TH(n){let e=XN(n);return e.length===4?Pe.emptyPath():tM(e)}function BE(n){return new Pe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function tM(n){return Ee(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function UR(n,e,t){return{name:UE(n,e),fields:t.value.mapValue.fields}}function DH(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:K(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(l,h){return l.useProto3Json?(Ee(h===void 0||typeof h=="string",58123),bt.fromBase64String(h||"")):(Ee(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),bt.fromUint8Array(h||new Uint8Array))})(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(l){let h=l.code===void 0?N.UNKNOWN:ZN(l.code);return new O(h,l.message||"")})(s);t=new Lf(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=eE(n,r.document.name),o=Zn(r.document.updateTime),s=r.document.createTime?Zn(r.document.createTime):ne.min(),a=new Qt({mapValue:{fields:r.document.fields}}),u=Cn.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new oa(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=eE(n,r.document),o=r.readTime?Zn(r.readTime):ne.min(),s=Cn.newNoDocument(i,o),a=r.removedTargetIds||[];t=new oa([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=eE(n,r.document),o=r.removedTargetIds||[];t=new oa([],o,i,null)}else{if(!("filter"in e))return K(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new xE(i,o),a=r.targetId;t=new Of(a,s)}}return t}function bH(n,e){let t;if(e instanceof Bo)t={update:UR(n,e.key,e.value)};else if(e instanceof Ru)t={delete:UE(n,e.key)};else if(e instanceof Xn)t={update:UR(n,e.key,e.data),updateMask:xH(e.fieldMask)};else{if(!(e instanceof NE))return K(16599,{Rt:e.type});t={verify:UE(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let a=s.transform;if(a instanceof fa)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof jo)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Uo)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof pa)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw K(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:wH(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:K(27497)})(n,e.precondition)),t}function CH(n,e){return n&&n.length>0?(Ee(e!==void 0,14353),n.map(t=>(function(i,o){let s=i.updateTime?Zn(i.updateTime):Zn(o);return s.isEqual(ne.min())&&(s=Zn(o)),new RE(s,i.transformResults||[])})(t,e))):[]}function SH(n,e){return{documents:[eM(n,e.path)]}}function AH(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=eM(n,i);let o=(function(l){if(l.length!==0)return rM(Sn.create(l,"and"))})(e.filters);o&&(t.structuredQuery.where=o);let s=(function(l){if(l.length!==0)return l.map(h=>(function(m){return{field:na(m.field),direction:MH(m.dir)}})(h))})(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=VE(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{Vt:t,parent:i}}function RH(n){let e=TH(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Ee(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=(function(p){let m=nM(p);return m instanceof Sn&&xN(m)?m.getFilters():[m]})(t.where));let s=[];t.orderBy&&(s=(function(p){return p.map(m=>(function(S){return new Vo(ra(S.field),(function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(S.direction))})(m))})(t.orderBy));let a=null;t.limit&&(a=(function(p){let m;return m=typeof p=="object"?p.value:p,ap(m)?null:m})(t.limit));let u=null;t.startAt&&(u=(function(p){let m=!!p.before,y=p.values||[];return new da(y,m)})(t.startAt));let l=null;return t.endAt&&(l=(function(p){let m=!p.before,y=p.values||[];return new da(y,m)})(t.endAt)),nH(e,i,s,o,a,"F",u,l)}function NH(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return K(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function nM(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=ra(t.unaryFilter.field);return Ye.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=ra(t.unaryFilter.field);return Ye.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=ra(t.unaryFilter.field);return Ye.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=ra(t.unaryFilter.field);return Ye.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return K(61313);default:return K(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ye.create(ra(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return K(58110);default:return K(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Sn.create(t.compositeFilter.filters.map(r=>nM(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return K(1026)}})(t.compositeFilter.op))})(n):K(30097,{filter:n})}function MH(n){return _H[n]}function PH(n){return EH[n]}function kH(n){return IH[n]}function na(n){return{fieldPath:n.canonicalString()}}function ra(n){return Yt.fromServerFormat(n.fieldPath)}function rM(n){return n instanceof Ye?(function(t){if(t.op==="=="){if(SR(t.value))return{unaryFilter:{field:na(t.field),op:"IS_NAN"}};if(CR(t.value))return{unaryFilter:{field:na(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(SR(t.value))return{unaryFilter:{field:na(t.field),op:"IS_NOT_NAN"}};if(CR(t.value))return{unaryFilter:{field:na(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:na(t.field),op:PH(t.op),value:t.value}}})(n):n instanceof Sn?(function(t){let r=t.getFilters().map(i=>rM(i));return r.length===1?r[0]:{compositeFilter:{op:kH(t.op),filters:r}}})(n):K(54877,{filter:n})}function xH(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function iM(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Mu=class n{constructor(e,t,r,i,o=ne.min(),s=ne.min(),a=bt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var $E=class{constructor(e){this.gt=e}};function OH(n){let e=RH({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?AE(e,e.limit,"L"):e}var jf=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(Me(e.integerValue));else if("doubleValue"in e){let r=Me(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),Cu(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=Nr(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(Mr(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?MN(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):NN(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):K(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let o=e.fields||{};this.Ct(t,53);let s=ca,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(Me(a)),this.xt(s,t),this.Dt(o[s],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),H.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};jf.Ut=new jf;var HE=class{constructor(){this.Dn=new zE}addToCollectionParentIndex(e,t){return this.Dn.add(t),k.resolve()}getCollectionParents(e,t){return k.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return k.resolve()}deleteFieldIndex(e,t){return k.resolve()}deleteAllFieldIndexes(e){return k.resolve()}createTargetIndexes(e,t){return k.resolve()}getDocumentsMatchingTarget(e,t){return k.resolve(null)}getIndexType(e,t){return k.resolve(0)}getFieldIndexes(e,t){return k.resolve([])}getNextCollectionGroupToUpdate(e){return k.resolve(null)}getMinOffset(e,t){return k.resolve(Fo.min())}getMinOffsetFromCollectionGroup(e,t){return k.resolve(Fo.min())}updateCollectionGroup(e,t,r){return k.resolve()}updateIndexEntries(e,t){return k.resolve()}},zE=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new ut(Pe.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ut(Pe.comparator)).toArray()}};var _ie=new Uint8Array(0);var BR={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},oM=41943040,nn=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};nn.DEFAULT_COLLECTION_PERCENTILE=10,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,nn.DEFAULT=new nn(oM,nn.DEFAULT_COLLECTION_PERCENTILE,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),nn.DISABLED=new nn(-1,0,0);var Pu=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var $R="LruGarbageCollector",LH=1048576;function HR([n,e],[t,r]){let i=ie(n,t);return i===0?ie(e,r):i}var qE=class{constructor(e){this.Tr=e,this.buffer=new ut(HR),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();HR(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},GE=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){V($R,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>_(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ia(t)?V($R,"Ignoring IndexedDB error during garbage collection: ",t):yield Ea(t)}yield this.Rr(3e5)}))}},WE=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return k.resolve(zI.ue);let r=new qE(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(V("LruGarbageCollector","Garbage collection skipped; disabled"),k.resolve(BR)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(V("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),BR):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(V("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),ea()<=se.DEBUG&&V("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),k.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function FH(n,e){return new WE(n,e)}var KE=class{constructor(){this.changes=new Pr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Cn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?k.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var QE=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var YE=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Tu(r.mutation,i,rn.empty(),Je.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ue()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ue()){let i=Mo();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=_u();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Mo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ue()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=kr(),s=wu(),a=(function(){return wu()})();return t.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Xn)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),Tu(h.mutation,l,h.mutation.getFieldMask(),Je.now())):s.set(l.key,rn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new QE(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=wu(),i=new je((s,a)=>s-a),o=ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let h=r.get(u)||rn.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||ue()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=HN();h.forEach(m=>{if(!o.has(m)){let y=QN(t.get(m),r.get(m));y!==null&&p.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return k.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(s){return H.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):VN(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):k.resolve(Mo()),a=bu,u=o;return s.next(l=>k.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?k.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,ue())).next(h=>({batchId:a,changes:$N(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new H(t)).next(r=>{let i=_u();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=_u();return this.indexManager.getCollectionParents(e,o).next(a=>k.forEach(a,u=>{let l=(function(p,m){return new Si(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,Cn.newInvalidDocument(h)))});let a=_u();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&Tu(h.mutation,l,rn.empty(),Je.now()),dp(t,l)&&(a=a.insert(u,l))}),a})}};var ZE=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return k.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Zn(i.createTime)}})(t)),k.resolve()}getNamedQuery(e,t){return k.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(i){return{name:i.name,query:OH(i.bundledQuery),readTime:Zn(i.readTime)}})(t)),k.resolve()}};var JE=class{constructor(){this.overlays=new je(H.comparator),this.kr=new Map}getOverlay(e,t){return k.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Mo();return k.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.wt(e,t,o)}),k.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),k.resolve()}getOverlaysForCollection(e,t,r){let i=Mo(),o=t.length+1,s=new H(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return k.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new je((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=Mo(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Mo(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return k.resolve(a)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new kE(t,r));let o=this.kr.get(t);o===void 0&&(o=ue(),this.kr.set(t,o)),this.kr.set(t,o.add(r.key))}};var XE=class{constructor(){this.sessionToken=bt.EMPTY_BYTE_STRING}getSessionToken(e){return k.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,k.resolve()}};var ku=class{constructor(){this.qr=new ut(Qe.Qr),this.$r=new ut(Qe.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new Qe(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new Qe(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new H(new Pe([])),r=new Qe(t,e),i=new Qe(t,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new H(new Pe([])),r=new Qe(t,e),i=new Qe(t,e+1),o=ue();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Qe(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Qe=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return H.comparator(e.key,t.key)||ie(e.Hr,t.Hr)}static Ur(e,t){return ie(e.Hr,t.Hr)||H.comparator(e.key,t.key)}};var eI=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new ut(Qe.Qr)}checkEmpty(e){return k.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new ME(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new Qe(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return k.resolve(s)}lookupMutationBatch(e,t){return k.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),o=i<0?0:i;return k.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return k.resolve(this.mutationQueue.length===0?qI:this.er-1)}getAllMutationBatches(e){return k.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Qe(t,0),i=new Qe(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),k.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ut(ie);return t.forEach(i=>{let o=new Qe(i,0),s=new Qe(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),k.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;H.isDocumentKey(o)||(o=o.child(""));let s=new Qe(new H(o),0),a=new ut(ie);return this.Yr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Hr)),!0)},s),k.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Ee(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return k.forEach(t.mutations,i=>{let o=new Qe(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new Qe(t,0),i=this.Yr.firstAfterOrEqual(r);return k.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,k.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var tI=class{constructor(e){this.ni=e,this.docs=(function(){return new je(H.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return k.resolve(r?r.document.mutableCopy():Cn.newInvalidDocument(t))}getEntries(e,t){let r=kr();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Cn.newInvalidDocument(i))}),k.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=kr(),s=t.path,a=new H(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||F$(L$(h),r)<=0||(i.has(h.key)||dp(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return k.resolve(o)}getAllFromCollectionGroup(e,t,r,i){K(9500)}ri(e,t){return k.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new nI(this)}getSize(e){return k.resolve(this.size)}},nI=class extends KE{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),k.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var rI=class{constructor(e){this.persistence=e,this.ii=new Pr(t=>YI(t),ZI),this.lastRemoteSnapshotVersion=ne.min(),this.highestTargetId=0,this.si=0,this.oi=new ku,this.targetCount=0,this._i=Pu.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),k.resolve()}getLastRemoteSnapshotVersion(e){return k.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return k.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),k.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),k.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new Pu(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,k.resolve()}updateTargetData(e,t){return this.hr(t),k.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,k.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),k.waitFor(o).next(()=>i)}getTargetCount(e){return k.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return k.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),k.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),k.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),k.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return k.resolve(r)}containsKey(e,t){return k.resolve(this.oi.containsKey(t))}};var Uf=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new zI(0),this.ci=!1,this.ci=!0,this.li=new XE,this.referenceDelegate=e(this),this.hi=new rI(this),this.indexManager=new HE,this.remoteDocumentCache=(function(i){return new tI(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new $E(t),this.Ti=new ZE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new JE,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new eI(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){V("MemoryPersistence","Starting transaction:",e);let i=new iI(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,t){return k.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},iI=class extends fE{constructor(e){super(),this.currentSequenceNumber=e}},oI=class n{constructor(e){this.persistence=e,this.Ai=new ku,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw K(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),k.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),k.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),k.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return k.forEach(this.mi,r=>{let i=H.fromPath(r);return this.fi(e,i).next(o=>{o||t.removeEntry(i,ne.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return k.or([()=>k.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},Bf=class n{constructor(e,t){this.persistence=e,this.gi=new Pr(r=>B$(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=FH(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return k.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return k.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?k.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,t).next(a=>{a||(r++,o.removeEntry(s,ne.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),k.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),k.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),k.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),k.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Tf(e.data.value)),t}Sr(e,t,r){return k.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return k.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var sI=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=ue(),i=ue();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var aI=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var cI=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return VA()?8:j$(at())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ps(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new aI;return this.ws(e,t,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,t,s,a.size)})}).next(()=>o.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(ea()<=se.DEBUG&&V("QueryEngine","SDK will not create cache indexes for query:",ta(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),k.resolve()):(ea()<=se.DEBUG&&V("QueryEngine","Query:",ta(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(ea()<=se.DEBUG&&V("QueryEngine","The SDK decides to create cache indexes for query:",ta(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qn(t))):k.resolve())}ps(e,t){if(MR(t))return k.resolve(null);let r=Qn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=AE(t,null,"F"),r=Qn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ue(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.bs(t,a);return this.Ds(t,l,s,u.readTime)?this.ps(e,AE(t,null,"F")):this.vs(e,l,t,u)}))})))}ys(e,t,r,i){return MR(t)||i.isEqual(ne.min())?k.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(t,o);return this.Ds(t,s,r,i)?k.resolve(null):(ea()<=se.DEBUG&&V("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ta(t)),this.vs(e,s,t,O$(i,bu)).next(a=>a))})}bs(e,t){let r=new ut(UN(e));return t.forEach((i,o)=>{dp(e,o)&&(r=r.add(o))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,t,r){return ea()<=se.DEBUG&&V("QueryEngine","Using full collection scan to execute query:",ta(t)),this.gs.getDocumentsMatchingQuery(e,t,Fo.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var ew="LocalStore",VH=3e8,uI=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new je(ie),this.Ms=new Pr(o=>YI(o),ZI),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new YE(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function jH(n,e,t,r){return new uI(n,e,t,r)}function sM(n,e){return _(this,null,function*(){let t=ee(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=ue();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({Bs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function UH(n,e){let t=ee(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return(function(a,u,l,h){let p=l.batch,m=p.keys(),y=k.resolve();return m.forEach(S=>{y=y.next(()=>h.getEntry(u,S)).next(P=>{let M=l.docVersions.get(S);Ee(M!==null,48541),P.version.compareTo(M)<0&&(p.applyToRemoteDocument(P,l),P.isValidDocument()&&(P.setReadTime(l.commitVersion),h.addEntry(P)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))})(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let u=ue();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function aM(n){let e=ee(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function BH(n,e){let t=ee(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(t.hi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.hi.addMatchingKeys(o,h.addedDocuments,p)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(bt.EMPTY_BYTE_STRING,ne.min()).withLastLimboFreeSnapshotVersion(ne.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),(function(P,M,L){return P.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=VH?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0})(m,y,h)&&a.push(t.hi.updateTargetData(o,y))});let u=kr(),l=ue();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push($H(o,s,e.documentUpdates).next(h=>{u=h.Ls,l=h.ks})),!r.isEqual(ne.min())){let h=t.hi.getLastRemoteSnapshotVersion(o).next(p=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return k.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.Fs=i,o))}function $H(n,e,t){let r=ue(),i=ue();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=kr();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ne.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):V(ew,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ls:s,ks:i}})}function HH(n,e){let t=ee(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=qI),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function zH(n,e){let t=ee(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(o=>o?(i=o,k.resolve(i)):t.hi.allocateTargetId(r).next(s=>(i=new Mu(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}function lI(n,e,t){return _(this,null,function*(){let r=ee(n),i=r.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Ia(s))throw s;V(ew,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function zR(n,e,t){let r=ee(n),i=ne.min(),o=ue();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(u,l,h){let p=ee(u),m=p.Ms.get(h);return m!==void 0?k.resolve(p.Fs.get(m)):p.hi.getTargetData(l,h)})(r,s,Qn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,t?i:ne.min(),t?o:ue())).next(a=>(qH(r,iH(e),a),{documents:a,qs:o})))}function qH(n,e,t){let r=n.xs.get(e)||ne.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.xs.set(e,r)}var $f=class{constructor(){this.activeTargetIds=lH()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var dI=class{constructor(){this.Fo=new $f,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new $f,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var hI=class{xo(e){}shutdown(){}};var qR="ConnectivityMonitor",Hf=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){V(qR,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){V(qR,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var wf=null;function fI(){return wf===null?wf=(function(){return 268435456+Math.round(2147483648*Math.random())})():wf++,"0x"+wf.toString(16)}var tE="RestConnection",GH={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},pI=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Mf?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,o){let s=fI(),a=this.Go(e,t.toUriEncodedString());V(tE,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,i,o);let{host:l}=new URL(a),h=fi(l);return this.jo(e,a,u,r,h).then(p=>(V(tE,`Received RPC '${e}' ${s}: `,p),p),p=>{throw bi(tE,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Jo(e,t,r,i,o,s){return this.Wo(e,t,r,i,o)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+_a})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,t){let r=GH[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var gI=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var Dt="WebChannelConnection",mI=class extends pI{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,o){let s=fI();return new Promise((a,u)=>{let l=new Q_;l.setWithCredentials(!0),l.listenOnce(Y_.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case vu.NO_ERROR:let p=l.getResponseJson();V(Dt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case vu.TIMEOUT:V(Dt,`RPC '${e}' ${s} timed out`),u(new O(N.DEADLINE_EXCEEDED,"Request time out"));break;case vu.HTTP_ERROR:let m=l.getStatus();if(V(Dt,`RPC '${e}' ${s} failed with status:`,m,"response text:",l.getResponseText()),m>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let S=y?.error;if(S&&S.status&&S.message){let P=(function(L){let z=L.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(z)>=0?z:N.UNKNOWN})(S.status);u(new O(P,S.message))}else u(new O(N.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new O(N.UNAVAILABLE,"Connection failed."));break;default:K(9055,{c_:e,streamId:s,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{V(Dt,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);V(Dt,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",h,r,15)})}P_(e,t,r){let i=fI(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=X_(),a=J_(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=o.join("");V(Dt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u);this.T_(p);let m=!1,y=!1,S=new gI({Ho:M=>{y?V(Dt,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(m||(V(Dt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),V(Dt,`RPC '${e}' stream ${i} sending:`,M),p.send(M))},Yo:()=>p.close()}),P=(M,L,z)=>{M.listen(L,Z=>{try{z(Z)}catch(De){setTimeout(()=>{throw De},0)}})};return P(p,Xs.EventType.OPEN,()=>{y||(V(Dt,`RPC '${e}' stream ${i} transport opened.`),S.s_())}),P(p,Xs.EventType.CLOSE,()=>{y||(y=!0,V(Dt,`RPC '${e}' stream ${i} transport closed`),S.__(),this.I_(p))}),P(p,Xs.EventType.ERROR,M=>{y||(y=!0,bi(Dt,`RPC '${e}' stream ${i} transport errored. Name:`,M.name,"Message:",M.message),S.__(new O(N.UNAVAILABLE,"The operation could not be completed")))}),P(p,Xs.EventType.MESSAGE,M=>{var L;if(!y){let z=M.data[0];Ee(!!z,16349);let Z=z,De=Z?.error||((L=Z[0])===null||L===void 0?void 0:L.error);if(De){V(Dt,`RPC '${e}' stream ${i} received error:`,De);let Ct=De.status,Ie=(function(I){let w=Ke[I];if(w!==void 0)return ZN(w)})(Ct),T=De.message;Ie===void 0&&(Ie=N.INTERNAL,T="Unknown error status: "+Ct+" with message "+De.message),y=!0,S.__(new O(Ie,T)),p.close()}else V(Dt,`RPC '${e}' stream ${i} received:`,z),S.a_(z)}}),P(a,Z_.STAT_EVENT,M=>{M.stat===_f.PROXY?V(Dt,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===_f.NOPROXY&&V(Dt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.o_()},0),S}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function nE(){return typeof document<"u"?document:null}function hp(n){return new FE(n,!0)}var zf=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&V("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var GR="PersistentStream",qf=class{constructor(e,t,r,i,o,s,a,u){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new zf(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return _(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return _(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return _(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===N.RESOURCE_EXHAUSTED?(Rr(t.toString()),Rr("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(t)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new O(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>_(this,null,function*(){this.state=0,this.start()}))}G_(e){return V(GR,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(V(GR,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},yI=class extends qf{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=DH(this.serializer,e),r=(function(o){if(!("targetChange"in o))return ne.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ne.min():s.readTime?Zn(s.readTime):ne.min()})(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=BE(this.serializer),t.addTarget=(function(o,s){let a,u=s.target;if(a=CE(u)?{documents:SH(o,u)}:{query:AH(o,u).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=JN(o,s.resumeToken);let l=VE(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(ne.min())>0){a.readTime=Vf(o,s.snapshotVersion.toTimestamp());let l=VE(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let r=NH(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=BE(this.serializer),t.removeTarget=e,this.k_(t)}},vI=class extends qf{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Ee(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ee(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Ee(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=CH(e.writeResults,e.commitTime),r=Zn(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=BE(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>bH(this.serializer,r))};this.k_(t)}};var _I=class{},EI=class extends _I{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new O(N.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,jE(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new O(N.UNKNOWN,o.toString())})}Jo(e,t,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,jE(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new O(N.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},II=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Rr(t),this._a=!1):V("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var $o="RemoteStore",wI=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(()=>_(this,null,function*(){Ho(this)&&(V($o,"Restarting streams for network reachability change."),yield(function(u){return _(this,null,function*(){let l=ee(u);l.Ia.add(4),yield Uu(l),l.Aa.set("Unknown"),l.Ia.delete(4),yield fp(l)})})(this))}))}),this.Aa=new II(r,i)}};function fp(n){return _(this,null,function*(){if(Ho(n))for(let e of n.da)yield e(!0)})}function Uu(n){return _(this,null,function*(){for(let e of n.da)yield e(!1)})}function cM(n,e){let t=ee(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),iw(t)?rw(t):wa(t).x_()&&nw(t,e))}function tw(n,e){let t=ee(n),r=wa(t);t.Ta.delete(e),r.x_()&&uM(t,e),t.Ta.size===0&&(r.x_()?r.B_():Ho(t)&&t.Aa.set("Unknown"))}function nw(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ne.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}wa(n).H_(e)}function uM(n,e){n.Ra.$e(e),wa(n).Y_(e)}function rw(n){n.Ra=new LE({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),wa(n).start(),n.Aa.aa()}function iw(n){return Ho(n)&&!wa(n).M_()&&n.Ta.size>0}function Ho(n){return ee(n).Ia.size===0}function lM(n){n.Ra=void 0}function WH(n){return _(this,null,function*(){n.Aa.set("Online")})}function KH(n){return _(this,null,function*(){n.Ta.forEach((e,t)=>{nw(n,e)})})}function QH(n,e){return _(this,null,function*(){lM(n),iw(n)?(n.Aa.la(e),rw(n)):n.Aa.set("Unknown")})}function YH(n,e,t){return _(this,null,function*(){if(n.Aa.set("Online"),e instanceof Lf&&e.state===2&&e.cause)try{yield(function(i,o){return _(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))})})(n,e)}catch(r){V($o,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Gf(n,r)}else if(e instanceof oa?n.Ra.Ye(e):e instanceof Of?n.Ra.it(e):n.Ra.et(e),!t.isEqual(ne.min()))try{let r=yield aM(n.localStore);t.compareTo(r)>=0&&(yield(function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Ta.get(l);h&&o.Ta.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.Ta.get(u);if(!h)return;o.Ta.set(u,h.withResumeToken(bt.EMPTY_BYTE_STRING,h.snapshotVersion)),uM(o,u);let p=new Mu(h.target,u,l,h.sequenceNumber);nw(o,p)}),o.remoteSyncer.applyRemoteEvent(a)})(n,t))}catch(r){V($o,"Failed to raise snapshot:",r),yield Gf(n,r)}})}function Gf(n,e,t){return _(this,null,function*(){if(!Ia(e))throw e;n.Ia.add(1),yield Uu(n),n.Aa.set("Offline"),t||(t=()=>aM(n.localStore)),n.asyncQueue.enqueueRetryable(()=>_(null,null,function*(){V($o,"Retrying IndexedDB access"),yield t(),n.Ia.delete(1),yield fp(n)}))})}function dM(n,e){return e().catch(t=>Gf(n,t,e))}function pp(n){return _(this,null,function*(){let e=ee(n),t=Ai(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:qI;for(;ZH(e);)try{let i=yield HH(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,JH(e,i)}catch(i){yield Gf(e,i)}hM(e)&&fM(e)})}function ZH(n){return Ho(n)&&n.Pa.length<10}function JH(n,e){n.Pa.push(e);let t=Ai(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function hM(n){return Ho(n)&&!Ai(n).M_()&&n.Pa.length>0}function fM(n){Ai(n).start()}function XH(n){return _(this,null,function*(){Ai(n).na()})}function e4(n){return _(this,null,function*(){let e=Ai(n);for(let t of n.Pa)e.X_(t.mutations)})}function t4(n,e,t){return _(this,null,function*(){let r=n.Pa.shift(),i=PE.from(r,e,t);yield dM(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield pp(n)})}function n4(n,e){return _(this,null,function*(){e&&Ai(n).Z_&&(yield(function(r,i){return _(this,null,function*(){if((function(s){return yH(s)&&s!==N.ABORTED})(i.code)){let o=r.Pa.shift();Ai(r).N_(),yield dM(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield pp(r)}})})(n,e)),hM(n)&&fM(n)})}function WR(n,e){return _(this,null,function*(){let t=ee(n);t.asyncQueue.verifyOperationInProgress(),V($o,"RemoteStore received new credentials");let r=Ho(t);t.Ia.add(3),yield Uu(t),r&&t.Aa.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),yield fp(t)})}function r4(n,e){return _(this,null,function*(){let t=ee(n);e?(t.Ia.delete(2),yield fp(t)):e||(t.Ia.add(2),yield Uu(t),t.Aa.set("Unknown"))})}function wa(n){return n.Va||(n.Va=(function(t,r,i){let o=ee(t);return o.ia(),new yI(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:WH.bind(null,n),e_:KH.bind(null,n),n_:QH.bind(null,n),J_:YH.bind(null,n)}),n.da.push(e=>_(null,null,function*(){e?(n.Va.N_(),iw(n)?rw(n):n.Aa.set("Unknown")):(yield n.Va.stop(),lM(n))}))),n.Va}function Ai(n){return n.ma||(n.ma=(function(t,r,i){let o=ee(t);return o.ia(),new vI(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:XH.bind(null,n),n_:n4.bind(null,n),ea:e4.bind(null,n),ta:t4.bind(null,n)}),n.da.push(e=>_(null,null,function*(){e?(n.ma.N_(),yield pp(n)):(yield n.ma.stop(),n.Pa.length>0&&(V($o,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}var TI=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Dn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new O(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function ow(n,e){if(Rr("AsyncQueue",`${e}: ${n}`),Ia(n))return new O(N.UNAVAILABLE,`${e}: ${n}`);throw n}var Wf=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||H.comparator(t.key,r.key):(t,r)=>H.comparator(t.key,r.key),this.keyedMap=_u(),this.sortedSet=new je(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Kf=class{constructor(){this.fa=new je(H.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):K(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},ma=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Wf.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&lp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var DI=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},bI=class{constructor(){this.queries=KR(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=ee(t),o=i.queries;i.queries=KR(),o.forEach((s,a)=>{for(let u of a.wa)u.onError(r)})})(this,new O(N.ABORTED,"Firestore shutting down"))}};function KR(){return new Pr(n=>jN(n),lp)}function sw(n,e){return _(this,null,function*(){let t=ee(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new DI,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield t.onListen(i,!0);break;case 1:o.ya=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=ow(s,`Initialization of query '${ta(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&cw(t)})}function aw(n,e){return _(this,null,function*(){let t=ee(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function i4(n,e){let t=ee(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&cw(t)}function o4(n,e,t){let r=ee(n),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(t);r.queries.delete(e)}function cw(n){n.Da.forEach(e=>{e.next()})}var CI,QR;(QR=CI||(CI={})).Fa="default",QR.Cache="cache";var xu=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new ma(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=ma.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==CI.Cache}};var Qf=class{constructor(e){this.key=e}},Yf=class{constructor(e){this.key=e}},SI=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ue(),this.mutatedKeys=ue(),this.Xa=UN(e),this.eu=new Wf(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new Kf,i=t?t.eu:this.eu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),y=dp(this.query,p)?p:null,S=!!m&&this.mutatedKeys.has(m.key),P=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),M=!1;m&&y?m.data.isEqual(y.data)?S!==P&&(r.track({type:3,doc:y}),M=!0):this.iu(m,y)||(r.track({type:2,doc:y}),M=!0,(u&&this.Xa(y,u)>0||l&&this.Xa(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),M=!0):m&&!y&&(r.track({type:1,doc:m}),M=!0,(u||l)&&(a=!0)),M&&(y?(s=s.add(y),o=P?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((h,p)=>(function(y,S){let P=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return K(20277,{At:M})}};return P(y)-P(S)})(h.type,p.type)||this.Xa(h.doc,p.doc)),this.su(r),i=i!=null&&i;let a=t&&!i?this.ou():[],u=this.Za.size===0&&this.current&&!i?1:0,l=u!==this.Ya;return this.Ya=u,s.length!==0||l?{snapshot:new ma(this.query,e.eu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Kf,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=ue(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new Yf(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new Qf(r))}),t}uu(e){this.Ha=e.qs,this.Za=ue();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return ma.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},uw="SyncEngine",AI=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},RI=class{constructor(e){this.key=e,this.lu=!1}},NI=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new Pr(a=>jN(a),lp),this.Tu=new Map,this.Iu=new Set,this.du=new je(H.comparator),this.Eu=new Map,this.Au=new ku,this.Ru={},this.Vu=new Map,this.mu=Pu.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function s4(n,e,t=!0){return _(this,null,function*(){let r=_M(n),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield pM(r,e,t,!0),i})}function a4(n,e){return _(this,null,function*(){let t=_M(n);yield pM(t,e,!0,!1)})}function pM(n,e,t,r){return _(this,null,function*(){let i=yield zH(n.localStore,Qn(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield c4(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&cM(n.remoteStore,i),a})}function c4(n,e,t,r,i){return _(this,null,function*(){n.gu=(p,m,y)=>(function(P,M,L,z){return _(this,null,function*(){let Z=M.view.nu(L);Z.Ds&&(Z=yield zR(P.localStore,M.query,!1).then(({documents:T})=>M.view.nu(T,Z)));let De=z&&z.targetChanges.get(M.targetId),Ct=z&&z.targetMismatches.get(M.targetId)!=null,Ie=M.view.applyChanges(Z,P.isPrimaryClient,De,Ct);return ZR(P,M.targetId,Ie._u),Ie.snapshot})})(n,p,m,y);let o=yield zR(n.localStore,e,!0),s=new SI(e,o.qs),a=s.nu(o.documents),u=Nu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);ZR(n,t,l._u);let h=new AI(e,t,s);return n.Pu.set(e,h),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),l.snapshot})}function u4(n,e,t){return _(this,null,function*(){let r=ee(n),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!lp(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield lI(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&tw(r.remoteStore,i.targetId),MI(r,i.targetId)}).catch(Ea))):(MI(r,i.targetId),yield lI(r.localStore,i.targetId,!0))})}function l4(n,e){return _(this,null,function*(){let t=ee(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),tw(t.remoteStore,r.targetId))})}function d4(n,e,t){return _(this,null,function*(){let r=v4(n);try{let i=yield(function(s,a){let u=ee(s),l=Je.now(),h=a.reduce((y,S)=>y.add(S.key),ue()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let S=kr(),P=ue();return u.Os.getEntries(y,h).next(M=>{S=M,S.forEach((L,z)=>{z.isValidDocument()||(P=P.add(L))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,S)).next(M=>{p=M;let L=[];for(let z of a){let Z=mH(z,p.get(z.key).overlayedDocument);Z!=null&&L.push(new Xn(z.key,Z,PN(Z.value.mapValue),Yn.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,L,a)}).next(M=>{m=M;let L=M.applyToLocalDocumentSet(p,P);return u.documentOverlayCache.saveOverlays(y,M.batchId,L)})}).then(()=>({batchId:m.batchId,changes:$N(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,u){let l=s.Ru[s.currentUser.toKey()];l||(l=new je(ie)),l=l.insert(a,u),s.Ru[s.currentUser.toKey()]=l})(r,i.batchId,t),yield Bu(r,i.changes),yield pp(r.remoteStore)}catch(i){let o=ow(i,"Failed to persist write");t.reject(o)}})}function gM(n,e){return _(this,null,function*(){let t=ee(n);try{let r=yield BH(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Eu.get(o);s&&(Ee(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?Ee(s.lu,14607):i.removedDocuments.size>0&&(Ee(s.lu,42227),s.lu=!1))}),yield Bu(t,r,e)}catch(r){yield Ea(r)}})}function YR(n,e,t){let r=ee(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(s,a){let u=ee(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.wa)m.va(a)&&(l=!0)}),l&&cw(u)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function h4(n,e,t){return _(this,null,function*(){let r=ee(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new je(H.comparator);s=s.insert(o,Cn.newNoDocument(o,ne.min()));let a=ue().add(o),u=new xf(ne.min(),new Map,new je(ie),s,a);yield gM(r,u),r.du=r.du.remove(o),r.Eu.delete(e),lw(r)}else yield lI(r.localStore,e,!1).then(()=>MI(r,e,t)).catch(Ea)})}function f4(n,e){return _(this,null,function*(){let t=ee(n),r=e.batch.batchId;try{let i=yield UH(t.localStore,e);yM(t,r,null),mM(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Bu(t,i)}catch(i){yield Ea(i)}})}function p4(n,e,t){return _(this,null,function*(){let r=ee(n);try{let i=yield(function(s,a){let u=ee(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(Ee(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})})(r.localStore,e);yM(r,e,t),mM(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Bu(r,i)}catch(i){yield Ea(i)}})}function mM(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function yM(n,e,t){let r=ee(n),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function MI(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||vM(n,r)})}function vM(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(tw(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),lw(n))}function ZR(n,e,t){for(let r of t)r instanceof Qf?(n.Au.addReference(r.key,e),g4(n,r)):r instanceof Yf?(V(uw,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||vM(n,r.key)):K(19791,{yu:r})}function g4(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(V(uw,"New document in limbo: "+t),n.Iu.add(r),lw(n))}function lw(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new H(Pe.fromString(e)),r=n.mu.next();n.Eu.set(r,new RI(t)),n.du=n.du.insert(t,r),cM(n.remoteStore,new Mu(Qn(up(t.path)),r,"TargetPurposeLimboResolution",zI.ue))}}function Bu(n,e,t){return _(this,null,function*(){let r=ee(n),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,u)=>{s.push(r.gu(u,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=sI.Es(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.hu.J_(i),yield(function(u,l){return _(this,null,function*(){let h=ee(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>k.forEach(l,m=>k.forEach(m.Is,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>k.forEach(m.ds,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!Ia(p))throw p;V(ew,"Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=h.Fs.get(m),S=y.snapshotVersion,P=y.withLastLimboFreeSnapshotVersion(S);h.Fs=h.Fs.insert(m,P)}}})})(r.localStore,o))})}function m4(n,e){return _(this,null,function*(){let t=ee(n);if(!t.currentUser.isEqual(e)){V(uw,"User change. New user:",e.toKey());let r=yield sM(t.localStore,e);t.currentUser=e,(function(o,s){o.Vu.forEach(a=>{a.forEach(u=>{u.reject(new O(N.CANCELLED,s))})}),o.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Bu(t,r.Bs)}})}function y4(n,e){let t=ee(n),r=t.Eu.get(e);if(r&&r.lu)return ue().add(r.key);{let i=ue(),o=t.Tu.get(e);if(!o)return i;for(let s of o){let a=t.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function _M(n){let e=ee(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=gM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=y4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=h4.bind(null,e),e.hu.J_=i4.bind(null,e.eventManager),e.hu.pu=o4.bind(null,e.eventManager),e}function v4(n){let e=ee(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=f4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=p4.bind(null,e),e}var EM=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return _(this,null,function*(){this.serializer=hp(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)})}Cu(t,r){return null}Fu(t,r){return null}vu(t){return jH(this.persistence,new cI,t.initialUser,this.serializer)}Du(t){return new Uf(oI.Vi,this.serializer)}bu(t){return new dI}terminate(){return _(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),PI=class extends EM{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Ee(this.persistence.referenceDelegate instanceof Bf,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new GE(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?nn.withCacheSize(this.cacheSizeBytes):nn.DEFAULT;return new Uf(r=>Bf.Vi(r,t),this.serializer)}};var _4=(()=>{class n{initialize(t,r){return _(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>YR(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=m4.bind(null,this.syncEngine),yield r4(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return(function(){return new bI})()}createDatastore(t){let r=hp(t.databaseInfo.databaseId),i=(function(s){return new mI(s)})(t.databaseInfo);return(function(s,a,u,l){return new EI(s,a,u,l)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,o,s,a,u){return new wI(i,o,s,a,u)})(this.localStore,this.datastore,t.asyncQueue,r=>YR(this.syncEngine,r,0),(function(){return Hf.C()?new Hf:new hI})())}createSyncEngine(t,r){return(function(o,s,a,u,l,h,p){let m=new NI(o,s,a,u,l,h);return p&&(m.fu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return _(this,null,function*(){var t,r;yield(function(o){return _(this,null,function*(){let s=ee(o);V($o,"RemoteStore shutting down."),s.Ia.add(5),yield Uu(s),s.Ea.shutdown(),s.Aa.set("Unknown")})})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var Ou=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Rr("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Ri="FirestoreClient",kI=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ct.UNAUTHENTICATED,this.clientId=Du.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>_(this,null,function*(){V(Ri,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(V(Ri,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Dn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>_(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=ow(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function rE(n,e){return _(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),V(Ri,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>_(null,null,function*(){r.isEqual(i)||(yield sM(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{bi("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{V("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{bi("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e})}function JR(n,e){return _(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield E4(n);V(Ri,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>WR(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>WR(e.remoteStore,i)),n._onlineComponents=e})}function E4(n){return _(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){V(Ri,"Using user provided OfflineComponentProvider");try{yield rE(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===N.FAILED_PRECONDITION||i.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;bi("Error using user provided cache. Falling back to memory cache: "+t),yield rE(n,new EM)}}else V(Ri,"Using default OfflineComponentProvider"),yield rE(n,new PI(void 0));return n._offlineComponents})}function IM(n){return _(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(V(Ri,"Using user provided OnlineComponentProvider"),yield JR(n,n._uninitializedComponentsProvider._online)):(V(Ri,"Using default OnlineComponentProvider"),yield JR(n,new _4))),n._onlineComponents})}function I4(n){return IM(n).then(e=>e.syncEngine)}function Zf(n){return _(this,null,function*(){let e=yield IM(n),t=e.eventManager;return t.onListen=s4.bind(null,e.syncEngine),t.onUnlisten=u4.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=a4.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=l4.bind(null,e.syncEngine),t})}function w4(n,e,t={}){let r=new Dn;return n.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return(function(o,s,a,u,l){let h=new Ou({next:m=>{h.Ou(),s.enqueueAndForget(()=>aw(o,p));let y=m.docs.has(a);!y&&m.fromCache?l.reject(new O(N.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&u&&u.source==="server"?l.reject(new O(N.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new xu(up(a.path),h,{includeMetadataChanges:!0,ka:!0});return sw(o,p)})(yield Zf(n),n.asyncQueue,e,t,r)})),r.promise}function T4(n,e,t={}){let r=new Dn;return n.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return(function(o,s,a,u,l){let h=new Ou({next:m=>{h.Ou(),s.enqueueAndForget(()=>aw(o,p)),m.fromCache&&u.source==="server"?l.reject(new O(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new xu(a,h,{includeMetadataChanges:!0,ka:!0});return sw(o,p)})(yield Zf(n),n.asyncQueue,e,t,r)})),r.promise}function wM(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var XR=new Map;var TM="firestore.googleapis.com",eN=!0,Jf=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new O(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=TM,this.ssl=eN}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:eN;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=oM;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<LH)throw new O(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}x$("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=wM((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new O(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new O(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new O(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ya=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jf({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new O(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new O(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jf(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new oE;switch(r.type){case"firstParty":return new uE(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new O(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return _(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=XR.get(t);r&&(V("ComponentProvider","Removing Datastore"),XR.delete(t),r.terminate())})(this),Promise.resolve()}};function DM(n,e,t,r={}){var i;n=bn(n,ya);let o=fi(e),s=n._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),u=`${e}:${t}`;o&&($h(`https://${u}`),Hh("Firestore",!0)),s.host!==TM&&s.host!==u&&bi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:u,ssl:o,emulatorOptions:r});if(!Hn(l,a)&&(n._setSettings(l),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=ct.MOCK_USER;else{h=PA(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new O(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new ct(m)}n._authCredentials=new sE(new Cf(h,p))}}var Ni=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},lt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ii(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(ju(t,n._jsonSchema))return new n(e,r||null,new H(Pe.fromString(t.referencePath)))}};lt._jsonSchemaVersion="firestore/documentReference/1.0",lt._jsonSchema={type:Ze("string",lt._jsonSchemaVersion),referencePath:Ze("string")};var Ii=class n extends Ni{constructor(e,t,r){super(e,t,up(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new lt(this.firestore,null,new H(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function bM(n,e,...t){if(n=Fe(n),cN("collection","path",e),n instanceof ya){let r=Pe.fromString(e,...t);return vR(r),new Ii(n,null,r)}{if(!(n instanceof lt||n instanceof Ii))throw new O(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Pe.fromString(e,...t));return vR(r),new Ii(n.firestore,null,r)}}function CM(n,e,...t){if(n=Fe(n),arguments.length===1&&(e=Du.newId()),cN("doc","path",e),n instanceof ya){let r=Pe.fromString(e,...t);return yR(r),new lt(n,null,new H(r))}{if(!(n instanceof lt||n instanceof Ii))throw new O(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Pe.fromString(e,...t));return yR(r),new lt(n.firestore,n instanceof Ii?n.converter:null,new H(r))}}var tN="AsyncQueue",Xf=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new zf(this,"async_queue_retry"),this.oc=()=>{let r=nE();r&&V(tN,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=nE();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=nE();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new Dn;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return _(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Ia(e))throw e;V(tN,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Rr("INTERNAL UNHANDLED ERROR: ",nN(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=TI.createAndSchedule(this,e,t,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&K(47125,{hc:nN(this.tc)})}verifyOperationInProgress(){}Pc(){return _(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function nN(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function rN(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(n,["next","error","complete"])}var xr=class extends ya{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Xf,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return _(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Xf(e),this._firestoreClient=void 0,yield e}})}};function SM(n,e){let t=typeof n=="object"?n:Do(),r=typeof n=="string"?n:e||Mf,i=Ws(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=MA("firestore");o&&DM(i,...o)}return i}function $u(n){if(n._terminated)throw new O(N.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||D4(n),n._firestoreClient}function D4(n){var e,t,r;let i=n._freezeSettings(),o=(function(a,u,l,h){return new pE(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,wM(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new kI(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&(function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}})(n._componentsProvider))}var wi=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(bt.fromBase64String(e))}catch(t){throw new O(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ju(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};wi._jsonSchemaVersion="firestore/bytes/1.0",wi._jsonSchema={type:Ze("string",wi._jsonSchemaVersion),bytes:Ze("string")};var va=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new O(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Lu=class{constructor(e){this._methodName=e}};var Ti=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new O(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new O(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ie(this._lat,e._lat)||ie(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(ju(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Ti._jsonSchemaVersion="firestore/geoPoint/1.0",Ti._jsonSchema={type:Ze("string",Ti._jsonSchemaVersion),latitude:Ze("number"),longitude:Ze("number")};var Di=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ju(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new O(N.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Di._jsonSchemaVersion="firestore/vectorValue/1.0",Di._jsonSchema={type:Ze("string",Di._jsonSchemaVersion),vectorValues:Ze("object")};var b4=/^__.*__$/,xI=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Xn(e,this.data,this.fieldMask,t,this.fieldTransforms):new Bo(e,this.data,t,this.fieldTransforms)}},ep=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Xn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function AM(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw K(40011,{Ec:n})}}var OI=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return np(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(AM(this.Ec)&&b4.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},LI=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||hp(e)}Dc(e,t,r,i=!1){return new OI({Ec:e,methodName:t,bc:r,path:Yt.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function dw(n){let e=n._freezeSettings(),t=hp(n._databaseId);return new LI(n._databaseId,!!e.ignoreUndefinedProperties,t)}function RM(n,e,t,r,i,o={}){let s=n.Dc(o.merge||o.mergeFields?2:0,e,t,i);hw("Data must be an object, but it was:",s,r);let a=NM(r,s),u,l;if(o.merge)u=new rn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=FI(e,p,t);if(!s.contains(m))throw new O(N.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);PM(h,m)||h.push(m)}u=new rn(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new xI(new Qt(a),u,l)}var tp=class n extends Lu{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function C4(n,e,t,r){let i=n.Dc(1,e,t);hw("Data must be an object, but it was:",i,r);let o=[],s=Qt.empty();Mi(r,(u,l)=>{let h=fw(e,u,t);l=Fe(l);let p=i.gc(h);if(l instanceof tp)o.push(h);else{let m=Hu(l,p);m!=null&&(o.push(h),s.set(h,m))}});let a=new rn(o);return new ep(s,a,i.fieldTransforms)}function S4(n,e,t,r,i,o){let s=n.Dc(1,e,t),a=[FI(e,r,t)],u=[i];if(o.length%2!=0)throw new O(N.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(FI(e,o[m])),u.push(o[m+1]);let l=[],h=Qt.empty();for(let m=a.length-1;m>=0;--m)if(!PM(l,a[m])){let y=a[m],S=u[m];S=Fe(S);let P=s.gc(y);if(S instanceof tp)l.push(y);else{let M=Hu(S,P);M!=null&&(l.push(y),h.set(y,M))}}let p=new rn(l);return new ep(h,p,s.fieldTransforms)}function A4(n,e,t,r=!1){return Hu(t,n.Dc(r?4:3,e))}function Hu(n,e){if(MM(n=Fe(n)))return hw("Unsupported field value:",e,n),NM(n,e);if(n instanceof Lu)return(function(r,i){if(!AM(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let a of r){let u=Hu(a,i.yc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}})(n,e)}return(function(r,i){if((r=Fe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return dH(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Je.fromDate(r);return{timestampValue:Vf(i.serializer,o)}}if(r instanceof Je){let o=new Je(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Vf(i.serializer,o)}}if(r instanceof Ti)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof wi)return{bytesValue:JN(i.serializer,r._byteString)};if(r instanceof lt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:XI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Di)return(function(s,a){return{mapValue:{fields:{[WI]:{stringValue:KI},[ca]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return JI(a.serializer,l)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${sp(r)}`)})(n,e)}function NM(n,e){let t={};return DN(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Mi(n,(r,i)=>{let o=Hu(i,e.Vc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function MM(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Je||n instanceof Ti||n instanceof wi||n instanceof lt||n instanceof Lu||n instanceof Di)}function hw(n,e,t){if(!MM(t)||!uN(t)){let r=sp(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function FI(n,e,t){if((e=Fe(e))instanceof va)return e._internalPath;if(typeof e=="string")return fw(n,e);throw np("Field path arguments must be of type string or ",n,!1,void 0,t)}var R4=new RegExp("[~\\*/\\[\\]]");function fw(n,e,t){if(e.search(R4)>=0)throw np(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new va(...e.split("."))._internalPath}catch{throw np(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function np(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new O(N.INVALID_ARGUMENT,a+n+u)}function PM(n,e){return n.some(t=>t.isEqual(e))}var rp=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new lt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new VI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(gp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},VI=class extends rp{data(){return super.data()}};function gp(n,e){return typeof e=="string"?fw(n,e):e instanceof va?e._internalPath:e._delegate._internalPath}function kM(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new O(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Fu=class{},ip=class extends Fu{};function xM(n,e,...t){let r=[];e instanceof Fu&&r.push(e),r=r.concat(t),(function(o){let s=o.filter(u=>u instanceof jI).length,a=o.filter(u=>u instanceof op).length;if(s>1||s>0&&a>0)throw new O(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)n=i._apply(n);return n}var op=class n extends ip{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return FM(e._query,t),new Ni(e.firestore,e.converter,SE(e._query,t))}_parse(e){let t=dw(e.firestore);return(function(o,s,a,u,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new O(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){oN(p,h);let S=[];for(let P of p)S.push(iN(u,o,P));m={arrayValue:{values:S}}}else m=iN(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||oN(p,h),m=A4(a,s,p,h==="in"||h==="not-in");return Ye.create(l,h,m)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function OM(n,e,t){let r=e,i=gp("where",n);return op._create(i,r,t)}var jI=class n extends Fu{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Sn.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)FM(s,u),s=SE(s,u)})(e._query,t),new Ni(e.firestore,e.converter,SE(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var UI=class n extends ip{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=(function(i,o,s){if(i.startAt!==null)throw new O(N.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new O(N.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Vo(o,s)})(e._query,this._field,this._direction);return new Ni(e.firestore,e.converter,(function(i,o){let s=i.explicitOrderBy.concat([o]);return new Si(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}};function LM(n,e="asc"){let t=e,r=gp("orderBy",n);return UI._create(r,t)}function iN(n,e,t){if(typeof(t=Fe(t))=="string"){if(t==="")throw new O(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!VN(e)&&t.indexOf("/")!==-1)throw new O(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Pe.fromString(t));if(!H.isDocumentKey(r))throw new O(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return bR(n,new H(r))}if(t instanceof lt)return bR(n,t._key);throw new O(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${sp(t)}.`)}function oN(n,e){if(!Array.isArray(n)||n.length===0)throw new O(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function FM(n,e){let t=(function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new O(N.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new O(N.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var BI=class{convertValue(e,t="none"){switch(Ci(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Me(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Mr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw K(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Mi(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[ca].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Me(s.doubleValue));return new Di(o)}convertGeoPoint(e){return new Ti(Me(e.latitude),Me(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=cp(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Su(e));default:return null}}convertTimestamp(e){let t=Nr(e);return new Je(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Pe.fromString(e);Ee(iM(r),9688,{name:e});let i=new Pf(r.get(1),r.get(3)),o=new H(r.popFirst(5));return i.isEqual(t)||Rr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function VM(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var ko=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},xo=class n extends rp{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new sa(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(gp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new O(N.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};xo._jsonSchemaVersion="firestore/documentSnapshot/1.0",xo._jsonSchema={type:Ze("string",xo._jsonSchemaVersion),bundleSource:Ze("string","DocumentSnapshot"),bundleName:Ze("string"),bundle:Ze("string")};var sa=class extends xo{data(e={}){return super.data(e)}},Oo=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new ko(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new sa(this._firestore,this._userDataWriter,r.key,r,new ko(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new O(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new sa(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ko(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new sa(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ko(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:N4(a.type),doc:u,oldIndex:l,newIndex:h}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new O(N.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Du.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function N4(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return K(61501,{type:n})}}function jM(n){n=bn(n,lt);let e=bn(n.firestore,xr);return w4($u(e),n._key).then(t=>HM(e,n,t))}Oo._jsonSchemaVersion="firestore/querySnapshot/1.0",Oo._jsonSchema={type:Ze("string",Oo._jsonSchemaVersion),bundleSource:Ze("string","QuerySnapshot"),bundleName:Ze("string"),bundle:Ze("string")};var Vu=class extends BI{constructor(e){super(),this.firestore=e}convertBytes(e){return new wi(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new lt(this.firestore,null,t)}};function UM(n){n=bn(n,Ni);let e=bn(n.firestore,xr),t=$u(e),r=new Vu(e);return kM(n._query),T4(t,n._query).then(i=>new Oo(e,r,n,i))}function BM(n,e,t){n=bn(n,lt);let r=bn(n.firestore,xr),i=VM(n.converter,e,t);return $M(r,[RM(dw(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Yn.none())])}function pw(n,...e){var t,r,i;n=Fe(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||rN(e[s])||(o=e[s++]);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(rN(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(n instanceof lt)l=bn(n.firestore,xr),h=up(n._key.path),u={next:p=>{e[s]&&e[s](HM(l,n,p))},error:e[s+1],complete:e[s+2]};else{let p=bn(n,Ni);l=bn(p.firestore,xr),h=p._query;let m=new Vu(l);u={next:y=>{e[s]&&e[s](new Oo(l,m,p,y))},error:e[s+1],complete:e[s+2]},kM(n._query)}return(function(m,y,S,P){let M=new Ou(P),L=new xu(y,M,S);return m.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return sw(yield Zf(m),L)})),()=>{M.Ou(),m.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return aw(yield Zf(m),L)}))}})($u(l),h,a,u)}function $M(n,e){return(function(r,i){let o=new Dn;return r.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return d4(yield I4(r),i,o)})),o.promise})($u(n),e)}function HM(n,e,t){let r=t.docs.get(e._key),i=new Vu(n);return new xo(n,i,e._key,r,new ko(t.hasPendingWrites,t.fromCache),e.converter)}var $I=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=dw(e)}set(e,t,r){this._verifyNotCommitted();let i=iE(e,this._firestore),o=VM(i.converter,t,r),s=RM(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Yn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=iE(e,this._firestore),s;return s=typeof(t=Fe(t))=="string"||t instanceof va?S4(this._dataReader,"WriteBatch.update",o._key,t,r,i):C4(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,Yn.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=iE(e,this._firestore);return this._mutations=this._mutations.concat(new Ru(t._key,Yn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new O(N.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function iE(n,e){if((n=Fe(n)).firestore!==e)throw new O(N.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function zM(n){return $u(n=bn(n,xr)),new $I(n,e=>$M(n,e))}(function(e,t=!0){(function(i){_a=i})(gi),In(new kt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new xr(new aE(r.getProvider("auth-internal")),new lE(s,r.getProvider("app-check-internal")),(function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new O(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pf(l.options.projectId,h)})(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Ve(fR,pR,e),Ve(fR,pR,"esm2017")})();var mp=function(){return mp=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},mp.apply(this,arguments)};var k4={includeMetadataChanges:!1};function qM(n,e){return e===void 0&&(e=k4),new G(function(t){var r=pw(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function GM(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:mp(mp({},r),(t={},t[e.idField]=n.id,t))}function WM(n){return qM(n,{includeMetadataChanges:!0}).pipe(Q(function(e){return e.docs}))}function KM(n,e){return e===void 0&&(e={}),WM(n).pipe(Q(function(t){return t.map(function(r){return GM(r,e)})}))}var An=class{constructor(e){return e}},QM="firestore",gw=class{constructor(){return Qs(QM)}};var mw=new B("angularfire2.firestore-instances");function x4(n,e){let t=su(QM,n,e);return t&&new An(t)}function O4(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new An(r)}}var L4={provide:gw,deps:[[new Ht,mw]]},F4={provide:An,useFactory:x4,deps:[[new Ht,mw],Tr]};function YM(n,...e){return Ve("angularfire",mi.full,"fst"),Et([F4,L4,{provide:mw,useFactory:O4(n),multi:!0,deps:[fe,xe,yi,Co,[new Ht,yu],[new Ht,Ys],...e]}])}var ZM=We(KM,!0);var zu=We(bM,!0,2);var yp=We(CM,!0,2);var JM=We(jM,!0);var XM=We(UM,!0);var eP=We(SM,!0);var tP=We(LM,!0,2),nP=We(xM,!0,2);var yw=We(BM,!0,2);var rP=We(OM,!0,2),iP=We(zM,!0,2);var vp=class n{constructor(e){this.firestore=e}getThings(){let e={fromFirestore:i=>{let o=i.data();return{id:i.id,name:o.name,description:o.description,location:o.location,photoURL:o.photoURL,createdAt:o.createdAt,owner:o.owner,status:o.status,metadata:o.metadata}},toFirestore:i=>({name:i.name,description:i.description,location:i.location,photoURL:i.photoURL,createdAt:i.createdAt,owner:i.owner,status:i.status,metadata:i.metadata})},t=zu(this.firestore,"Things"),r=nP(t,rP("status","==","ON"),tP("createdAt","desc")).withConverter(e);return ZM(r)}static \u0275fac=function(t){return new(t||n)($(An))};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};var j4=(n,e)=>e.id;function U4(n,e){if(n&1&&(Se(0,"div",18)(1,"div",20),gn(2,"img",21),Se(3,"div",22)(4,"h5",23),ce(5),Ne(),Se(6,"p",24),ce(7),Ne(),Se(8,"a",25),ce(9," Ver Detalhes "),gn(10,"i",26),Ne()()()()),n&2){let t=e.$implicit;st(2),Xd("src",t.photoURL,co)("alt",t.name),st(3),po(t.name),st(2),po(t.description)}}function B4(n,e){n&1&&(Se(0,"div",19)(1,"div",27),ce(2,"Nenhuma coisa em destaque encontrada."),Ne(),Se(3,"p"),ce(4,"Voc\xEA pode criar dados de teste acessando a rota "),Se(5,"a",28),ce(6,"/seed-data"),Ne(),ce(7,"."),Ne()())}function $4(n,e){n&1&&Py(0,U4,11,4,"div",18,j4,!1,B4,8,0,"div",19),n&2&&ky(e)}var _p=class n{constructor(e){this.dataService=e}things$;ngOnInit(){this.things$=this.dataService.getThings()}static \u0275fac=function(t){return new(t||n)(Re(vp))};static \u0275cmp=Mt({type:n,selectors:[["app-home"]],decls:22,vars:3,consts:[["id","demo","data-bs-ride","carousel",1,"carousel","slide","mt-3"],[1,"carousel-indicators"],["type","button","data-bs-target","#demo","data-bs-slide-to","0",1,"active"],["type","button","data-bs-target","#demo","data-bs-slide-to","1"],["type","button","data-bs-target","#demo","data-bs-slide-to","2"],[1,"carousel-inner"],[1,"carousel-item","active"],["src","img/la.jpg","alt","Los Angeles",1,"d-block",2,"width","100%"],[1,"carousel-item"],["src","img/chicago.jpg","alt","Chicago",1,"d-block",2,"width","100%"],["src","img/ny.jpg","alt","New York",1,"d-block",2,"width","100%"],["type","button","data-bs-target","#demo","data-bs-slide","prev",1,"carousel-control-prev"],[1,"carousel-control-prev-icon"],["type","button","data-bs-target","#demo","data-bs-slide","next",1,"carousel-control-next"],[1,"carousel-control-next-icon"],[1,"container","mt-2"],[1,"mb-4","text-center"],[1,"row"],[1,"col-12","col-sm-6","col-md-4","mb-4"],[1,"col-12","text-center","mt-5"],[1,"card","shadow-sm","h-100"],[1,"card-img-top",2,"height","200px","object-fit","cover",3,"src","alt"],[1,"card-body","d-flex","flex-column"],[1,"card-title","text-primary"],[1,"card-text","text-muted","small","mt-auto"],["href","#",1,"btn","btn-sm","btn-outline-secondary"],[1,"bi","bi-arrow-right-circle"],[1,"alert","alert-warning"],["href","/seed-data"]],template:function(t,r){if(t&1&&(Se(0,"div",0)(1,"div",1),gn(2,"button",2)(3,"button",3)(4,"button",4),Ne(),Se(5,"div",5)(6,"div",6),gn(7,"img",7),Ne(),Se(8,"div",8),gn(9,"img",9),Ne(),Se(10,"div",8),gn(11,"img",10),Ne()(),Se(12,"button",11),gn(13,"span",12),Ne(),Se(14,"button",13),gn(15,"span",14),Ne()(),Se(16,"div",15)(17,"h2",16),ce(18,"Coisas em Destaque"),Ne(),Se(19,"div",17),mr(20,$4,3,1),Rs(21,"async"),Ne()()),t&2){let i;st(20),yr((i=Ns(21,1,r.things$))?20:-1,i)}},dependencies:[ai,Mc],styles:["h2[_ngcontent-%COMP%]{color:#610000}"]})};var Ep=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Mt({type:n,selectors:[["app-contacts"]],decls:2,vars:0,template:function(t,r){t&1&&(Se(0,"h2"),ce(1,"Fa\xE7a Contato"),Ne())},encapsulation:2})};var Ip=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Mt({type:n,selectors:[["app-about"]],decls:2,vars:0,template:function(t,r){t&1&&(Se(0,"h2"),ce(1,"Sobre..."),Ne())},encapsulation:2})};var wp=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Mt({type:n,selectors:[["app-new"]],decls:2,vars:0,template:function(t,r){t&1&&(Se(0,"p"),ce(1,"new works!"),Ne())},encapsulation:2})};var H4=(n,e,t)=>({"alert-success":n,"alert-info":e,"alert-danger":t});function z4(n,e){n&1&&(ve(0,"div",3)(1,"span",5),ce(2,"Loading..."),_e()())}function q4(n,e){if(n&1&&(ve(0,"div",4),ce(1),_e()),n&2){let t=oi();vr("ngClass",Fy(2,H4,t.feedbackMessage.includes("sucesso"),t.feedbackMessage.includes("j\xE1 existe"),t.feedbackMessage.includes("erro"))),st(),bc(" ",t.feedbackMessage," ")}}var Tp=class n{constructor(e){this.firestore=e;this.checkAndSeedData()}feedbackMessage=null;isLoading=!0;owners=["eiXTm44Mvwd5xZU75HQtzD5WZrT2","t3CQISBwVWP0CAFrNMnVfFSXRaK2","4j2oIn4DlqbS91MDgHr5l0HRwTf2"];checkAndSeedData(){return _(this,null,function*(){try{let e=zu(this.firestore,"Things");(yield XM(e)).empty?(yield this.seedData(),this.feedbackMessage='Cole\xE7\xE3o "Things" criada e populada com 15 itens!'):this.feedbackMessage='A cole\xE7\xE3o "Things" j\xE1 existe. Nenhuma a\xE7\xE3o foi necess\xE1ria.'}catch(e){console.error("Erro ao verificar ou criar dados:",e),this.feedbackMessage="Ocorreu um erro ao processar a solicita\xE7\xE3o."}finally{this.isLoading=!1}})}seedData(){return _(this,null,function*(){let e=iP(this.firestore),t=zu(this.firestore,"Things");for(let r=1;r<=15;r++){let i=this.getRandomDate(),o=this.owners[Math.floor(Math.random()*this.owners.length)],s={name:`Coisa N\xBA ${r}`,description:`Descri\xE7\xE3o completa e sem embara\xE7os da coisa n\xFAmero ${r}.`,location:`Localiza\xE7\xE3o secreta e bem escondida da coisa ${r}`,photoURL:`https://picsum.photos/400/300?random=${r}`,createdAt:i,owner:o,status:"ON",metadata:{}},a=yp(t);e.set(a,s)}yield e.commit()})}getRandomDate(){let e=new Date,t=new Date;t.setMonth(e.getMonth()-6);let r=t.getTime()+Math.random()*(e.getTime()-t.getTime());return new Date(r).toISOString()}static \u0275fac=function(t){return new(t||n)(Re(An))};static \u0275cmp=Mt({type:n,selectors:[["app-seed-data"]],decls:7,vars:2,consts:[[1,"container","mt-5"],[1,"row","justify-content-center"],[1,"col-md-8","text-center"],["role","status",1,"spinner-border","text-primary","mt-4"],[1,"alert","mt-4",3,"ngClass"],[1,"visually-hidden"]],template:function(t,r){t&1&&(ve(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),ce(4,"Popula\xE7\xE3o de Dados"),_e(),mr(5,z4,3,0,"div",3),mr(6,q4,2,6,"div",4),_e()()()),t&2&&(st(5),yr(r.isLoading?5:-1),st(),yr(r.feedbackMessage?6:-1))},dependencies:[ai,Qy],encapsulation:2})};var qu="NgLegal",oP=[{path:"",redirectTo:"/home",pathMatch:"full"},{path:"home",component:_p,title:qu},{path:"contacts",component:Ep,title:`${qu} - Fa\xE7a Contato`},{path:"about",component:Ip,title:`${qu} - Sobre`},{path:"new",component:wp,title:`${qu} - Cadastro`},{path:"seed-data",component:Tp,title:`${qu} - Cadastro de Coisas`},{path:"**",redirectTo:"/home"}];var _w="Service workers are disabled or not supported by this browser",Ta=class{serviceWorker;worker;registration;events;constructor(e,t){if(this.serviceWorker=e,!e)this.worker=this.events=this.registration=new G(r=>r.error(new U(5601,!1)));else{let r=null,i=new ke;this.worker=new G(l=>(r!==null&&l.next(r),i.subscribe(h=>l.next(h))));let o=()=>{let{controller:l}=e;l!==null&&(r=l,i.next(r))};e.addEventListener("controllerchange",o),o(),this.registration=this.worker.pipe(Ae(()=>e.getRegistration().then(l=>{if(!l)throw new U(5601,!1);return l})));let s=new ke;this.events=s.asObservable();let a=l=>{let{data:h}=l;h?.type&&s.next(h)};e.addEventListener("message",a),t?.get(Fn,null,{optional:!0})?.onDestroy(()=>{e.removeEventListener("controllerchange",o),e.removeEventListener("message",a)})}}postMessage(e,t){return new Promise(r=>{this.worker.pipe(Rt(1)).subscribe(i=>{i.postMessage(F({action:e},t)),r()})})}postMessageWithOperation(e,t,r){let i=this.waitForOperationCompleted(r),o=this.postMessage(e,t);return Promise.all([o,i]).then(([,s])=>s)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(e){let t;return typeof e=="string"?t=r=>r.type===e:t=r=>e.includes(r.type),this.events.pipe(it(t))}nextEventOfType(e){return this.eventsOfType(e).pipe(Rt(1))}waitForOperationCompleted(e){return new Promise((t,r)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(it(i=>i.nonce===e),Rt(1),Q(i=>{if(i.result!==void 0)return i.result;throw new Error(i.error)})).subscribe({next:t,error:r})})}get isEnabled(){return!!this.serviceWorker}},G4=(()=>{class n{sw;messages;notificationClicks;notificationCloses;pushSubscriptionChanges;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new ke;constructor(t){if(this.sw=t,!t.isEnabled){this.messages=ir,this.notificationClicks=ir,this.notificationCloses=ir,this.pushSubscriptionChanges=ir,this.subscription=ir;return}this.messages=this.sw.eventsOfType("PUSH").pipe(Q(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(Q(i=>i.data)),this.notificationCloses=this.sw.eventsOfType("NOTIFICATION_CLOSE").pipe(Q(i=>i.data)),this.pushSubscriptionChanges=this.sw.eventsOfType("PUSH_SUBSCRIPTION_CHANGE").pipe(Q(i=>i.data)),this.pushManager=this.sw.registration.pipe(Q(i=>i.pushManager));let r=this.pushManager.pipe(Ae(i=>i.getSubscription()));this.subscription=new G(i=>{let o=r.subscribe(i),s=this.subscriptionChanges.subscribe(i);return()=>{o.unsubscribe(),s.unsubscribe()}})}requestSubscription(t){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(_w));let r={userVisibleOnly:!0},i=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),o=new Uint8Array(new ArrayBuffer(i.length));for(let s=0;s<i.length;s++)o[s]=i.charCodeAt(s);return r.applicationServerKey=o,new Promise((s,a)=>{this.pushManager.pipe(Ae(u=>u.subscribe(r)),Rt(1)).subscribe({next:u=>{this.subscriptionChanges.next(u),s(u)},error:a})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(_w));let t=r=>{if(r===null)throw new U(5602,!1);return r.unsubscribe().then(i=>{if(!i)throw new U(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((r,i)=>{this.subscription.pipe(Rt(1),Ae(t)).subscribe({next:r,error:i})})}decodeBase64(t){return atob(t)}static \u0275fac=function(r){return new(r||n)($(Ta))};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})(),W4=(()=>{class n{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}ongoingCheckForUpdate=null;constructor(t){if(this.sw=t,!t.isEnabled){this.versionUpdates=ir,this.unrecoverable=ir;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED","VERSION_FAILED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(_w));if(this.ongoingCheckForUpdate)return this.ongoingCheckForUpdate;let t=this.sw.generateNonce();return this.ongoingCheckForUpdate=this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t).finally(()=>{this.ongoingCheckForUpdate=null}),this.ongoingCheckForUpdate}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new U(5601,!1));let t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}static \u0275fac=function(r){return new(r||n)($(Ta))};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})();var aP=new B("");function K4(){let n=R(Gu);if(!("serviceWorker"in navigator&&n.enabled!==!1))return;let e=R(aP),t=R(fe),r=R(Fn);t.runOutsideAngular(()=>{let i=navigator.serviceWorker,o=()=>i.controller?.postMessage({action:"INITIALIZE"});i.addEventListener("controllerchange",o),r.onDestroy(()=>{i.removeEventListener("controllerchange",o)})}),t.runOutsideAngular(()=>{let i,{registrationStrategy:o}=n;if(typeof o=="function")i=new Promise(s=>o().subscribe(()=>s()));else{let[s,...a]=(o||"registerWhenStable:30000").split(":");switch(s){case"registerImmediately":i=Promise.resolve();break;case"registerWithDelay":i=sP(+a[0]||0);break;case"registerWhenStable":i=Promise.race([r.whenStable(),sP(+a[0])]);break;default:throw new U(5600,!1)}}i.then(()=>{r.destroyed||navigator.serviceWorker.register(e,{scope:n.scope,updateViaCache:n.updateViaCache,type:n.type}).catch(s=>console.error(Qr(5604,!1)))})})}function sP(n){return new Promise(e=>setTimeout(e,n))}function Q4(n,e){return new Ta(n.enabled!==!1?navigator.serviceWorker:void 0,e)}var Gu=class{enabled;updateViaCache;type;scope;registrationStrategy};function cP(n,e={}){return Et([G4,W4,{provide:aP,useValue:n},{provide:Gu,useValue:e},{provide:Ta,useFactory:Q4,deps:[Gu,xe]},Cs(K4)])}var uP={providers:[vm(),Uy({eventCoalescing:!0}),Ov(oP),o0(()=>s0({projectId:"ngcrud-93a6f",appId:"1:1043187476281:web:777f337c87a8d171d22ae8",storageBucket:"ngcrud-93a6f.firebasestorage.app",apiKey:"AIzaSyDHQPWxYc2Xc2xXwW2dh6bg1Bup7vjYNrk",authDomain:"ngcrud-93a6f.firebaseapp.com",messagingSenderId:"1043187476281"})),sR(()=>cR()),YM(()=>eP()),cP("ngsw-worker.js",{enabled:!Sc(),registrationStrategy:"registerWhenStable:30000"})]};var Dp=class n{constructor(e,t){this.auth=e;this.firestore=t;this.user$=Bi(()=>aR(this.auth)).pipe(Ae(r=>{if(!r)return new G(o=>o.next(null));let i=yp(this.firestore,"Users",r.uid);return we(JM(i)).pipe(Ae(o=>{let s=new Date().toISOString();if(o.exists())return we(yw(i,{lastLoginAt:s},{merge:!0})).pipe(Q(()=>r));{let a={displayName:r.displayName,email:r.email,photoURL:r.photoURL,uid:r.uid,lastLoginAt:s,role:"user",status:"ON",createdAt:s};return we(yw(i,a)).pipe(Q(()=>r))}}))}))}user$;loginWithGoogle(){return uR(this.auth,new U_)}logout(){return lR(this.auth)}static \u0275fac=function(t){return new(t||n)($(No),$(An))};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};var lP=()=>({exact:!0});function Z4(n,e){if(n&1){let t=As();ve(0,"a",34),_r("click",function(){eo(t);let i=oi();return to(i.confirmLogout())}),tt(1,"img",35),_e()}if(n&2){let t=e;st(),vr("src",t.photoURL,co)("alt",t.displayName)}}function J4(n,e){if(n&1){let t=As();ve(0,"a",34),_r("click",function(){eo(t);let i=oi();return to(i.authService.loginWithGoogle())}),tt(1,"i",36),_e()}}function X4(n,e){if(n&1){let t=As();ve(0,"a",37),_r("click",function(){eo(t);let i=oi();return to(i.confirmLogout())}),tt(1,"img",38),ve(2,"span"),ce(3),_e()()}if(n&2){let t=e;st(),vr("src",t.photoURL+"?sz=32",co)("alt",t.displayName),st(2),po(t.displayName)}}function ez(n,e){if(n&1){let t=As();ve(0,"a",39),_r("click",function(){eo(t);let i=oi();return to(i.authService.loginWithGoogle())}),tt(1,"i",40),ve(2,"span"),ce(3,"Login"),_e()()}}var bp=class n{constructor(e){this.authService=e}title=fr("ng-legal");confirmLogout(){confirm("Tem certeza que deseja sair?")&&this.authService.logout()}static \u0275fac=function(t){return new(t||n)(Re(Dp))};static \u0275cmp=Mt({type:n,selectors:[["app-root"]],decls:63,vars:10,consts:[[1,"d-flex","flex-column","min-vh-100"],[1,"navbar","navbar-expand-sm","bg-dark","navbar-dark"],[1,"container"],["routerLink","/home",1,"navbar-brand"],[1,"bi","bi-hand-thumbs-up"],["type","button","data-bs-toggle","offcanvas","data-bs-target","#offcanvasNavbar","aria-controls","offcanvasNavbar",1,"navbar-toggler","d-sm-none"],[1,"navbar-toggler-icon"],["id","collapsibleNavbar",1,"collapse","navbar-collapse"],[1,"navbar-nav","ms-auto","align-items-center"],[1,"nav-item"],["routerLink","/home","routerLinkActive","active",1,"nav-link","text-white",3,"routerLinkActiveOptions"],["routerLink","/new","routerLinkActive","active",1,"nav-link","text-white"],["routerLink","/contacts","routerLinkActive","active",1,"nav-link","text-white"],["routerLink","/about","routerLinkActive","active",1,"nav-link","text-white"],[1,"nav-link"],["tabindex","-1","id","offcanvasNavbar","aria-labelledby","offcanvasNavbarLabel",1,"offcanvas","offcanvas-end","text-bg-dark","d-sm-none"],[1,"offcanvas-header"],["id","offcanvasNavbarLabel",1,"offcanvas-title"],[1,"bi","bi-database-fill"],["type","button","data-bs-dismiss","offcanvas","aria-label","Close",1,"btn-close","btn-close-white"],[1,"offcanvas-body"],[1,"navbar-nav","justify-content-end","flex-grow-1","pe-3"],["routerLink","/home","routerLinkActive","active",1,"nav-link","ps-2",3,"routerLinkActiveOptions"],[1,"bi","bi-house-fill","pe-2",2,"font-size","1.2rem"],["routerLink","/new","routerLinkActive","active",1,"nav-link","ps-2"],[1,"bi","bi-chat-dots-fill","pe-2",2,"font-size","1.2rem"],["routerLink","/contacts","routerLinkActive","active",1,"nav-link","ps-2"],["routerLink","/about","routerLinkActive","active",1,"nav-link","ps-2"],[1,"bi","bi-info-circle-fill","pe-2",2,"font-size","1.2rem"],["data-bs-dismiss","offcanvas",1,"nav-link"],["data-bs-dismiss","offcanvas",1,"nav-link","ps-2"],[1,"flex-grow-1","container"],[1,"bg-dark","text-white","text-center","p-3","mt-4"],[1,"mb-0"],[1,"nav-link",3,"click"],["width","32","height","32",1,"rounded-circle",3,"src","alt"],[1,"bi","bi-person-circle",2,"font-size","1.5rem"],["data-bs-dismiss","offcanvas",1,"nav-link",3,"click"],["width","32","height","32",1,"rounded-circle","me-2",3,"src","alt"],["data-bs-dismiss","offcanvas",1,"nav-link","ps-2",3,"click"],[1,"bi","bi-person-circle","me-2",2,"font-size","1.2rem"]],template:function(t,r){if(t&1&&(ve(0,"div",0)(1,"nav",1)(2,"div",2)(3,"a",3),ce(4,"Ng"),tt(5,"i",4),ce(6,"Legal"),_e(),ve(7,"button",5),tt(8,"span",6),_e(),ve(9,"div",7)(10,"ul",8)(11,"li",9)(12,"a",10),ce(13,"In\xEDcio"),_e()(),ve(14,"li",9)(15,"a",11),ce(16,"Cadastro"),_e()(),ve(17,"li",9)(18,"a",12),ce(19,"Contatos"),_e()(),ve(20,"li",9)(21,"a",13),ce(22,"Sobre"),_e()(),ve(23,"li",9),mr(24,Z4,2,2,"a",14),Rs(25,"async"),Ss(26,J4,2,0,"a",14),_e()()()()(),ve(27,"div",15)(28,"div",16)(29,"h5",17),ce(30," NG"),tt(31,"i",18),ce(32,"CRUD "),_e(),tt(33,"button",19),_e(),ve(34,"div",20)(35,"ul",21)(36,"li",9)(37,"a",22),tt(38,"i",23),ce(39,"In\xEDcio"),_e()(),ve(40,"li",9)(41,"a",24),tt(42,"i",25),ce(43,"Novo"),_e()(),ve(44,"li",9)(45,"a",26),tt(46,"i",25),ce(47,"Contatos"),_e()(),ve(48,"li",9)(49,"a",27),tt(50,"i",28),ce(51,"Sobre"),_e()(),ve(52,"li",9),tt(53,"hr"),_e(),ve(54,"li",9),mr(55,X4,4,3,"a",29),Rs(56,"async"),Ss(57,ez,4,0,"a",30),_e()()()(),ve(58,"main",31),tt(59,"router-outlet"),_e(),ve(60,"footer",32)(61,"p",33),ce(62,"\xA9 Copyright 2025 Joca da Silva"),_e()()()),t&2){let i,o;st(12),vr("routerLinkActiveOptions",eh(8,lP)),st(12),yr((i=Ns(25,4,r.authService.user$))?24:26,i),st(13),vr("routerLinkActiveOptions",eh(9,lP)),st(18),yr((o=Ns(56,6,r.authService.user$))?55:57,o)}},dependencies:[Yc,Fv,qs,xv,ai,Mc],styles:["@media (max-width: 575.98px){.offcanvas[_ngcontent-%COMP%]{max-width:280px}}a[_ngcontent-%COMP%]{cursor:pointer}.nav-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#ffffff1a}.navbar-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{color:var(--bs-warning)!important}"]})};sv(bp,uP).catch(n=>console.error(n));
